import{_ as s,o as a,c as n,U as l}from"./chunks/framework.e5d16f40.js";const i=JSON.parse('{"title":"","description":"","frontmatter":{"prev":false,"next":false},"headers":[],"relativePath":"markdown/chapter-8/chapter-8.2/index.md","filePath":"markdown/chapter-8/chapter-8.2/index.md"}'),o={name:"markdown/chapter-8/chapter-8.2/index.md"},p=l(`<h2 id="com-coolawchain-sdk-structdata" tabindex="-1">com.coolawchain.sdk.structdata <a class="header-anchor" href="#com-coolawchain-sdk-structdata" aria-label="Permalink to &quot;com.coolawchain.sdk.structdata&quot;">​</a></h2><h3 id="dataupload" tabindex="-1">DataUpload <a class="header-anchor" href="#dataupload" aria-label="Permalink to &quot;DataUpload&quot;">​</a></h3><p>用于进行结构数据上链保存的操作对象。</p><h4 id="构造函数" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="dataupload-frontend-string" tabindex="-1">DataUpload (Frontend, String) <a class="header-anchor" href="#dataupload-frontend-string" aria-label="Permalink to &quot;DataUpload (Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataUpload</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交上链交易前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">DataUpload</span><span style="color:#A6ACCD;"> oDataUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataUpload</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="dataupload-1" tabindex="-1">DataUpload () <a class="header-anchor" href="#dataupload-1" aria-label="Permalink to &quot;DataUpload ()&quot;">​</a></h5><p>构造一个DataUpload对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataUpload</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="属性" tabindex="-1">属性 <a class="header-anchor" href="#属性" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend" tabindex="-1">frontend <a class="header-anchor" href="#frontend" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要上链保存的数据所在链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="datacontent" tabindex="-1">dataContent <a class="header-anchor" href="#datacontent" aria-label="Permalink to &quot;dataContent&quot;">​</a></h5><p>设置要上链保存的数据体。建议使用JSON或XML等格式构建，然后序列化成String的类型进行存储。dataContent的信息将被区块链加密保存。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataContent </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="dataproperty" tabindex="-1">dataProperty <a class="header-anchor" href="#dataproperty" aria-label="Permalink to &quot;dataProperty&quot;">​</a></h5><p>设置要上链保存的数据附属属性信息。附属属性建议使用JSON或XML等格式构建，然后序列化成String的类型进行存储。DdataProperty的信息将被区块链加密保存。</p><p>如果想要对链上已保存的dataProperty进行清空处理，则此属性需设置NULL。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataProperty </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="encname" tabindex="-1">encName <a class="header-anchor" href="#encname" aria-label="Permalink to &quot;encName&quot;">​</a></h5><p>设置敏感数据的链上加密方式得名称。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> encName</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="owner" tabindex="-1">owner <a class="header-anchor" href="#owner" aria-label="Permalink to &quot;owner&quot;">​</a></h5><p>设置提交上链交易的数据所有者数字身份标识，必须是owners中的一个数字身份标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span><span style="color:#A6ACCD;"> owner </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><ul><li>RoleItem</li></ul><p>数字身份标识对象信息。</p><ul><li><p>属性</p><ul><li>addr</li></ul></li></ul><p>数字身份标识。</p><pre><code>* encKey
</code></pre><p>对称加密的秘钥。</p><h5 id="owners" tabindex="-1">owners <a class="header-anchor" href="#owners" aria-label="Permalink to &quot;owners&quot;">​</a></h5><p>设置链上数据的所有者数字身份标识列表。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> owners </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">RoleItem</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> ownerIDs </span><span style="color:#89DDFF;">=</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">6ca423b9ab5eaab00a882a807652ab6</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">6ca423b9ab5eaab00a882a807652ab6</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataUpload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">owners </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ownerIDs</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h5 id="sharers" tabindex="-1">sharers <a class="header-anchor" href="#sharers" aria-label="Permalink to &quot;sharers&quot;">​</a></h5><p>设置要授予结构数据分享权限的数字身份标识列表。结构数据分享者有权添加数据读取者和删除自己添加的读取者数字身份标识。可以后续通过&quot;数据授权&quot;链上操作进行授权（DataAuthorise）。</p><p>如果dataID属性设置了已保存于链上的结构数据链上ID，此属性区块链做无效处理。即结构数据更新时，不会进行结构数据分享权限更新处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> sharers </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要授予结构数据分享权限的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> sharerIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">6ca423b9ab5eaab00a882a807652ab6</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">6ca423b9ab5eaab00a882a807652ab6</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataUpload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sharers </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> sahrerIDs</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h5 id="readers" tabindex="-1">readers <a class="header-anchor" href="#readers" aria-label="Permalink to &quot;readers&quot;">​</a></h5><p>设置要授予数据读取权限的数字身份标识列表。可以后续通过&quot;数据授权&quot;链上操作进行授权（DataAuthorise）。</p><p>如果dataID属性设置了已保存于链上的数据链上ID，此属性区块链做无效处理。即数据更新时，不会进行数据读取权限更新处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> readers </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要授予数据读取权限的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> readers</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">6ca423b9ab5eaab00a882a807652ab6</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">6ca423b9ab5eaab00a882a807652ab6</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataUpload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sharers </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> readers</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h5 id="eventcontext" tabindex="-1">eventContext <a class="header-anchor" href="#eventcontext" aria-label="Permalink to &quot;eventContext&quot;">​</a></h5><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> eventContext </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//上链保存的数据在链外应用系统数据库中的唯一标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataIDfromBizSystem </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">57bee7e51eb48b2896288021b7374cfc78c0bac8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataUpload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dataIDfromBizSystem</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h4 id="方法" tabindex="-1">方法 <a class="header-anchor" href="#方法" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="submit" tabindex="-1">submit <a class="header-anchor" href="#submit" aria-label="Permalink to &quot;submit&quot;">​</a></h5><p>向指定的前置节点服务器提交&quot;数据保存&quot;上链交易请求，开始进行数据保存链上操作。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submit</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>ownerPrivateKey String</p><p>设置要进行上链保存的数据所有者的数字身份私钥，ownerID对应的私钥。私钥用于对&quot;数据保存&quot;上链交易进行签名确权。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//--链上数据所有者数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//进行数据保存上链操作提交</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataUpload</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="createtxbody" tabindex="-1">createTxBody <a class="header-anchor" href="#createtxbody" aria-label="Permalink to &quot;createTxBody&quot;">​</a></h5><p>和前置节点进行交互，生成&quot;数据保存&quot;链上操作对应的上链交易体，以便使用ownerID对应的私钥对上链交易体进行确权签名。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>String</p><p>序列化的&quot;数据保存&quot;上链交易体。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//生成&quot;数据保存&quot;上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataUploadTxBody</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oDataUpload</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//用数据所有者数字身份对&quot;数据保存&quot;上链交易体进行签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--对&quot;数据保存&quot;上链交易体进行签名，并生成签名结果</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dataUploadTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="submittxbody" tabindex="-1">submitTxBody <a class="header-anchor" href="#submittxbody" aria-label="Permalink to &quot;submitTxBody&quot;">​</a></h5><p>使用数据保存上链交易体原文和ownerID中数字身份对上链交易体的签名结果信息，向指定的前置节点服务器提交&quot;数据保存&quot;上链交易请求。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataUploadTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>dataUploadTxBody String</p><p>数据保存上链交易体原文</p><p>txSign String</p><p>数据保存上链交易体签名结果信息</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//【程序A】准备数据保存上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">DataUpload</span><span style="color:#A6ACCD;"> oPrepareDataUploadTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataUpload</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareDataUploadTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">88021b73bac8b248b2896278c04a4378962e51eb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareDataUploadTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ownerID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> ownersList </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareDataUploadTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">owners </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ownersList</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareDataUploadTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataContent </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">{&#39;姓名&#39;: &#39;张三&#39;,&#39;性别&#39;: &#39;男&#39;}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareDataUploadTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataProperty </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">人员基本信息描述</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataUploadTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oPrepareDataUploadTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序B】在外部使用数字身份签名应用进行dataUploadTxBody签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dataUploadTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序A】提交数据保存上链交易，并跟踪链上处理状态</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">DataUpload</span><span style="color:#A6ACCD;"> oDataUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataUpload</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataUpload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">dataIDfromBizSystem</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataUpload</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dataUploadTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h4 id="事件" tabindex="-1">事件 <a class="header-anchor" href="#事件" aria-label="Permalink to &quot;事件&quot;">​</a></h4><h5 id="ontxblockconfirm" tabindex="-1">onTxBlockConfirm <a class="header-anchor" href="#ontxblockconfirm" aria-label="Permalink to &quot;onTxBlockConfirm&quot;">​</a></h5><p>此事件在结构数据上链保存成功，并获得落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dUploadStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dUploadStatus DataUploadStatus</p><p>包含&quot;数据保存&quot;链上操作的当前处理状态信息的对象。</p><p>dUploadStatus中将包含如下返回信息，详细解释请参看DataUploadStatus对象相关描述：</p><p>| status，errorCode，message，dataID，versionID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataUpload</span><span style="color:#A6ACCD;"> oDataUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataUpload</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dUploadStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：结构数据上链保存成功，并获得落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">DataTxBlockInfo</span><span style="color:#A6ACCD;"> oDataTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dUploadStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据当前版本ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">versionID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dataIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxblkcfmfailure" tabindex="-1">onTxBlkCfmFailure <a class="header-anchor" href="#ontxblkcfmfailure" aria-label="Permalink to &quot;onTxBlkCfmFailure&quot;">​</a></h5><p>此事件在结构数据保存上链交易落块确认失败，上链保存的结构数据被链回滚时发生。事件触发后，会返回错误信息。结构数据保存上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dUploadStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dUploadStatus DataUploadStatus</p><p>包含&quot;数据保存&quot;链上操作的当前处理状态信息的对象。</p><p>dUploadStatus中将包含如下返回信息，详细解释请参看DataUploadStatus对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataUpload</span><span style="color:#A6ACCD;"> oDataUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataUpload</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dUploadStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：结构数据保存上链交易落块确认失败，上链保存的结构数据被链回滚。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。结构数据保存上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">DataTxBlockInfo</span><span style="color:#A6ACCD;"> oDataTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dUploadStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">结构数据保存上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">结构数据保存上链交易落块确认失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dUploadStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dataIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendsuccess" tabindex="-1">onTxSendSuccess <a class="header-anchor" href="#ontxsendsuccess" aria-label="Permalink to &quot;onTxSendSuccess&quot;">​</a></h5><p>此事件在结构数据保存上链交易发送成功，等待区块链执行处理时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dUploadStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dUploadStatus DataUploadStatus</p><p>包含&quot;数据保存&quot;链上操作的当前处理状态信息的对象。</p><p>dUploadStatus中将包含如下返回信息，详细解释请参看DataUploadStatus对象相关描述：</p><p>| status，errorCode，message，txHash |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataUpload</span><span style="color:#A6ACCD;"> oDataUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataUpload</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dUploadStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：结构数据保存上链交易发送成功，等待区块链执行处理。 </span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">DataTxBlockInfo</span><span style="color:#A6ACCD;"> oDataTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dUploadStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">结构数据保存上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendfailure" tabindex="-1">onTxSendFailure <a class="header-anchor" href="#ontxsendfailure" aria-label="Permalink to &quot;onTxSendFailure&quot;">​</a></h5><p>此事件在结构数据保存上链交易发送失败时发生。数据保存上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dUploadStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dUploadStatus DataUploadStatus</p><p>包含&quot;数据保存&quot;链上操作的当前处理状态信息的对象。</p><p>dUploadStatus中将包含如下返回信息，详细解释请参看DataUploadStatus对象相关描述：</p><p>| errorCode，message |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataUpload</span><span style="color:#A6ACCD;"> oDataUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataUpload</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dUploadStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：结构数据保存上链交易发送失败。</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">结构数据保存上链交易发送失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dUploadStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecsuccess" tabindex="-1">onTxExecSuccess <a class="header-anchor" href="#ontxexecsuccess" aria-label="Permalink to &quot;onTxExecSuccess&quot;">​</a></h5><p>此事件在结构数据保存上链交易执行成功，结构数据上链保存成功，等待落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dUploadStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dUploadStatus DataUploadStatus</p><p>包含&quot;数据保存&quot;链上操作的当前处理状态信息的对象。</p><p>dUploadStatus中将包含如下返回信息，详细解释请参看DataUploadStatus对象相关描述：</p><p>| status，errorCode，message，dataID，versionID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataUpload</span><span style="color:#A6ACCD;"> oDataUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataUpload</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dUploadStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：结构数据保存上链交易执行成功，结构数据上链保存成功，等待落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">DataTxBlockInfo</span><span style="color:#A6ACCD;"> oDataTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dUploadStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dataIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据当前版本ID=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">versionID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">结构数据保存上链交易Hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易执行时间戳=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txExecTimestamp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块生成时间戳</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockedTimestamp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块高度=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHeight</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecfailure" tabindex="-1">onTxExecFailure <a class="header-anchor" href="#ontxexecfailure" aria-label="Permalink to &quot;onTxExecFailure&quot;">​</a></h5><p>此事件在结构数据保存上链交易执行失败，结构数据未上链保存时发生。事件触发后会返回错误信息。数据保存上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dUploadStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dUploadStatus DataUploadStatus</p><p>包含&quot;数据保存&quot;链上操作的当前处理状态信息的对象。</p><p>dUploadStatus中将包含如下返回信息，详细解释请参看DataUploadStatus对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataUpload</span><span style="color:#A6ACCD;"> oDataUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataUpload</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dUploadStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：结构数据保存上链交易执行失败，结构数据未上链保存。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">DataTxBlockInfo</span><span style="color:#A6ACCD;"> oDataTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dUploadStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> DataIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> DataIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">结构数据保存上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链上执行失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dUploadStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onerror" tabindex="-1">onError <a class="header-anchor" href="#onerror" aria-label="Permalink to &quot;onError&quot;">​</a></h5><p>此为事件在DataUpload调用出现异常时发生。事件触发后返回异常信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataUpload</span><span style="color:#A6ACCD;"> oDataUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataUpload</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：DataUpload调用出现异常。并返回异常信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> DataIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> DataIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常状态描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常信息=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="datatxstatus-status状态编码" tabindex="-1">DataTxStatus.status状态编码 <a class="header-anchor" href="#datatxstatus-status状态编码" aria-label="Permalink to &quot;DataTxStatus.status状态编码&quot;">​</a></h4><p>状态编码列表：</p><table><thead><tr><th>状态取值</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>TxSendSuccess</td><td>上链交易发送成功。</td><td>节点确认接收数据保存上链交易请求，等待区块链执行处理。</td></tr><tr><td>TxSendFailure</td><td>上链交易发送失败。</td><td>节点接收数据保存上链交易请求失败，数据保存上链交易请求需重新提交。</td></tr><tr><td>TxExecSuccess</td><td>上链交易执行成功。</td><td>数据保存上链交易执行成功，数据上链保存成功，等待落块确认。</td></tr><tr><td>TxExecFailure</td><td>上链交易执行失败。</td><td>数据保存上链交易执行失败，数据未上链保存。数据保存上链交易请求需重新提交。</td></tr><tr><td>TxBlockConfirm</td><td>上链交易落块确认。</td><td>数据上链保存成功，并获得落块确认。</td></tr><tr><td>TxBlkCfmFailure</td><td>上链交易落块确认失败。</td><td>因落块确认失败，上链保存的数据被链回滚。数据保存上链交易请求需重新提交。</td></tr></tbody></table><h3 id="datamodify" tabindex="-1">DataModify <a class="header-anchor" href="#datamodify" aria-label="Permalink to &quot;DataModify&quot;">​</a></h3><p>用于进行结构数据更新操作对象。</p><h4 id="构造函数-1" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数-1" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="datamodify-frontend-string" tabindex="-1">DataModify (Frontend, String) <a class="header-anchor" href="#datamodify-frontend-string" aria-label="Permalink to &quot;DataModify (Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataModify</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交上链交易前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">DataModify</span><span style="color:#A6ACCD;"> oDataModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataModify</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="datamodify-1" tabindex="-1">DataModify () <a class="header-anchor" href="#datamodify-1" aria-label="Permalink to &quot;DataModify ()&quot;">​</a></h5><p>构造一个DataModify对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataModify</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="属性-1" tabindex="-1">属性 <a class="header-anchor" href="#属性-1" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend-1" tabindex="-1">frontend <a class="header-anchor" href="#frontend-1" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain-1" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain-1" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要进行更新的数据所在链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="dataid" tabindex="-1">dataID <a class="header-anchor" href="#dataid" aria-label="Permalink to &quot;dataID&quot;">​</a></h5><p>设置要进行更新的链上数据的数据链上ID。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="datacontent-1" tabindex="-1">dataContent <a class="header-anchor" href="#datacontent-1" aria-label="Permalink to &quot;dataContent&quot;">​</a></h5><p>设置要进行更新的数据体。建议使用JSON或XML等格式构建，然后序列化成String的类型进行存储。dataContent的信息将被区块链加密保存。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataContent </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="dataproperty-1" tabindex="-1">dataProperty <a class="header-anchor" href="#dataproperty-1" aria-label="Permalink to &quot;dataProperty&quot;">​</a></h5><p>设置要进行更新的数据附属属性信息。附属属性建议使用JSON或XML等格式构建，然后序列化成String的类型进行存储。dataProperty的信息将被区块链加密保存。</p><p>如果想要对链上已保存的dataProperty进行清空处理，则此属性需设置NULL。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataProperty </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ownerid" tabindex="-1">ownerID <a class="header-anchor" href="#ownerid" aria-label="Permalink to &quot;ownerID&quot;">​</a></h5><p>设置提交上链交易的数据所有者数字身份标识，必须是owners中的一个数字身份标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="eventcontext-1" tabindex="-1">eventContext <a class="header-anchor" href="#eventcontext-1" aria-label="Permalink to &quot;eventContext&quot;">​</a></h5><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> eventContext </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//上链更新数据在链外应用系统数据库中的唯一标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataIDfromBizSystem </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">57bee7e51eb48b2896288021b7374cfc78c0bac8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataModify</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dataIDfromBizSystem</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h4 id="方法-1" tabindex="-1">方法 <a class="header-anchor" href="#方法-1" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="submit-1" tabindex="-1">submit <a class="header-anchor" href="#submit-1" aria-label="Permalink to &quot;submit&quot;">​</a></h5><p>向指定的前置节点服务器提交数据更新上链交易请求，开始进行数据更新上链操作。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submit</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>ownerPrivateKey String</p><p>设置进行数据更新的所有者的数字身份私钥，ownerID对应的私钥。私钥用于对数据更新上链交易进行签名确权。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//--链上数据所有者数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//进行数据更新上链操作提交</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataModify</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="createtxbody-1" tabindex="-1">createTxBody <a class="header-anchor" href="#createtxbody-1" aria-label="Permalink to &quot;createTxBody&quot;">​</a></h5><p>和前置节点进行交互，生成数据更新链上操作对应的上链交易体，以便使用ownerID对应的私钥对上链交易体进行确权签名。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>String</p><p>序列化的数据更新上链交易体。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//生成数据更新上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataModifyTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oDataModify</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//用数据所有者数字身份对数据更新上链交易体进行签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--对数据更新上链交易体进行签名，并生成签名结果</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dataModifyTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="submittxbody-1" tabindex="-1">submitTxBody <a class="header-anchor" href="#submittxbody-1" aria-label="Permalink to &quot;submitTxBody&quot;">​</a></h5><p>使用数据更新上链交易体原文和ownerID中数字身份对上链交易体的签名结果信息，向指定的前置节点服务器提交数据更新上链交易请求。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataModifyTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>dataModifyTxBody String</p><p>数据更新上链交易体原文</p><p>txSign String</p><p>数据更新上链交易体签名结果信息</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//【程序A】准备数据更新上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">DataModify</span><span style="color:#A6ACCD;"> oPrepareDataModifyTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataModify</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareDataModifyTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">88021b73bac8b248b2896278c04a4378962e51eb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareDataModifyTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ownerID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareDataModifyTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataContent </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">{&#39;姓名&#39;: &#39;张三&#39;,&#39;性别&#39;: &#39;男&#39;}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareDataModifyTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataProperty </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">人员基本信息描述</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataModifyTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oPrepareDataModifyTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序B】在外部使用数字身份签名应用进行dataModifyTxBody签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dataModifyTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序A】提交数据更新上链交易，并跟踪链上处理状态</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">DataModify</span><span style="color:#A6ACCD;"> oDataModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataModify</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataModify</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">dataIDfromBizSystem</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataModify</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dataModifyTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h4 id="事件-1" tabindex="-1">事件 <a class="header-anchor" href="#事件-1" aria-label="Permalink to &quot;事件&quot;">​</a></h4><h5 id="ontxblockconfirm-1" tabindex="-1">onTxBlockConfirm <a class="header-anchor" href="#ontxblockconfirm-1" aria-label="Permalink to &quot;onTxBlockConfirm&quot;">​</a></h5><p>此事件在结构数据上链保存成功，并获得落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dModifyStatus DataModifyStatus</p><p>包含数据更新操作的当前处理状态信息的对象。</p><p>dModifyStatus中将包含如下返回信息，详细解释请参看DataModifyStatus对象相关描述：</p><p>| status，errorCode，message，dataID，versionID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataModify</span><span style="color:#A6ACCD;"> oDataModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataModify</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：结构数据上链保存成功，并获得落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">DataTxBlockInfo</span><span style="color:#A6ACCD;"> oDataTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据当前版本ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">versionID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dataIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxblkcfmfailure-1" tabindex="-1">onTxBlkCfmFailure <a class="header-anchor" href="#ontxblkcfmfailure-1" aria-label="Permalink to &quot;onTxBlkCfmFailure&quot;">​</a></h5><p>此事件在结构数据更新上链交易落块确认失败，上链保存的结构数据被链回滚时发生。事件触发后，会返回错误信息。结构数据更新上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dModifyStatus DataModifyStatus</p><p>包含数据更新操作的当前处理状态信息的对象。</p><p>dModifyStatus中将包含如下返回信息，详细解释请参看DataModifyStatus对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataModify</span><span style="color:#A6ACCD;"> oDataModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataModify</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：结构数据更新上链交易落块确认失败，上链保存的结构数据被链回滚。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。结构数据更新上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">DataTxBlockInfo</span><span style="color:#A6ACCD;"> oDataTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">结构数据更新上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">结构数据更新上链交易落块确认失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dataIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendsuccess-1" tabindex="-1">onTxSendSuccess <a class="header-anchor" href="#ontxsendsuccess-1" aria-label="Permalink to &quot;onTxSendSuccess&quot;">​</a></h5><p>此事件在结构数据更新上链交易发送成功，等待区块链执行处理时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dModifyStatus DataModifyStatus</p><p>包含数据更新操作的当前处理状态信息的对象。</p><p>dModifyStatus中将包含如下返回信息，详细解释请参看DataModifyStatus对象相关描述：</p><p>| status，errorCode，message，txHash |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataModify</span><span style="color:#A6ACCD;"> oDataModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataModify</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：结构数据更新上链交易发送成功，等待区块链执行处理。 </span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">DataTxBlockInfo</span><span style="color:#A6ACCD;"> oDataTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">结构数据更新上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendfailure-1" tabindex="-1">onTxSendFailure <a class="header-anchor" href="#ontxsendfailure-1" aria-label="Permalink to &quot;onTxSendFailure&quot;">​</a></h5><p>此事件在结构数据更新上链交易发送失败时发生。数据更新上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dModifyStatus DataModifyStatus</p><p>包含数据更新操作的当前处理状态信息的对象。</p><p>dModifyStatus中将包含如下返回信息，详细解释请参看DataModifyStatus对象相关描述：</p><p>| errorCode，message |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataModify</span><span style="color:#A6ACCD;"> oDataModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataModify</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：结构数据更新上链交易发送失败。</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">结构数据更新上链交易发送失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecsuccess-1" tabindex="-1">onTxExecSuccess <a class="header-anchor" href="#ontxexecsuccess-1" aria-label="Permalink to &quot;onTxExecSuccess&quot;">​</a></h5><p>此事件在结构数据更新上链交易执行成功，结构数据上链保存成功，等待落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dModifyStatus DataModifyStatus</p><p>包含数据更新操作的当前处理状态信息的对象。</p><p>dModifyStatus中将包含如下返回信息，详细解释请参看DataModifyStatus对象相关描述：</p><p>| status，errorCode，message，dataID，versionID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataModify</span><span style="color:#A6ACCD;"> oDataModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataModify</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：结构数据更新上链交易执行成功，结构数据上链保存成功，等待落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">DataTxBlockInfo</span><span style="color:#A6ACCD;"> oDataTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dataIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据当前版本ID=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">versionID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">结构数据更新上链交易Hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易执行时间戳=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txExecTimestamp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块生成时间戳</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockedTimestamp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块高度=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHeight</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecfailure-1" tabindex="-1">onTxExecFailure <a class="header-anchor" href="#ontxexecfailure-1" aria-label="Permalink to &quot;onTxExecFailure&quot;">​</a></h5><p>此事件在结构数据更新上链交易执行失败，结构数据未上链保存时发生。事件触发后会返回错误信息。数据更新上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dModifyStatus DataModifyStatus</p><p>包含数据更新操作的当前处理状态信息的对象。</p><p>dModifyStatus中将包含如下返回信息，详细解释请参看DataModifyStatus对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataModify</span><span style="color:#A6ACCD;"> oDataModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataModify</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：结构数据更新上链交易执行失败，结构数据未上链保存。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">DataTxBlockInfo</span><span style="color:#A6ACCD;"> oDataTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> DataIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> DataIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">结构数据更新上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链上执行失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onerror-1" tabindex="-1">onError <a class="header-anchor" href="#onerror-1" aria-label="Permalink to &quot;onError&quot;">​</a></h5><p>此为事件在DataModify调用出现异常时发生。事件触发后返回异常信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataModify</span><span style="color:#A6ACCD;"> oDataModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataModify</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：DataModify调用出现异常。并返回异常信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> DataIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> DataIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常状态描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常信息=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="datatxstatus-status状态编码-1" tabindex="-1">DataTxStatus.status状态编码 <a class="header-anchor" href="#datatxstatus-status状态编码-1" aria-label="Permalink to &quot;DataTxStatus.status状态编码&quot;">​</a></h4><p>状态编码列表：</p><table><thead><tr><th>状态取值</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>TxSendSuccess</td><td>上链交易发送成功。</td><td>节点确认接收数据更新上链交易请求，等待区块链执行处理。</td></tr><tr><td>TxSendFailure</td><td>上链交易发送失败。</td><td>节点接收数据更新上链交易请求失败，数据更新上链交易请求需重新提交。</td></tr><tr><td>TxExecSuccess</td><td>上链交易执行成功。</td><td>数据更新上链交易执行成功，数据上链保存成功，等待落块确认。</td></tr><tr><td>TxExecFailure</td><td>上链交易执行失败。</td><td>数据更新上链交易执行失败，数据未上链保存。数据更新上链交易请求需重新提交。</td></tr><tr><td>TxBlockConfirm</td><td>上链交易落块确认。</td><td>数据上链保存成功，并获得落块确认。</td></tr><tr><td>TxBlkCfmFailure</td><td>上链交易落块确认失败。</td><td>因落块确认失败，上链保存的数据被链回滚。数据更新上链交易请求需重新提交。</td></tr></tbody></table><h3 id="dataauthorise" tabindex="-1">DataAuthorise <a class="header-anchor" href="#dataauthorise" aria-label="Permalink to &quot;DataAuthorise&quot;">​</a></h3><p>用于进行结构数据授权的操作对象。</p><h4 id="构造函数-2" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数-2" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="dataauthorise-frontend-string" tabindex="-1">DataAuthorise (Frontend, String) <a class="header-anchor" href="#dataauthorise-frontend-string" aria-label="Permalink to &quot;DataAuthorise (Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataAuthorise</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交上链交易前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">DataAuthorise</span><span style="color:#A6ACCD;"> oDataAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataAuthorise</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="dataauthorise-1" tabindex="-1">DataAuthorise () <a class="header-anchor" href="#dataauthorise-1" aria-label="Permalink to &quot;DataAuthorise ()&quot;">​</a></h5><p>构造一个DataAuthorise对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataAuthorise</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="属性-2" tabindex="-1">属性 <a class="header-anchor" href="#属性-2" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend-2" tabindex="-1">frontend <a class="header-anchor" href="#frontend-2" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain-2" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain-2" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要进行数据授权的数据所在链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="dataid-1" tabindex="-1">dataID <a class="header-anchor" href="#dataid-1" aria-label="Permalink to &quot;dataID&quot;">​</a></h5><p>设置要进行数据授权的链上数据的数据链上ID。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="grantorid" tabindex="-1">grantorID <a class="header-anchor" href="#grantorid" aria-label="Permalink to &quot;grantorID&quot;">​</a></h5><p>设置提交上链交易的授权者数字身份标识，必须是owners或sharers中的一个数字身份标识。</p><ul><li>数据所有者可以授权分享者列表和读取者列表。</li><li>数据分享者可以授权读取者列表。</li></ul><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> grantorID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="eventcontext-2" tabindex="-1">eventContext <a class="header-anchor" href="#eventcontext-2" aria-label="Permalink to &quot;eventContext&quot;">​</a></h5><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> eventContext </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//要授予数据授权的数据在链外应用系统数据库中的唯一标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataIDfromBizSystem </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">57bee7e51eb48b2896288021b7374cfc78c0bac8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">dataIDfromBizSystem</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h4 id="方法-2" tabindex="-1">方法 <a class="header-anchor" href="#方法-2" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="addreaders" tabindex="-1">addReaders <a class="header-anchor" href="#addreaders" aria-label="Permalink to &quot;addReaders&quot;">​</a></h5><p>设置要授予数据读取权限的数字身份标识列表。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">addReaders</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> readers </span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>readers RoleItem []</p><p>要授予数据读取权限的数字身份标识。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要授予数据读取权限的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> readerIDs </span><span style="color:#89DDFF;">=</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">6ca423b9ab5eaab00a882a807652ab6</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">6ca423b9ab5eaab00a882a807652ab6</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addReaders</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">readerIDs</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="addsharers" tabindex="-1">addSharers <a class="header-anchor" href="#addsharers" aria-label="Permalink to &quot;addSharers&quot;">​</a></h5><p>设置要授予数据分享权限的数字身份标识列表。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">addSharers</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> Sharers </span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>Sharers RoleItem []</p><p>要授予数据分享权限的数字身份标识。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要授予数据分享权限的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> sharerIDs </span><span style="color:#89DDFF;">=</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">6ca423b9ab5eaab00a882a807652ab6</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">6ca423b9ab5eaab00a882a807652ab6</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addSharers</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">sharerIDs</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="addowners" tabindex="-1">addOwners <a class="header-anchor" href="#addowners" aria-label="Permalink to &quot;addOwners&quot;">​</a></h5><p>设置要授予数据所有者权限的数字身份标识列表。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">addOwners</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">RoleItem</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> Owners</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>Owners RoleItem []</p><p>要授予数据所有者权限的数字身份标识。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要授予数据所有者权限的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> ownerIDs </span><span style="color:#89DDFF;">=</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">6ca423b9ab5eaab00a882a807652ab6</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">6ca423b9ab5eaab00a882a807652ab6</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addOwners</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ownerIDs</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="removereaders" tabindex="-1">removeReaders <a class="header-anchor" href="#removereaders" aria-label="Permalink to &quot;removeReaders&quot;">​</a></h5><p>设置要删除数据读取权限的数字身份标识列表。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">removeReaders</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">RoleItem</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> Readers</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要删除数据读取权限的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> readerIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8962857bee7b48b28021b7374cfc78c0bac8e51e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">374cfc78c0ba57bee78b2896288021b7c8 e51eb4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeReaders</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">readerIDs</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="removesharers" tabindex="-1">removeSharers <a class="header-anchor" href="#removesharers" aria-label="Permalink to &quot;removeSharers&quot;">​</a></h5><p>设置要删除数据分享权限的数字身份标识列表。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> removeSharers </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> Sharers </span><span style="color:#89DDFF;">};</span></span></code></pre></div><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要删除数据分享权限的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> sharerIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8962857bee7b48b28021b7374cfc78c0bac8e51e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">374cfc78c0ba57bee78b2896288021b7c8 e51eb4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeSharers</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">sharerIDs</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="removeowners" tabindex="-1">removeOwners <a class="header-anchor" href="#removeowners" aria-label="Permalink to &quot;removeOwners&quot;">​</a></h5><p>设置要删除数据所有者权限的数字身份标识列表。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">removeOwners</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> Owners</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要删除数据所有者的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> ownerIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8962857bee7b48b28021b7374cfc78c0bac8e51e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">374cfc78c0ba57bee78b2896288021b7c8 e51eb4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeOwners</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ownerIDs</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="submit-2" tabindex="-1">submit <a class="header-anchor" href="#submit-2" aria-label="Permalink to &quot;submit&quot;">​</a></h5><p>向指定的前置节点服务器提交&quot;数据授权&quot;上链交易请求。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> senderPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>grantorPrivateKey String</p><p>提交上链交易的授权者数字身份私钥，grantorID对应的私钥。私钥用于对&quot;数据授权&quot;上链交易进行签名确权。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//--提交上链交易的授权者数字身份私钥（即Owners或Sharers中的一个数字身份标识）</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> grantorPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//进行数据授权上链操作提交</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">grantorPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="createtxbody-2" tabindex="-1">createTxBody <a class="header-anchor" href="#createtxbody-2" aria-label="Permalink to &quot;createTxBody&quot;">​</a></h5><p>和前置节点进行交互，生成&quot;数据授权&quot;链上操作对应的上链交易体，以便使用grantorID对应的私钥对上链交易体进行确权签名。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>String</p><p>序列化的&quot;数据授权&quot;上链交易体。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//生成&quot;数据授权&quot;上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataAuthoriseTxBody</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oDataAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//使用提交上链交易的授权者数字身份对&quot;数据授权&quot;上链交易体进行签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> grantorPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--对&quot;数据授权&quot;上链交易体进行签名，并生成签名结果</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dataAuthoriseTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> grantorPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="submittxbody-2" tabindex="-1">submitTxBody <a class="header-anchor" href="#submittxbody-2" aria-label="Permalink to &quot;submitTxBody&quot;">​</a></h5><p>使用数据授权上链交易体原文和grantorID中数字身份对上链交易体的签名结果信息，向指定的前置节点服务器提交&quot;数据授权&quot;上链交易请求。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataAuthoriseTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>dataAuthoriseTxBody String</p><p>数据授权上链交易体原文</p><p>txSign String</p><p>数据授权上链交易体签名结果信息</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//【程序A】准备数据授权上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">DataAuthorise</span><span style="color:#A6ACCD;"> oPrepareDataAuthTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataAuthorise</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareDataAuthTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">88021b73bac8b248b2896278c04a4378962e51eb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareDataAuthTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">grantorID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> readerIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">6ca423b9ab5eaab00a882a807652ab6</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RoleItem</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">6ca423b9ab5eaab00a882a807652ab6</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareDataAuthTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">addReaders </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> readerIDs</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataAuthoriseTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oPrepareDataAuthTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序B】在外部使用数字身份签名应用进行dataAuthoriseTxBody签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> grantorPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dataAuthoriseTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> grantorPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序A】提交数据授权上链交易，并跟踪链上处理状态</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">DataAuthorise</span><span style="color:#A6ACCD;"> oDataAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataAuthorise</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">dataIDfromBizSystem</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dataAuthoriseTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h4 id="事件-2" tabindex="-1">事件 <a class="header-anchor" href="#事件-2" aria-label="Permalink to &quot;事件&quot;">​</a></h4><h5 id="ontxblockconfirm-2" tabindex="-1">onTxBlockConfirm <a class="header-anchor" href="#ontxblockconfirm-2" aria-label="Permalink to &quot;onTxBlockConfirm&quot;">​</a></h5><p>此事件在数据授权上链交易执行成功，并获得落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dAuthStatus DataAuthoriseStatus</p><p>包含&quot;数据授权&quot;链上操作的当前处理状态信息的对象。</p><p>dAuthStatus中将包含如下返回信息，详细解释请参看DataAuthoriseStatus对象相关描述：</p><p>| status，errorCode，message，dataID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataAuthorise</span><span style="color:#A6ACCD;"> oDataAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataAuthorise</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：数据授权上链交易执行成功，并获得落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">DataTxBlockInfo</span><span style="color:#A6ACCD;"> oDataTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxblkcfmfailure-2" tabindex="-1">onTxBlkCfmFailure <a class="header-anchor" href="#ontxblkcfmfailure-2" aria-label="Permalink to &quot;onTxBlkCfmFailure&quot;">​</a></h5><p>此事件在数据授权上链交易执行失败，上链保存的数据授权被链回滚。事件触发后，会返回错误信息。数据授权上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dAuthStatus DataAuthoriseStatus</p><p>包含&quot;数据授权&quot;链上操作的当前处理状态信息的对象。</p><p>dAuthStatus中将包含如下返回信息，详细解释请参看DataAuthoriseStatus对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataAuthorise</span><span style="color:#A6ACCD;"> oDataAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataAuthorise</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：数据授权上链交易执行失败，上链保存的数据授权被链回滚。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。数据授权上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">DataTxBlockInfo</span><span style="color:#A6ACCD;"> oDataTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据授权上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据授权上链交易执行失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendsuccess-2" tabindex="-1">onTxSendSuccess <a class="header-anchor" href="#ontxsendsuccess-2" aria-label="Permalink to &quot;onTxSendSuccess&quot;">​</a></h5><p>此事件在数据授权上链交易发送成功，等待区块链执行处理时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dAuthStatus DataAuthoriseStatus</p><p>包含&quot;数据授权&quot;链上操作的当前处理状态信息的对象。</p><p>dAuthStatus中将包含如下返回信息，详细解释请参看DataAuthoriseStatus对象相关描述：</p><p>| status，errorCode，message，txHash |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataAuthorise</span><span style="color:#A6ACCD;"> oDataAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataAuthorise</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：数据授权上链交易发送成功，等待区块链执行处理。 </span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">DataTxBlockInfo</span><span style="color:#A6ACCD;"> oDataTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据授权上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendfailure-2" tabindex="-1">onTxSendFailure <a class="header-anchor" href="#ontxsendfailure-2" aria-label="Permalink to &quot;onTxSendFailure&quot;">​</a></h5><p>此事件在数据授权上链交易发送失败时发生。数据授权上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dAuthStatus DataAuthoriseStatus</p><p>包含&quot;数据授权&quot;链上操作的当前处理状态信息的对象。</p><p>dAuthStatus中将包含如下返回信息，详细解释请参看DataAuthoriseStatus对象相关描述：</p><p>| errorCode，message |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataAuthorise</span><span style="color:#A6ACCD;"> oDataAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataAuthorise</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：数据授权上链交易发送失败。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据授权上链交易发送失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecsuccess-2" tabindex="-1">onTxExecSuccess <a class="header-anchor" href="#ontxexecsuccess-2" aria-label="Permalink to &quot;onTxExecSuccess&quot;">​</a></h5><p>此事件在数据授权上链交易执行成功，等待落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dAuthStatus DataAuthoriseStatus</p><p>包含&quot;数据授权&quot;链上操作的当前处理状态信息的对象。</p><p>dAuthStatus中将包含如下返回信息，详细解释请参看DataAuthoriseStatus对象相关描述：</p><p>| status，errorCode，message，dataID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataAuthorise</span><span style="color:#A6ACCD;"> oDataAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataAuthorise</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：数据授权上链交易执行成功，等待落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">DataTxBlockInfo</span><span style="color:#A6ACCD;"> oDataTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据授权上链交易Hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易执行时间戳=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txExecTimestamp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块生成时间戳</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockedTimestamp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块高度=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHeight</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecfailure-2" tabindex="-1">onTxExecFailure <a class="header-anchor" href="#ontxexecfailure-2" aria-label="Permalink to &quot;onTxExecFailure&quot;">​</a></h5><p>此事件在数据授权上链交易执行失败，对指定数字身份的相应权限授权未在链上生效时发生。事件触发后会返回错误信息。数据授权上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> dAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dAuthStatus DataAuthoriseStatus</p><p>包含&quot;数据授权&quot;链上操作的当前处理状态信息的对象。</p><p>dAuthStatus中将包含如下返回信息，详细解释请参看DataAuthoriseStatus对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataAuthorise</span><span style="color:#A6ACCD;"> oDataAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataAuthorise</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：数据授权上链交易执行失败，对指定数字身份的相应权限授权未在链上生效。 </span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。数据授权上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">DataTxBlockInfo</span><span style="color:#A6ACCD;"> oDataTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据授权上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oDataTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链上执行失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onerror-2" tabindex="-1">onError <a class="header-anchor" href="#onerror-2" aria-label="Permalink to &quot;onError&quot;">​</a></h5><p>此为事件在DataAuthorise调用出现异常时发生。事件触发后返回异常信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataAuthorise</span><span style="color:#A6ACCD;"> oDataAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataAuthorise</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：DataAuthorise调用出现异常。并返回异常信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常状态描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常信息=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="datatxstatus-status状态编码-2" tabindex="-1">DataTxStatus.status状态编码 <a class="header-anchor" href="#datatxstatus-status状态编码-2" aria-label="Permalink to &quot;DataTxStatus.status状态编码&quot;">​</a></h4><p>状态编码列表：</p><table><thead><tr><th>状态取值</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>TxSendSuccess</td><td>上链交易发送成功。</td><td>节点确认接收数据授权上链交易请求，等待区块链执行处理。</td></tr><tr><td>TxSendFailure</td><td>上链交易发送失败。</td><td>节点接收数据授权上链交易请求失败，数据授权上链交易请求需重新提交。</td></tr><tr><td>TxExecSuccess</td><td>上链交易执行成功。</td><td>数据授权上链交易执行成功，数据读取/所有者权限的数字身份标识列表上链更新成功，等待落块确认。</td></tr><tr><td>TxExecFailure</td><td>上链交易执行失败。</td><td></td></tr><tr><td>数据授权上链交易执行失败，数据读取/所有者权限的数字身份标识列表未上链更新。数据授权上链交易请求需重新提交。</td><td></td><td></td></tr><tr><td>TxBlockConfirm</td><td>上链交易落块确认。</td><td>数据授权上链更新成功，并获得落块确认。</td></tr><tr><td>TxBlkCfmFailure</td><td>上链交易落块确认失败。</td><td></td></tr><tr><td>因落块确认失败，上链更新的数据读取/所有者权限的数字身份标识列表被链回滚。数据授权上链交易请求需重新提交。</td><td></td><td></td></tr></tbody></table><h3 id="datafetch" tabindex="-1">DataFetch <a class="header-anchor" href="#datafetch" aria-label="Permalink to &quot;DataFetch&quot;">​</a></h3><p>用于进行链上结构数据获取的操作对象。</p><h4 id="构造函数-3" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数-3" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="datafetch-frontend-string" tabindex="-1">DataFetch (Frontend, String) <a class="header-anchor" href="#datafetch-frontend-string" aria-label="Permalink to &quot;DataFetch (Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataFetch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交链上获取请求前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">DataFetch</span><span style="color:#A6ACCD;"> oDataFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataFetch</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="datafetch-1" tabindex="-1">DataFetch () <a class="header-anchor" href="#datafetch-1" aria-label="Permalink to &quot;DataFetch ()&quot;">​</a></h5><p>构造一个DataFetch对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataFetch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="属性-3" tabindex="-1">属性 <a class="header-anchor" href="#属性-3" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend-3" tabindex="-1">frontend <a class="header-anchor" href="#frontend-3" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain-3" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain-3" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要进行数据获取的数据所在链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="dataid-2" tabindex="-1">dataID <a class="header-anchor" href="#dataid-2" aria-label="Permalink to &quot;dataID&quot;">​</a></h5><p>设置要进行数据获取的链上数据的数据链上ID。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="versionid" tabindex="-1">versionID <a class="header-anchor" href="#versionid" aria-label="Permalink to &quot;versionID&quot;">​</a></h5><p>设置要获取的链上数据指定版本的数据的数据版本ID。如果此属性不赋值，则默认返回最新版本（即当前版本）的数据信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> versionID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fetcherid" tabindex="-1">fetcherID <a class="header-anchor" href="#fetcherid" aria-label="Permalink to &quot;fetcherID&quot;">​</a></h5><p>设置要进行数据获取的获取者数字身份标识。数据获取者必须拥有数据读取权限，owners、sharers、readers中的一个数字身份标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="eventcontext-3" tabindex="-1">eventContext <a class="header-anchor" href="#eventcontext-3" aria-label="Permalink to &quot;eventContext&quot;">​</a></h5><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> eventContext </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//要获取的链上数据在链外应用系统数据库中的唯一标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">57bee7e51eb48b2896288021b7374cfc78c0bac8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataFetch</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">dataIDFromCaller</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h4 id="方法-3" tabindex="-1">方法 <a class="header-anchor" href="#方法-3" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="query" tabindex="-1">query <a class="header-anchor" href="#query" aria-label="Permalink to &quot;query&quot;">​</a></h5><p>向指定的前置节点服务器提交&quot;数据获取&quot;链上获取请求。调用此方法，将会通过onSuccess 和onFailure事件返回查询结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">query</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fetcherPrivateKey String</p><p>设置要进行数据获取的获取者数字身份私钥，fetcherID对应私钥。私钥用于对&quot;数据获取&quot;链上获取请求进行签名确权。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//--获取者数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">DataFetch</span><span style="color:#A6ACCD;"> oDataFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataFetchStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">//事件触发条件：仅在采用异步查询方法时才会被触发</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//进行&quot;数据获取&quot;链上操作提交</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">query</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="createrqbody" tabindex="-1">createRqBody <a class="header-anchor" href="#createrqbody" aria-label="Permalink to &quot;createRqBody&quot;">​</a></h5><p>和前置节点进行交互，生成&quot;数据获取&quot;链上操作对应的链上获取请求体，以便使用fetcherID对应的私钥对链上获取请求体进行确权签名。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createRqBody</span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>String</p><p>序列化的&quot;数据获取&quot;链上获取请求体。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//生成&quot;数据获取&quot;链上获取请求体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dFetchRqBody</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oDataFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRqBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//用获取者数字身份对&quot;数据获取&quot;链上获取请求体进行签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--对&quot;数据获取&quot;链上获取请求体进行签名，并生成签名结果</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="queryrqbody" tabindex="-1">queryRqBody <a class="header-anchor" href="#queryrqbody" aria-label="Permalink to &quot;queryRqBody&quot;">​</a></h5><p>使用数据获取链上获取请求体原文和fetcherID中数字身份对获取请求体的签名结果信息，向指定的前置节点服务器提交&quot;数据获取&quot;链上获取请求。调用此方法，将会通过onSuccess 和onFailure事件返回查询结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">queryRqBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>dFetchRqBody String</p><p>数据获取链上获取请求体原文</p><p>txSign String</p><p>数据获取链上获取请求体签名结果信息</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//【程序A】准备&quot;数据获取&quot;链上获取请求体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">DataFetch</span><span style="color:#A6ACCD;"> oPrepareDFetchRqBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataFetch</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareDFetchRqBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">88021b73bac8b248b2896278c04a4378962e51eb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareDFetchRqBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fetcherID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dFetchRqBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oPrepareDFetchRqBody</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRqBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序B】在外部使用数字身份签名应用进行dFetchRqBody签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序A】提交&quot;数据获取&quot;链上获取请求，并跟踪链上处理状态</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">DataFetch</span><span style="color:#A6ACCD;"> oDataFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataFetch</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataFetch</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">dataIDFromCaller</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oDataFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queryRqBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h4 id="事件-3" tabindex="-1">事件 <a class="header-anchor" href="#事件-3" aria-label="Permalink to &quot;事件&quot;">​</a></h4><h5 id="onsuccess" tabindex="-1">onSuccess <a class="header-anchor" href="#onsuccess" aria-label="Permalink to &quot;onSuccess&quot;">​</a></h5><p>此事件在&quot;数据获取&quot;链上操作处理彻底完成，数据已成功下载时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataFetchStatus</span><span style="color:#A6ACCD;"> dFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dFetchStatus DataFetchStatus</p><p>包含&quot;数据获取&quot;链上操作的当前处理状态信息的对象。</p><p>dFetchStatus中将包含如下返回信息，详细解释请参看DataFetchStatus对象相关描述：</p><p>| status，errorCode，message，data |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataFetch</span><span style="color:#A6ACCD;"> oDataFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataFetchStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">//事件触发条件：在&quot;数据获取&quot;链上操作处理彻底完成，数据已成功下载。</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dataIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#C792EA;">StructData</span><span style="color:#A6ACCD;"> oStructData </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dFetchStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oStructData</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据版本ID=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oStructData</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">versionID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据体=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oStructData</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataContent</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">数据附属属性=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oStructData</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataProperty</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onfailure" tabindex="-1">onFailure <a class="header-anchor" href="#onfailure" aria-label="Permalink to &quot;onFailure&quot;">​</a></h5><p>此事件在&quot;数据获取&quot;链上操作处理失败，数据未被下载时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataFetchStatus</span><span style="color:#A6ACCD;"> dFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>dFetchStatus DataFetchStatus</p><p>包含&quot;数据获取&quot;链上操作的当前处理状态信息的对象。</p><p>dFetchStatus中将包含如下返回信息，详细解释请参看DataFetchStatus对象相关描述：</p><p>| errorCode，message |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataFetch</span><span style="color:#A6ACCD;"> oDataFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onFailure</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">DataFetchStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">dFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">//事件触发条件：在&quot;数据获取&quot;链上操作处理失败，数据未被下载。</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dataIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">查询失败=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dFetchStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onerror-3" tabindex="-1">onError <a class="header-anchor" href="#onerror-3" aria-label="Permalink to &quot;onError&quot;">​</a></h5><p>此为事件在DataFetch调用出现异常时发生。事件触发后返回异常信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FetchException</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">DataFetch</span><span style="color:#A6ACCD;"> oDataFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FetchException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：DataFetch调用出现异常。并返回异常信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> dataIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dataIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常状态描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常信息=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div>`,594),t=[p];function e(c,r,D,y,A,C){return a(),n("div",null,t)}const d=s(o,[["render",e]]);export{i as __pageData,d as default};
