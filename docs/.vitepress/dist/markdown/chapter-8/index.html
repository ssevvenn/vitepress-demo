<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CoolawChain Java SDK参考 | 从法链</title>
    <meta name="description" content="Front end project and tips sharing">
    <link rel="preload stylesheet" href="/vitepress-demo/assets/style.88437184.css" as="style">
    <script type="module" src="/vitepress-demo/assets/app.c048a0be.js"></script>
    <link rel="preload" href="/vitepress-demo/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/vitepress-demo/assets/chunks/framework.66cc414a.js">
  <link rel="modulepreload" href="/vitepress-demo/assets/chunks/theme.0189fa36.js">
  <link rel="modulepreload" href="/vitepress-demo/assets/markdown_chapter-8_index.md.f746d7e0.lean.js">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-b2cf3e0b><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8616af1></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8616af1> Skip to content </a><!--]--><!----><header class="VPNav" data-v-b2cf3e0b data-v-7e5bc4a5><div class="VPNavBar has-sidebar" data-v-7e5bc4a5 data-v-7c10cd25><div class="container" data-v-7c10cd25><div class="title" data-v-7c10cd25><div class="VPNavBarTitle has-sidebar" data-v-7c10cd25 data-v-4d981103><a class="title" href="/vitepress-demo/" data-v-4d981103><!--[--><!--]--><!--[--><img class="VPImage logo" src="/vitepress-demo/logo.png" alt data-v-6db2186b><!--]--><!--[-->从法链<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-7c10cd25><div class="curtain" data-v-7c10cd25></div><div class="content-body" data-v-7c10cd25><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-7c10cd25><!----></div><!----><!----><div class="VPNavBarAppearance appearance" data-v-7c10cd25 data-v-f6a63727><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-f6a63727 data-v-87de0873 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-87de0873><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-87de0873><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-7c10cd25 data-v-40855f84 data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-764effdf><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-764effdf><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-87de0873 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-87de0873><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-87de0873><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-7c10cd25 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-b2cf3e0b data-v-392e1bf8><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-392e1bf8><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-392e1bf8><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-392e1bf8>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-392e1bf8 data-v-079b16a8><button data-v-079b16a8>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-b2cf3e0b data-v-af16598e><div class="curtain" data-v-af16598e></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-af16598e><span class="visually-hidden" id="sidebar-aria-label" data-v-af16598e> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-af16598e><div class="VPSidebarItem level-0 is-link" data-v-af16598e data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-1/#从法链概述" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>从法链概述</p><!--]--><!----></a><!----></div><!----></div></div><div class="group" data-v-af16598e><div class="VPSidebarItem level-0 is-link" data-v-af16598e data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-2/#名词解释" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>名词解释</p><!--]--><!----></a><!----></div><!----></div></div><div class="group" data-v-af16598e><div class="VPSidebarItem level-0 is-link" data-v-af16598e data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-3/#调用环境" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>调用环境</p><!--]--><!----></a><!----></div><!----></div></div><div class="group" data-v-af16598e><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-af16598e data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-4/#快速入门教程" data-v-c4656e6d data-v-8f4dc553><!--[--><h2 class="text" data-v-c4656e6d>快速入门教程</h2><!--]--><!----></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c4656e6d><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-c4656e6d><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-4/#文件上链保存" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>4.1 文件上链保存</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-4/#结构数据上链保存" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>4.2 结构数据上链保存</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-af16598e><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-af16598e data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-5/#链上操作调用基本步骤" data-v-c4656e6d data-v-8f4dc553><!--[--><h2 class="text" data-v-c4656e6d>链上操作调用基本步骤</h2><!--]--><!----></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c4656e6d><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-c4656e6d><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-5/#上链交易提交" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>5.1 上链交易提交</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-5/#链上数据查询" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>5.2 链上数据查询</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-af16598e><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-af16598e data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#链上操作" data-v-c4656e6d data-v-8f4dc553><!--[--><h2 class="text" data-v-c4656e6d>链上操作</h2><!--]--><!----></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c4656e6d><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-c4656e6d><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#调用前置条件" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.1 调用前置条件</p><!--]--><!----></a><!----></div><!----></div><section class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#文件操作" data-v-c4656e6d data-v-8f4dc553><!--[--><h3 class="text" data-v-c4656e6d>6.2 文件操作</h3><!--]--><!----></a><!----></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#文件保存" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.2.1 文件保存</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#文件元数据更新" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.2.2 文件元数据更新</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#文件本体更新" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.2.3 文件本体更新</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#文件授权" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.2.4 文件授权</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#文件元数据获取" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.2.5 文件元数据获取</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#文件本体获取" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.2.6 文件本体获取</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#文件删除" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.2.7 文件删除</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#文件本体清空" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.2.8 文件本体清空</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#文件验真" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.2.9 文件验真</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#文件追溯" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.2.10 文件追溯</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#结构数据操作" data-v-c4656e6d data-v-8f4dc553><!--[--><h3 class="text" data-v-c4656e6d>6.3 结构数据操作</h3><!--]--><!----></a><!----></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#数据保存" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.3.1 数据保存</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#数据更新" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.3.2 数据更新</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#数据授权" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.3.3 数据授权</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#数据获取" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.3.4 数据获取</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#数据删除" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.3.5 数据删除</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#数据验真" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.3.6 数据验真</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#数据追溯" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.3.7 数据追溯</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#合约操作" data-v-c4656e6d data-v-8f4dc553><!--[--><h3 class="text" data-v-c4656e6d>6.4 合约操作</h3><!--]--><!----></a><!----></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-6/#合约方法调用" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>6.4.1 合约方法调用</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="group" data-v-af16598e><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-af16598e data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-7/#http-api参考" data-v-c4656e6d data-v-8f4dc553><!--[--><h2 class="text" data-v-c4656e6d>HTTP API参考</h2><!--]--><!----></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c4656e6d><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-c4656e6d><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-7/#接口调用业务系统身份签名确认" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>7.1 接口调用业务系统身份签名确认</p><!--]--><!----></a><!----></div><!----></div><section class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-7/#接口说明" data-v-c4656e6d data-v-8f4dc553><!--[--><h3 class="text" data-v-c4656e6d>7.2 接口说明</h3><!--]--><!----></a><!----></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-7/#基础上链交易操作" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>7.2.1 基础上链交易操作</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-7/#文件操作" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>7.2.2 文件操作</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-7/#结构数据操作" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>7.2.3 结构数据操作</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-7/#合约调用" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>7.2.4 合约调用</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="group" data-v-af16598e><section class="VPSidebarItem level-0 collapsible collapsed is-link" data-v-af16598e data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/#coolawchain-java-sdk参考" data-v-c4656e6d data-v-8f4dc553><!--[--><h2 class="text" data-v-c4656e6d>CoolawChain Java SDK参考</h2><!--]--><!----></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c4656e6d><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-c4656e6d><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-c4656e6d><!--[--><section class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/#com.coolawchain.sdk.file" data-v-c4656e6d data-v-8f4dc553><!--[--><h3 class="text" data-v-c4656e6d>8.1 com.coolawchain.sdk.file</h3><!--]--><!----></a><!----></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/#fileupload" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.1.1 FileUpload</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/#filemodify" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.1.2 FileModify</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/#filemetaupate" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.1.3 FileMetaUpate</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/#fileauthorise" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.1.4 FileAuthorise</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/#filemetafetch" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.1.5 FileMetaFetch</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/#filefetch" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.1.6 FileFetch</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/#filedelete" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.1.7 FileDelete</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/#fileemptyapply" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.1.8 FileEmptyApply</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/#fileemptyapprove" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.1.9 FileEmptyApprove</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/#filedigestcheck" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.1.10 FileDigestCheck</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/#fileversionsfetch" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.1.11 FileVersionsFetch</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/#filerightsfetch" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.1.12 FileRightsFetch</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.1/#com.coolawchain.sdk.structdata" data-v-c4656e6d data-v-8f4dc553><!--[--><h3 class="text" data-v-c4656e6d>8.2 com.coolawchain.sdk.structdata</h3><!--]--><!----></a><!----></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.1/#dataupload" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.2.1 DataUpload</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.1/#datamodify" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.2.2 DataModify</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.1/#dataauthorise" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.2.3 DataAuthorise</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.1/#datafetch" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.2.4 DataFetch</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.1/#datadelete" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.2.5 DataDelete</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.1/#datadigestcheck" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.2.6 DataDigestCheck</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.1/#dataversionsfetch" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.2.7 DataVersionsFetch</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.1/#datarightsfetch" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.2.8 DataRightsFetch</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.1/#comcoolawchainsdkcontract" data-v-c4656e6d data-v-8f4dc553><!--[--><h3 class="text" data-v-c4656e6d>8.3 com.coolawchain.sdk.contract</h3><!--]--><!----></a><!----></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.1/#contractcall" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.3.1 ContractCall</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#com.coolawchain.sdk.model" data-v-c4656e6d data-v-8f4dc553><!--[--><h3 class="text" data-v-c4656e6d>8.4 com.coolawchain.sdk.model</h3><!--]--><!----></a><!----></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#frontend" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.4.1 Frontend</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#filetxstatus" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.4.2 FileTxStatus</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#filemetafetchstatus" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.4.3 FileMetaFetchStatus</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#filefetchstatus" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.4.4 FileFetchStatus</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#filedigestcheckstatus" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.4.5 FileDigestCheckStatus</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#fileversionsfetchstatus" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.4.6 FileVersionsFetchStatus</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#filerightsfetchstatus" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.4.7 FileRightsFetchStatus</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#datatxstatus" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.4.8 DataTxStatus</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#datafetchstatus" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.4.9 DataFetchStatus</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#datadigestcheckstatus" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.4.10 DataDigestCheckStatus</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#dataversionsfetchstatus" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.4.11 DataVersionsFetchStatus</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#datarightsfetchstatus" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.4.12 DataRightsFetchStatus</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#contractcallstatus" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.4.13 ContractCallStatus</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#com.coolawchain.sdk.exceptions" data-v-c4656e6d data-v-8f4dc553><!--[--><h3 class="text" data-v-c4656e6d>8.5 com.coolawchain.sdk.exceptions</h3><!--]--><!----></a><!----></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#httpcodeerrorexception" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.5.1 HttpCodeErrorException</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#fetchexception" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.5.2 FetchException</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#txexception" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.5.3 TxException</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#com.coolawchain.sdk.utils" data-v-c4656e6d data-v-8f4dc553><!--[--><h3 class="text" data-v-c4656e6d>8.6 com.coolawchain.sdk.utils</h3><!--]--><!----></a><!----></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#cryptoutil" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.6.1 CryptoUtil</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-8/chapter-8.2/#sm4util" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>8.6.2 SM4Util</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="group" data-v-af16598e><div class="VPSidebarItem level-0 is-link" data-v-af16598e data-v-c4656e6d><div class="item" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/vitepress-demo/markdown/chapter-9/#消息信息" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>消息信息</p><!--]--><!----></a><!----></div><!----></div></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-b2cf3e0b data-v-a494bd1d><div class="VPDoc has-sidebar has-aside" data-v-a494bd1d data-v-c4b0d3cf><!--[--><!--]--><div class="container" data-v-c4b0d3cf><div class="aside" data-v-c4b0d3cf><div class="aside-curtain" data-v-c4b0d3cf></div><div class="aside-container" data-v-c4b0d3cf><div class="aside-content" data-v-c4b0d3cf><div class="VPDocAside" data-v-c4b0d3cf data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-3f215769 data-v-ff0f39c8><div class="content" data-v-ff0f39c8><div class="outline-marker" data-v-ff0f39c8></div><div class="outline-title" data-v-ff0f39c8>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-ff0f39c8><span class="visually-hidden" id="doc-outline-aria-label" data-v-ff0f39c8> Table of Contents for current page </span><ul class="root" data-v-ff0f39c8 data-v-9a431c33><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c4b0d3cf><div class="content-container" data-v-c4b0d3cf><!--[--><!--]--><!----><main class="main" data-v-c4b0d3cf><div style="position:relative;" class="vp-doc _vitepress-demo_markdown_chapter-8_index" data-v-c4b0d3cf><div><h1 id="coolawchain-java-sdk参考" tabindex="-1">CoolawChain Java SDK参考 <a class="header-anchor" href="#coolawchain-java-sdk参考" aria-label="Permalink to &quot;CoolawChain Java SDK参考&quot;">​</a></h1><h2 id="com-coolawchain-sdk-file" tabindex="-1">com.coolawchain.sdk.file <a class="header-anchor" href="#com-coolawchain-sdk-file" aria-label="Permalink to &quot;com.coolawchain.sdk.file&quot;">​</a></h2><h3 id="fileupload" tabindex="-1">FileUpload <a class="header-anchor" href="#fileupload" aria-label="Permalink to &quot;FileUpload&quot;">​</a></h3><p>用于进行文件上链保存的操作对象。</p><h4 id="构造函数" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="fileupload-frontend-string" tabindex="-1">FileUpload (Frontend, String) <a class="header-anchor" href="#fileupload-frontend-string" aria-label="Permalink to &quot;FileUpload (Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileUpload</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交上链交易前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileUpload</span><span style="color:#A6ACCD;"> oFileUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileUpload</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="fileupload-1" tabindex="-1">FileUpload () <a class="header-anchor" href="#fileupload-1" aria-label="Permalink to &quot;FileUpload ()&quot;">​</a></h5><p>构造一个FileUpload对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileUpload</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="属性" tabindex="-1">属性 <a class="header-anchor" href="#属性" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend" tabindex="-1">frontend <a class="header-anchor" href="#frontend" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要保存文件的链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="file" tabindex="-1">file <a class="header-anchor" href="#file" aria-label="Permalink to &quot;file&quot;">​</a></h5><p>设置上链保存的文件的文件对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">File</span><span style="color:#A6ACCD;"> file </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//待上传的文件本体对应的文件对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">File</span><span style="color:#A6ACCD;"> oLocalFile </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">File</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/storage/申请表.doc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileUpload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">file </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oLocalFile</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h5 id="filename" tabindex="-1">fileName <a class="header-anchor" href="#filename" aria-label="Permalink to &quot;fileName&quot;">​</a></h5><p>设置上链保存的文件的文件名称。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileName </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="filesuffix" tabindex="-1">fileSuffix <a class="header-anchor" href="#filesuffix" aria-label="Permalink to &quot;fileSuffix&quot;">​</a></h5><p>设置上链保存的文件的文件扩展名。如：&quot;doc&quot;，&quot;pdf&quot;，&quot;mp3&quot;等。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileSuffix </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="filedescription" tabindex="-1">fileDescription <a class="header-anchor" href="#filedescription" aria-label="Permalink to &quot;fileDescription&quot;">​</a></h5><p>设置文件在链上保存时一并保存的文件描述信息。fileDescription的信息将被区块链加密保存。</p><p>如果想要对链上已保存的fileDescription进行清空处理，则此属性需设置NULL。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileDescription </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileproperty" tabindex="-1">fileProperty <a class="header-anchor" href="#fileproperty" aria-label="Permalink to &quot;fileProperty&quot;">​</a></h5><p>设置文件在链上保存时一并保存的附属属性信息。附属属性建议使用JSON或XML等格式构建，然后序列化成String的类型进行存储。fileProperty的信息将被区块链加密保存。</p><p>如果想要对链上已保存的fileProperty进行清空处理，则此属性需设置NULL。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileProperty </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="filecopy" tabindex="-1">fileCopy <a class="header-anchor" href="#filecopy" aria-label="Permalink to &quot;fileCopy&quot;">​</a></h5><p>设置文件在链上保存时文件副本数量。文件副本是指文件本体在区块链节点网络中保存同时保存多少份拷贝。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> fileCopy </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileslice" tabindex="-1">fileSlice <a class="header-anchor" href="#fileslice" aria-label="Permalink to &quot;fileSlice&quot;">​</a></h5><p>设置文件在链上保存时文件切片数量。为了提高文件上链的保存，以及区块链中文件自我修复的效率，同时确保链上保存文件的安全性和隐私性，文件被区块链系统切分成若干碎片，然后随机分散保存于区块链节点网络中。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> fileSlice </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ownerid" tabindex="-1">ownerID <a class="header-anchor" href="#ownerid" aria-label="Permalink to &quot;ownerID&quot;">​</a></h5><p>设置提交上链交易的文件所有者数字身份标识，必须是owners中的一个数字身份标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="owners" tabindex="-1">owners <a class="header-anchor" href="#owners" aria-label="Permalink to &quot;owners&quot;">​</a></h5><p>设置在链上保存的文件所有者的数字身份标识列表。文件所有者有权添加和删除文件分享者列表和文件读取者列表中的数字身份标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> owners </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> ownerIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8962857bee7b48b28021b7374cfc78c0bac8e51e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">374cfc78c0ba57bee78b2896288021b7c8 e51eb4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileUpload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">owners </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ownerIDs</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h5 id="sharers" tabindex="-1">sharers <a class="header-anchor" href="#sharers" aria-label="Permalink to &quot;sharers&quot;">​</a></h5><p>设置要授予文件分享权限的数字身份标识列表。文件分享者有权添加文件读取者和删除自己添加的读取者数字身份标识。可以后续通过&quot;文件授权&quot;链上操作进行授权（FileAuthorise）。</p><p>如果fileID属性设置了已保存于链上的文件链上ID，此属性区块链做无效处理。即文件更新时，不会进行文件分享权限更新处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> sharers </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要授予文件分享权限的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> sharerIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8962857bee7b48b28021b7374cfc78c0bac8e51e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">374cfc78c0ba57bee78b2896288021b7c8 e51eb4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileUpload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sharers </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> sahrerIDs</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h5 id="readers" tabindex="-1">readers <a class="header-anchor" href="#readers" aria-label="Permalink to &quot;readers&quot;">​</a></h5><p>设置要授予文件读取权限的数字身份标识列表。可以后续通过&quot;文件授权&quot;链上操作进行授权（FileAuthorise）。</p><p>如果fileID属性设置了已保存于链上的文件链上ID，此属性区块链做无效处理。即文件更新时，不会进行文件读取权限更新处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> readers </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要授予文件读取权限的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> readerIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8962857bee7b48b28021b7374cfc78c0bac8e51e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">374cfc78c0ba57bee78b2896288021b7c8 e51eb4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileUpload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">readers </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> readerIDs</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h5 id="eventcontext" tabindex="-1">eventContext <a class="header-anchor" href="#eventcontext" aria-label="Permalink to &quot;eventContext&quot;">​</a></h5><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> eventContext </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//上链保存文件在链外应用系统数据库中的唯一标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">57bee7e51eb48b2896288021b7374cfc78c0bac8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileUpload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h4 id="方法" tabindex="-1">方法 <a class="header-anchor" href="#方法" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="submit" tabindex="-1">submit <a class="header-anchor" href="#submit" aria-label="Permalink to &quot;submit&quot;">​</a></h5><p>向指定的前置节点服务器提交文件上链交易请求，开始进行文件上链保存操作。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submit</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>ownerPrivateKey String</p><p>设置进行当前上链保存操作的文件所有者的数字身份私钥，ownerID对应的私钥。私钥用于对文件上链交易进行签名确权。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//--文件所有者数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//进行文件元数据和本体上链操作提交</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileUpload</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="createtxbody" tabindex="-1">createTxBody <a class="header-anchor" href="#createtxbody" aria-label="Permalink to &quot;createTxBody&quot;">​</a></h5><p>和前置节点进行交互，生成文件上链操作对应的上链交易体，以便使用ownerID对应的私钥对上链交易体进行确权签名。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>String</p><p>序列化的文件上链交易体。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//生成文件上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileUploadTxBody</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileUpload</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//用文件所有者数字身份对文件上链交易体进行签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--对文件上链交易体进行签名，并生成签名结果</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileUploadTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="submittxbody" tabindex="-1">submitTxBody <a class="header-anchor" href="#submittxbody" aria-label="Permalink to &quot;submitTxBody&quot;">​</a></h5><p>使用文件上链交易体原文和ownerID中数字身份对上链交易体的签名结果信息，向指定的前置节点服务器提交文件上链交易请求，开始进行文件上链保存操作。调用此方法，onTxBlockConfirm、onTxSendSuccess等事件不会被触发。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileUploadTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fileUploadTxBody String</p><p>文件上链交易体原文</p><p>txSign String</p><p>文件上链交易体签名结果信息</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//【程序A】准备文件保存上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileUpload</span><span style="color:#A6ACCD;"> oPrepareFileUploadTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileUpload</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">File</span><span style="color:#A6ACCD;"> oLocalFile </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">File</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/storage/申请表.doc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileUploadTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">file </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oLocalFile</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileUploadTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ownerID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> ownersList </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileUploadTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">owners </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ownersList</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileUploadTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileCopy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileUploadTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileSlice </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileUploadTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oPrepareFileUploadTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序B】在外部使用数字身份签名应用进行fileUploadTxBody签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileUploadTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序A】提交文件上链交易，并跟踪上传状态</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileUpload</span><span style="color:#A6ACCD;"> oFiledUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileUpload</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">File</span><span style="color:#A6ACCD;"> oLocalFile </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">File</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/storage/申请表.doc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileUpload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">file </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oLocalFile</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileUpload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFiledUpload</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileUploadTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h4 id="事件" tabindex="-1">事件 <a class="header-anchor" href="#事件" aria-label="Permalink to &quot;事件&quot;">​</a></h4><h5 id="ontxblockconfirm" tabindex="-1">onTxBlockConfirm <a class="header-anchor" href="#ontxblockconfirm" aria-label="Permalink to &quot;onTxBlockConfirm&quot;">​</a></h5><p>此事件在文件元数据成功上链保存，并获得落块确认时发生。此时文件本体仍在上链处理中。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fUplStatus FileTxStatus</p><p>包含文件上链操作的当前处理状态信息的对象。</p><p>fUplStatus中将包含如下返回信息，详细解释请参看FileTxStatus对象相关描述：</p><p>| status，errorCode，message，fileID，versionID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileUpload</span><span style="color:#A6ACCD;"> oFileUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileUpload</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件元数据成功上链保存，并获得落块确认。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//此时文件本体仍在上链处理中。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxblkcfmfailure" tabindex="-1">onTxBlkCfmFailure <a class="header-anchor" href="#ontxblkcfmfailure" aria-label="Permalink to &quot;onTxBlkCfmFailure&quot;">​</a></h5><p>此事件在因落块确认失败，文件元数据上链保存被链回滚时发生。文件上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fUplStatus FileTxStatus</p><p>包含文件上链操作的当前处理状态信息的对象。</p><p>fUplStatus中将包含如下返回信息，详细解释请参看FileTxStatus对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileUpload</span><span style="color:#A6ACCD;"> oFileUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileUpload</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件上链交易落块确认失败，上链保存的文件元数据被链回滚。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。文件上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件上链交易落块确认失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendsuccess" tabindex="-1">onTxSendSuccess <a class="header-anchor" href="#ontxsendsuccess" aria-label="Permalink to &quot;onTxSendSuccess&quot;">​</a></h5><p>此事件在文件上链交易被节点确认接收时发生。此时文件上链交易处于全网同步，并等待执行处理的状态。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fUplStatus FileTxStatus</p><p>包含文件上链操作的当前处理状态信息的对象。</p><p>fUplStatus中将包含如下返回信息，详细解释请参看FileTxStatus对象相关描述：</p><p>| status，errorCode，message，txHash |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileUpload</span><span style="color:#A6ACCD;"> oFileUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileUpload</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件上链交易发送成功，等待区块链执行处理。 </span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendfailure" tabindex="-1">onTxSendFailure <a class="header-anchor" href="#ontxsendfailure" aria-label="Permalink to &quot;onTxSendFailure&quot;">​</a></h5><p>此事件在节点接收文件上链交易失败时发生。文件上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fUplStatus FileTxStatus</p><p>包含文件上链操作的当前处理状态信息的对象。</p><p>fUplStatus中将包含如下返回信息，详细解释请参看FileTxStatus对象相关描述：</p><p>| errorCode，message |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileUpload</span><span style="color:#A6ACCD;"> oFileUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileUpload</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件上链交易发送失败。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件上链交易发送失败的返回状态=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">status</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件上链交易发送失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecsuccess" tabindex="-1">onTxExecSuccess <a class="header-anchor" href="#ontxexecsuccess" aria-label="Permalink to &quot;onTxExecSuccess&quot;">​</a></h5><p>此事件在文件上链交易执行成功，文件元数据上链保存，等待落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fUplStatus FileTxStatus</p><p>包含文件上链操作的当前处理状态信息的对象。</p><p>fUplStatus中将包含如下返回信息，详细解释请参看FileTxStatus对象相关描述：</p><p>| status，errorCode，message，fileID，versionID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileUpload</span><span style="color:#A6ACCD;"> oFileUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileUpload</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件上链交易执行成功，文件元数据上链保存，等待落块确认。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//此时文件本体仍在上链处理中。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件版本ID=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">versionID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件上链交易Hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易执行时间戳=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txExecTimestamp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块生成时间戳</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockedTimestamp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块高度=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHeight</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecfailure" tabindex="-1">onTxExecFailure <a class="header-anchor" href="#ontxexecfailure" aria-label="Permalink to &quot;onTxExecFailure&quot;">​</a></h5><p>此事件在文件上链交易执行失败，文件元数据和文件本体均未上链保存时发生。事件触发后会返回错误信息。文件上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fUplStatus FileTxStatus</p><p>包含文件上链操作的当前处理状态信息的对象。</p><p>fUplStatus中将包含如下返回信息，详细解释请参看FileTxStatus对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileUpload</span><span style="color:#A6ACCD;"> oFileUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileUpload</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件上链交易执行失败，文件元数据和文件本体均未上链保存。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。文件上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链上执行失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onuploadaccomplish" tabindex="-1">onUploadAccomplish <a class="header-anchor" href="#onuploadaccomplish" aria-label="Permalink to &quot;onUploadAccomplish&quot;">​</a></h5><p>此为事件在文件上链操作处理彻底完成，文件元数据和文件本体均成功上链保存时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onUploadAccomplish</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fUplStatus FileTxStatus</p><p>包含文件上链操作的当前处理状态信息的对象。</p><p>fUplStatus中将包含如下返回信息，详细解释请参看FileTxStatus对象相关描述：</p><p>| status，errorCode，message，fileID，versionID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileUpload</span><span style="color:#A6ACCD;"> oFileUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileUpload</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onUploadAccomplish</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：在文件上链操作处理彻底完成，文件元数据和文件本体均成功上链保存。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件版本ID=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">versionID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件上链交易Hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件名=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">fileName</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">fileDescription</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件附属属性=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">fileProperty</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onuploadfailure" tabindex="-1">onUploadFailure <a class="header-anchor" href="#onuploadfailure" aria-label="Permalink to &quot;onUploadFailure&quot;">​</a></h5><p>此为事件在文件本体上链保存因超过重复尝试次数而超时失败时发生。文件上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onUploadFailure</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fUplStatus FileTxStatus</p><p>包含文件上链操作的当前处理状态信息的对象。</p><p>fUplStatus中将包含如下返回信息，详细解释请参看FileTxStatus对象相关描述：</p><p>| status，errorCode，message，fileID，versionID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileUpload</span><span style="color:#A6ACCD;"> oFileUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileUpload</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onUploadFailure</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fUplStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件本体上链保存因超过重复尝试次数而超时失败，文件上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链上执行失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fUplStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onerror" tabindex="-1">onError <a class="header-anchor" href="#onerror" aria-label="Permalink to &quot;onError&quot;">​</a></h5><p>此为事件在FileUpload调用出现异常时发生。事件触发后返回异常信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileUpload</span><span style="color:#A6ACCD;"> oFileUpload </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileUpload</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：FileUpload调用出现异常，并返回异常信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常状态描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常信息=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="filetxstatus-status状态编码" tabindex="-1">FileTxStatus.status状态编码 <a class="header-anchor" href="#filetxstatus-status状态编码" aria-label="Permalink to &quot;FileTxStatus.status状态编码&quot;">​</a></h4><p>状态编码列表：</p><table><thead><tr><th>状态取值</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>TxSendSuccess</td><td>上链交易发送成功。</td><td>节点确认接收文件上链交易请求，等待区块链执行处理。</td></tr><tr><td>TxSendFailure</td><td>上链交易发送失败。</td><td>节点接收文件上链交易请求失败，文件上链交易请求需重新提交。</td></tr><tr><td>TxExecSuccess</td><td>上链交易执行成功。</td><td>文件上链交易执行成功，文件元数据上链保存，等待落块确认。文件本体仍在上链处理中。</td></tr><tr><td>TxExecFailure</td><td>上链交易执行失败。</td><td>文件上链交易执行失败，文件元数据和文件本体均未上链保存。文件上链交易请求需重新提交。</td></tr><tr><td>TxBlockConfirm</td><td>上链交易落块确认。</td><td>文件元数据成功上链保存，并获得落块确认，文件本体仍在上链处理中。</td></tr><tr><td>TxBlkCfmFailure</td><td>上链交易落块确认失败。</td><td>因落块确认失败，上链保存的文件元数据被链回滚。文件上链交易请求需重新提交。</td></tr><tr><td>UploadAccomplish</td><td>文件成功上链保存。</td><td>文件保存链上操作处理彻底完成，文件元数据和文件本体均成功上链保存。</td></tr><tr><td>UploadFailure</td><td>文件上链保存失败。</td><td>文件本体上链保存因超过重复尝试次数而超时失败，文件上链交易请求需重新提交。</td></tr></tbody></table><h3 id="filemodify" tabindex="-1">FileModify <a class="header-anchor" href="#filemodify" aria-label="Permalink to &quot;FileModify&quot;">​</a></h3><p>用于进行文件更新的操作对象。</p><h4 id="构造函数-1" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数-1" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="filemodify-frontend-string" tabindex="-1">FileModify (Frontend, String) <a class="header-anchor" href="#filemodify-frontend-string" aria-label="Permalink to &quot;FileModify (Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileModify</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交上链交易前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileModify</span><span style="color:#A6ACCD;"> oFileModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileModify</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="filemodify-1" tabindex="-1">FileModify () <a class="header-anchor" href="#filemodify-1" aria-label="Permalink to &quot;FileModify ()&quot;">​</a></h5><p>构造一个FileModify对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileModify</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><p>|-----------------------|</p><h4 id="属性-1" tabindex="-1">属性 <a class="header-anchor" href="#属性-1" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend-1" tabindex="-1">frontend <a class="header-anchor" href="#frontend-1" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain-1" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain-1" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要更新文件的链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileid" tabindex="-1">fileID <a class="header-anchor" href="#fileid" aria-label="Permalink to &quot;fileID&quot;">​</a></h5><p>设置要进行更新的链上文件的文件链上ID。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="file-1" tabindex="-1">File <a class="header-anchor" href="#file-1" aria-label="Permalink to &quot;File&quot;">​</a></h5><p>设置上链更新的新版本文件对应的文件对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">File</span><span style="color:#A6ACCD;"> file </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//待上传的新版本文件本体对应的文件对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">File</span><span style="color:#A6ACCD;"> oLocalFile </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">File</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/storage/申请表.doc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileModify</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">file </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oLocalFile</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h5 id="filename-1" tabindex="-1">fileName <a class="header-anchor" href="#filename-1" aria-label="Permalink to &quot;fileName&quot;">​</a></h5><p>设置要更新的文件名称。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileName </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="filesuffix-1" tabindex="-1">fileSuffix <a class="header-anchor" href="#filesuffix-1" aria-label="Permalink to &quot;fileSuffix&quot;">​</a></h5><p>设置要更新的文件扩展名。如：&quot;doc&quot;，&quot;pdf&quot;，&quot;mp3&quot;等。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileSuffix </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="filedescription-1" tabindex="-1">fileDescription <a class="header-anchor" href="#filedescription-1" aria-label="Permalink to &quot;fileDescription&quot;">​</a></h5><p>设置要更新的文件描述信息。fileDescription的信息将被区块链加密保存，只有文件所有者和拥有文件读取权限方可获得相应的明文信息。</p><p>如果想要对链上已保存的fileDescription进行清空处理，则此属性需设置NULL。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileDescription </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileproperty-1" tabindex="-1">fileProperty <a class="header-anchor" href="#fileproperty-1" aria-label="Permalink to &quot;fileProperty&quot;">​</a></h5><p>设置要更新的文件附属属性信息。附属属性建议使用JSON或XML等格式构建，然后序列化成String的类型进行存储。fileProperty的信息将被区块链加密保存，只有文件所有者和拥有文件读取权限方可获得相应的明文信息。</p><p>如果想要对链上已保存的fileProperty进行清空处理，则此属性需设置NULL。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileProperty </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="filecopy-1" tabindex="-1">fileCopy <a class="header-anchor" href="#filecopy-1" aria-label="Permalink to &quot;fileCopy&quot;">​</a></h5><p>设置要更新的文件本体在链上保存时文件副本数量。文件副本是指文件本体在区块链节点网络中保存同时保存多少份拷贝。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> fileCopy </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileslice-1" tabindex="-1">fileSlice <a class="header-anchor" href="#fileslice-1" aria-label="Permalink to &quot;fileSlice&quot;">​</a></h5><p>设置要更新的文件本体在链上保存时文件切片数量。为了提高文件更新上链的保存，以及区块链中文件自我修复的效率，同时确保链上保存文件的安全性和隐私性，文件被区块链系统切分成若干碎片，然后随机分散保存于区块链节点网络中。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> fileSlice </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">##### ownerID</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">设置提交上链交易的文件所有者数字身份标识，必须是owners中的一个数字身份标识。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">~~~</span><span style="color:#A6ACCD;">java    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="eventcontext-1" tabindex="-1">eventContext <a class="header-anchor" href="#eventcontext-1" aria-label="Permalink to &quot;eventContext&quot;">​</a></h5><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> eventContext </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//上链更新文件在链外应用系统数据库中的唯一标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">57bee7e51eb48b2896288021b7374cfc78c0bac8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileModify</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h4 id="方法-1" tabindex="-1">方法 <a class="header-anchor" href="#方法-1" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="submit-1" tabindex="-1">submit <a class="header-anchor" href="#submit-1" aria-label="Permalink to &quot;submit&quot;">​</a></h5><p>向指定的前置节点服务器提交文件更新上链交易请求，开始进行文件更新上链操作。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submit</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>ownerPrivateKey String</p><p>进行文件更新的所有者的数字身份私钥，ownerID对应的私钥。私钥用于对文件更新上链交易进行签名确权。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//--链上文件所有者数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//进行文件元数据和本体上链更新操作提交</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileModify</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="createtxbody-1" tabindex="-1">createTxBody <a class="header-anchor" href="#createtxbody-1" aria-label="Permalink to &quot;createTxBody&quot;">​</a></h5><p>和前置节点进行交互，生成文件更新操作对应的上链交易体，以便使用ownerID对应的私钥对上链交易体进行确权签名。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>String</p><p>序列化的文件更新上链交易体。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//生成文件更新上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileModifyTxBody</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileModify</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//用文件所有者数字身份对文件更新上链交易体进行签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--对文件更新上链交易体进行签名，并生成签名结果</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileModifyTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="submittxbody-1" tabindex="-1">submitTxBody <a class="header-anchor" href="#submittxbody-1" aria-label="Permalink to &quot;submitTxBody&quot;">​</a></h5><p>使用文件更新上链交易体原文和ownerID中数字身份对上链交易体的签名结果信息，向指定的前置节点服务器提交文件更新上链交易请求，开始进行文件更新上链操作。调用此方法，onTxBlockConfirm、onTxSendSuccess等事件不会被触发。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileModifyTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fileModifyTxBody String</p><p>文件更新上链交易体原文</p><p>txSign String</p><p>文件更新上链交易体签名结果信息</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//【程序A】准备文件更新上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileModify</span><span style="color:#A6ACCD;"> oPrepareFileModifyTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileModify</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">File</span><span style="color:#A6ACCD;"> oLocalFile </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">File</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/storage/申请表.doc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileModifyTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">file </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oLocalFile</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileModifyTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SenderID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileModifyTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileCopy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileModifyTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileSlice </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileModifyTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oPrepareFileModifyTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序B】在外部使用数字身份签名应用进行fileModifyTxBody签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileModifyTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序A】提交文件更新上链交易，并跟踪上传状态</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileModify</span><span style="color:#A6ACCD;"> oFileModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileModify</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">File</span><span style="color:#A6ACCD;"> oLocalFile </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">File</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/storage/申请表.doc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileModify</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">file </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oLocalFile</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileModify</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileModify</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileModifyTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h4 id="事件-1" tabindex="-1">事件 <a class="header-anchor" href="#事件-1" aria-label="Permalink to &quot;事件&quot;">​</a></h4><h5 id="ontxblockconfirm-1" tabindex="-1">onTxBlockConfirm <a class="header-anchor" href="#ontxblockconfirm-1" aria-label="Permalink to &quot;onTxBlockConfirm&quot;">​</a></h5><p>此事件在文件元数据成功上链保存，并获得落块确认时发生。此时文件本体仍在上链处理中。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fModifyStatus FileModifyStatus</p><p>包含文件更新操作的当前处理状态信息的对象。</p><p>fModifyStatus中将包含如下返回信息，详细解释请参看FileModifyStatus对象相关描述：</p><p>| status，errorCode，message，fileID，versionID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileModify</span><span style="color:#A6ACCD;"> oFileModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileModify</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件元数据成功上链保存，并获得落块确认。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//此时文件本体仍在上链处理中。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxblkcfmfailure-1" tabindex="-1">onTxBlkCfmFailure <a class="header-anchor" href="#ontxblkcfmfailure-1" aria-label="Permalink to &quot;onTxBlkCfmFailure&quot;">​</a></h5><p>此事件在因落块确认失败，文件元数据上链保存被链回滚时发生。文件更新上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fModifyStatus FileModifyStatus</p><p>包含文件更新操作的当前处理状态信息的对象。</p><p>fModifyStatus中将包含如下返回信息，详细解释请参看FileModifyStatus对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileModify</span><span style="color:#A6ACCD;"> oFileModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileModify</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件更新上链交易落块确认失败，上链更新的文件元数据被链回滚。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。文件更新上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件更新上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件更新上链交易落块确认失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendsuccess-1" tabindex="-1">onTxSendSuccess <a class="header-anchor" href="#ontxsendsuccess-1" aria-label="Permalink to &quot;onTxSendSuccess&quot;">​</a></h5><p>此事件在文件更新上链交易被节点确认接收时发生。此时文件更新上链交易处于全网同步，并等待执行处理的状态。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fModifyStatus FileModifyStatus</p><p>包含文件更新操作的当前处理状态信息的对象。</p><p>fModifyStatus中将包含如下返回信息，详细解释请参看FileModifyStatus对象相关描述：</p><p>| status，errorCode，message，txHash |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileModify</span><span style="color:#A6ACCD;"> oFileModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileModify</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件更新上链交易发送成功，等待区块链执行处理。 </span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件更新上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendfailure-1" tabindex="-1">onTxSendFailure <a class="header-anchor" href="#ontxsendfailure-1" aria-label="Permalink to &quot;onTxSendFailure&quot;">​</a></h5><p>此事件在节点接收文件更新上链交易失败时发生。文件更新上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fModifyStatus FileModifyStatus</p><p>包含文件更新操作的当前处理状态信息的对象。</p><p>fModifyStatus中将包含如下返回信息，详细解释请参看FileModifyStatus对象相关描述：</p><p>| errorCode，message |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileModify</span><span style="color:#A6ACCD;"> oFileModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileModify</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件更新上链交易发送失败。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件更新上链交易发送失败的返回状态=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">status</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件更新上链交易发送失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecsuccess-1" tabindex="-1">onTxExecSuccess <a class="header-anchor" href="#ontxexecsuccess-1" aria-label="Permalink to &quot;onTxExecSuccess&quot;">​</a></h5><p>此事件在文件更新上链交易执行成功，文件元数据上链保存，等待落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fModifyStatus FileModifyStatus</p><p>包含文件更新操作的当前处理状态信息的对象。</p><p>fModifyStatus中将包含如下返回信息，详细解释请参看FileModifyStatus对象相关描述：</p><p>| status，errorCode，message，fileID，versionID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileModify</span><span style="color:#A6ACCD;"> oFileModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileModify</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件更新上链交易执行成功，文件元数据上链保存，等待落块确认。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//此时文件本体仍在上链处理中。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件版本ID=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">versionID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件更新上链交易Hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易执行时间戳=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txExecTimestamp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块生成时间戳</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockedTimestamp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块高度=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHeight</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecfailure-1" tabindex="-1">onTxExecFailure <a class="header-anchor" href="#ontxexecfailure-1" aria-label="Permalink to &quot;onTxExecFailure&quot;">​</a></h5><p>此事件在文件更新上链交易执行失败，文件元数据和文件本体均未上链保存时发生。事件触发后会返回错误信息。文件更新上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fModifyStatus FileModifyStatus</p><p>包含文件更新上链操作的当前处理状态信息的对象。</p><p>fModifyStatus中将包含如下返回信息，详细解释请参看FileModifyStatus对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileModify</span><span style="color:#A6ACCD;"> oFileModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileModify</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件更新上链交易执行失败，文件元数据和文件本体均未上链保存。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。文件更新上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件更新上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链上执行失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onuploadaccomplish-1" tabindex="-1">onUploadAccomplish <a class="header-anchor" href="#onuploadaccomplish-1" aria-label="Permalink to &quot;onUploadAccomplish&quot;">​</a></h5><p>此为事件在文件更新操作处理彻底完成，文件元数据和文件本体均成功上链保存时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onUploadAccomplish</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fModifyStatus FileModifyStatus</p><p>包含文件更新操作的当前处理状态信息的对象。</p><p>fModifyStatus中将包含如下返回信息，详细解释请参看FileModifyStatus对象相关描述：</p><p>| status，errorCode，message，fileID，versionID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileModify</span><span style="color:#A6ACCD;"> oFileModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileModify</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onUploadAccomplish</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：在文件更新操作处理彻底完成，文件元数据和文件本体均成功上链保存。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件版本ID=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">versionID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件更新上链交易Hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件名=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">fileName</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">fileDescription</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件附属属性=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">fileProperty</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onuploadfailure-1" tabindex="-1">onUploadFailure <a class="header-anchor" href="#onuploadfailure-1" aria-label="Permalink to &quot;onUploadFailure&quot;">​</a></h5><p>此为事件在文件本体上链保存因超过重复尝试次数而超时失败时发生。文件更新上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onUploadFailure</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fModifyStatus FileModifyStatus</p><p>包含文件更新操作的当前处理状态信息的对象。</p><p>fModifyStatus中将包含如下返回信息，详细解释请参看FileModifyStatus对象相关描述：</p><p>| status，errorCode，message，fileID，versionID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileModify</span><span style="color:#A6ACCD;"> oFileModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileModify</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onUploadFailure</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fModifyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件本体上链保存因超过重复尝试次数而超时失败，文件更新上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链上执行失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fModifyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onerror-1" tabindex="-1">onError <a class="header-anchor" href="#onerror-1" aria-label="Permalink to &quot;onError&quot;">​</a></h5><p>此为事件在FileModify调用出现异常时发生。事件触发后返回异常信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileModify</span><span style="color:#A6ACCD;"> oFileModify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileModify</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：FileModify调用出现异常，并返回异常信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常状态描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常信息=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="filetxstatus-status状态编码-1" tabindex="-1">FileTxStatus.status状态编码 <a class="header-anchor" href="#filetxstatus-status状态编码-1" aria-label="Permalink to &quot;FileTxStatus.status状态编码&quot;">​</a></h4><p>状态编码列表：</p><table><thead><tr><th>状态取值</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>TxSendSuccess</td><td>上链交易发送成功。</td><td>节点确认接收文件更新上链交易请求，等待区块链执行处理。</td></tr><tr><td>TxSendFailure</td><td>上链交易发送失败。</td><td>节点接收文件更新上链交易请求失败，文件更新上链交易请求需重新提交。</td></tr><tr><td>TxExecSuccess</td><td>上链交易执行成功。</td><td>文件更新上链交易执行成功，文件元数据上链保存，等待落块确认。文件本体仍在上链处理中。</td></tr><tr><td>TxExecFailure</td><td>上链交易执行失败。</td><td>文件更新上链交易执行失败，文件元数据和文件本体均未上链保存。文件更新上链交易请求需重新提交。</td></tr><tr><td>TxBlockConfirm</td><td>上链交易落块确认。</td><td>文件元数据成功上链保存，并获得落块确认，文件本体仍在上链处理中。</td></tr><tr><td>TxBlkCfmFailure</td><td>上链交易落块确认失败。</td><td>因落块确认失败，上链保存的文件元数据被链回滚。文件更新上链交易请求需重新提交。</td></tr><tr><td>UploadAccomplish</td><td>文件成功上链保存。</td><td>文件保存链上操作处理彻底完成，文件元数据和文件本体均成功上链保存。</td></tr><tr><td>UploadFailure</td><td>文件更新上链保存失败。</td><td>文件本体上链保存因超过重复尝试次数而超时失败，文件更新上链交易请求需重新提交。</td></tr></tbody></table><h3 id="filemetaupate" tabindex="-1">FileMetaUpate <a class="header-anchor" href="#filemetaupate" aria-label="Permalink to &quot;FileMetaUpate&quot;">​</a></h3><p>用于进行文件元数据更新的操作对象。</p><h4 id="构造函数-2" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数-2" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="filemetaupate-frontend-string" tabindex="-1">FileMetaUpate (Frontend, String) <a class="header-anchor" href="#filemetaupate-frontend-string" aria-label="Permalink to &quot;FileMetaUpate (Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaUpate</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交上链交易前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileMetaUpate</span><span style="color:#A6ACCD;"> oFileMetaUpate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaUpate</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="filemetaupate-1" tabindex="-1">FileMetaUpate () <a class="header-anchor" href="#filemetaupate-1" aria-label="Permalink to &quot;FileMetaUpate ()&quot;">​</a></h5><p>构造一个FileMetaUpate对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaUpate</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="属性-2" tabindex="-1">属性 <a class="header-anchor" href="#属性-2" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend-2" tabindex="-1">frontend <a class="header-anchor" href="#frontend-2" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain-2" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain-2" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要更新元数据的文件所在链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileid-1" tabindex="-1">fileID <a class="header-anchor" href="#fileid-1" aria-label="Permalink to &quot;fileID&quot;">​</a></h5><p>设置要进行元数据更新的链上文件的文件链上ID。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="filename-2" tabindex="-1">fileName <a class="header-anchor" href="#filename-2" aria-label="Permalink to &quot;fileName&quot;">​</a></h5><p>设置要更新的文件名称。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileName </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="filesuffix-2" tabindex="-1">fileSuffix <a class="header-anchor" href="#filesuffix-2" aria-label="Permalink to &quot;fileSuffix&quot;">​</a></h5><p>设置要更新的文件扩展名。如：&quot;doc&quot;，&quot;pdf&quot;，&quot;mp3&quot;等。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileSuffix </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="filedescription-2" tabindex="-1">fileDescription <a class="header-anchor" href="#filedescription-2" aria-label="Permalink to &quot;fileDescription&quot;">​</a></h5><p>设置要更新的文件描述信息。fileDescription的信息将被区块链加密保存，只有文件所有者和拥有文件读取权限方可获得相应的明文信息。</p><p>如果想要对链上已保存的fileDescription进行清空处理，则此属性需设置NULL。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileDescription </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileproperty-2" tabindex="-1">fileProperty <a class="header-anchor" href="#fileproperty-2" aria-label="Permalink to &quot;fileProperty&quot;">​</a></h5><p>设置要更新的文件附属属性信息。附属属性建议使用JSON或XML等格式构建，然后序列化成String的类型进行存储。fileProperty的信息将被区块链加密保存，只有文件所有者和拥有文件读取权限方可获得相应的明文信息。</p><p>如果想要对链上已保存的fileProperty进行清空处理，则此属性需设置NULL。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileProperty </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ownerid-1" tabindex="-1">ownerID <a class="header-anchor" href="#ownerid-1" aria-label="Permalink to &quot;ownerID&quot;">​</a></h5><p>设置提交上链交易的文件所有者数字身份标识，必须是owners中的一个数字身份标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileMetaUpate</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ownerID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ownerID</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h5 id="eventcontext-2" tabindex="-1">EventContext <a class="header-anchor" href="#eventcontext-2" aria-label="Permalink to &quot;EventContext&quot;">​</a></h5><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> eventContext </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//上链更新元数据的文件在链外应用系统数据库中的唯一标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">57bee7e51eb48b2896288021b7374cfc78c0bac8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileMetaUpate</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h4 id="方法-2" tabindex="-1">方法 <a class="header-anchor" href="#方法-2" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="submit-2" tabindex="-1">submit <a class="header-anchor" href="#submit-2" aria-label="Permalink to &quot;submit&quot;">​</a></h5><p>向指定的前置节点服务器提交&quot;文件元数据更新&quot;上链交易请求，开始进行文件元数据更新链上操作。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submit</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>ownerPrivateKey String</p><p>设置要进行元数据更新的文件所有者的数字身份私钥，ownerID对应的私钥。私钥用于对&quot;文件元数据更新&quot;上链交易进行签名确权。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//--链上文件所有者数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//进行文件元数据更新上链操作提交</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileMetaUpate</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="createtxbody-2" tabindex="-1">createTxBody <a class="header-anchor" href="#createtxbody-2" aria-label="Permalink to &quot;createTxBody&quot;">​</a></h5><p>和前置节点进行交互，生成&quot;文件元数据更新&quot;链上操作对应的上链交易体，以便使用ownerID对应的私钥对上链交易体进行确权签名。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>String</p><p>序列化的&quot;文件元数据更新&quot;上链交易体。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//生成&quot;文件元数据更新&quot;上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileMetaUpdateTxBody</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileMetaUpate</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//用文件所有者数字身份对&quot;文件元数据更新&quot;上链交易体进行签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--对&quot;文件元数据更新&quot;上链交易体进行签名，并生成签名结果</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileMetaUpdateTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="submittxbody-2" tabindex="-1">submitTxBody <a class="header-anchor" href="#submittxbody-2" aria-label="Permalink to &quot;submitTxBody&quot;">​</a></h5><p>使用文件元数据更新上链交易体原文和ownerID中数字身份对上链交易体的签名结果信息，向指定的前置节点服务器提交&quot;文件元数据更新&quot;上链交易请求。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileMetaUpdateTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fileMetaUpdateTxBody String</p><p>文件元数据更新上链交易体原文</p><p>txSign String</p><p>文件元数据更新上链交易体签名结果信息</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//【程序A】准备文件元数据更新上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileMetaUpdate</span><span style="color:#A6ACCD;"> oPrepareFMetaUpdTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaUpdate</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileUploadTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">88021b73bac8b248b2896278c04a4378962e51eb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileUploadTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ownerID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFMetaUpdTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileDescription </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">这是一个赋强公证申请表-2.0版本</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFMetaUpdTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileProperty </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">{&#39;接收单位&#39;: &#39;公证处&#39;, &#39;服务对象-新加字段&#39;: &#39;个人&#39;}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileMetaUpdTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oPrepareFMetaUpdTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序B】在外部使用数字身份签名应用进行fileMetaUpdTxBody签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileMetaUpdTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序A】提交文件元数据更新上链交易，并跟踪链上处理状态</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileMetaUpdate</span><span style="color:#A6ACCD;"> oFileMetaUpdate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileUpload</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileMetaUpdate</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileMetaUpdate</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileMetaUpdTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h4 id="事件-2" tabindex="-1">事件 <a class="header-anchor" href="#事件-2" aria-label="Permalink to &quot;事件&quot;">​</a></h4><h5 id="ontxblockconfirm-2" tabindex="-1">onTxBlockConfirm <a class="header-anchor" href="#ontxblockconfirm-2" aria-label="Permalink to &quot;onTxBlockConfirm&quot;">​</a></h5><p>此事件在文件元数据上链更新成功，并获得落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fMetaUpdStatus FileTxStatus</p><p>包含&quot;文件元数据更新&quot;链上操作的当前处理状态信息的对象。</p><p>fMetaUpdStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，fileID，versionID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileMetaUpate</span><span style="color:#A6ACCD;"> oFileMetaUpate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaUpate</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fMetaUpdStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件元数据上链更新成功，并获得落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件当前版本ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">versionID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxblkcfmfailure-2" tabindex="-1">onTxBlkCfmFailure <a class="header-anchor" href="#ontxblkcfmfailure-2" aria-label="Permalink to &quot;onTxBlkCfmFailure&quot;">​</a></h5><p>此事件在文件元数据更新上链交易落块确认失败，上链更新的文件元数据被链回滚时发生。事件触发后，会返回错误信息。文件元数据更新上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fMetaUpdStatus FileTxStatus</p><p>包含&quot;文件元数据更新&quot;链上操作的当前处理状态信息的对象。</p><p>fMetaUpdStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileMetaUpate</span><span style="color:#A6ACCD;"> oFileMetaUpate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaUpate</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fMetaUpdStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件元数据更新上链交易落块确认失败，上链更新的文件元数据被链回滚。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。文件元数据更新上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件元数据更新上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件元数据更新上链交易落块确认失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendsuccess-2" tabindex="-1">onTxSendSuccess <a class="header-anchor" href="#ontxsendsuccess-2" aria-label="Permalink to &quot;onTxSendSuccess&quot;">​</a></h5><p>此事件在文件元数据更新上链交易发送成功，等待区块链执行处理时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fMetaUpdStatus FileTxStatus</p><p>包含&quot;文件元数据更新&quot;链上操作的当前处理状态信息的对象。</p><p>fMetaUpdStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，txHash |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileMetaUpate</span><span style="color:#A6ACCD;"> oFileMetaUpate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaUpate</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fMetaUpdStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件元数据更新上链交易发送成功，等待区块链执行处理。 </span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件元数据更新上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendfailure-2" tabindex="-1">onTxSendFailure <a class="header-anchor" href="#ontxsendfailure-2" aria-label="Permalink to &quot;onTxSendFailure&quot;">​</a></h5><p>此事件在文件元数据更新上链交易发送失败时发生。文件元数据更新上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fMetaUpdStatus FileTxStatus</p><p>包含&quot;文件元数据更新&quot;链上操作的当前处理状态信息的对象。</p><p>fMetaUpdStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| errorCode，message |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileMetaUpate</span><span style="color:#A6ACCD;"> oFileMetaUpate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaUpate</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fMetaUpdStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件元数据更新上链交易发送失败。</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件元数据更新上链交易发送失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecsuccess-2" tabindex="-1">onTxExecSuccess <a class="header-anchor" href="#ontxexecsuccess-2" aria-label="Permalink to &quot;onTxExecSuccess&quot;">​</a></h5><p>此事件在文件元数据更新上链交易执行成功，文件元数据上链更新成功，等待落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fMetaUpdStatus FileTxStatus</p><p>包含&quot;文件元数据更新&quot;链上操作的当前处理状态信息的对象。</p><p>fMetaUpdStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，fileID，versionID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileMetaUpate</span><span style="color:#A6ACCD;"> oFileMetaUpate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaUpate</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fMetaUpdStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件元数据更新上链交易执行成功，文件元数据上链更新成功，等待落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件版本ID=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">versionID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件元数据更新上链交易Hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易执行时间戳=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txExecTimestamp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块生成时间戳</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockedTimestamp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块高度=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHeight</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecfailure-2" tabindex="-1">onTxExecFailure <a class="header-anchor" href="#ontxexecfailure-2" aria-label="Permalink to &quot;onTxExecFailure&quot;">​</a></h5><p>此事件在文件元数据更新上链交易执行失败，文件元数据未上链更新时发生。事件触发后会返回错误信息。文件元数据上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fMetaUpdStatus FileTxStatus</p><p>包含&quot;文件元数据更新&quot;链上操作的当前处理状态信息的对象。</p><p>fMetaUpdStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileMetaUpate</span><span style="color:#A6ACCD;"> oFileMetaUpate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaUpate</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fMetaUpdStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件元数据更新上链交易执行失败，文件元数据未上链更新。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件元数据更新上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链上执行失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onerror-2" tabindex="-1">onError <a class="header-anchor" href="#onerror-2" aria-label="Permalink to &quot;onError&quot;">​</a></h5><p>此为事件在FileMetaUpate调用出现异常时发生。事件触发后返回异常信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileMetaUpate</span><span style="color:#A6ACCD;"> oFileMetaUpate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaUpate</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：FileMetaUpdate调用出现异常。并返回异常信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常状态描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常信息=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="filetxstatus-status状态编码-2" tabindex="-1">FileTxStatus.status状态编码 <a class="header-anchor" href="#filetxstatus-status状态编码-2" aria-label="Permalink to &quot;FileTxStatus.status状态编码&quot;">​</a></h4><p>状态编码列表：</p><table><thead><tr><th>状态取值</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>TxSendSuccess</td><td>上链交易发送成功。</td><td>节点确认接收文件元数据更新上链交易请求，等待区块链执行处理。</td></tr><tr><td>TxSendFailure</td><td>上链交易发送失败。</td><td>节点接收文件元数据更新上链交易请求失败，文件元数据更新上链交易请求需重新提交。</td></tr><tr><td>TxExecSuccess</td><td>上链交易执行成功。</td><td>文件元数据更新上链交易执行成功，文件元数据上链更新成功，等待落块确认。</td></tr><tr><td>TxExecFailure</td><td>上链交易执行失败。</td><td>文件元数据更新上链交易执行失败，文件元数据未上链更新。文件元数据更新上链交易请求需重新提交。</td></tr><tr><td>TxBlockConfirm</td><td>上链交易落块确认。</td><td>文件元数据上链更新成功，并获得落块确认。</td></tr><tr><td>TxBlkCfmFailure</td><td>上链交易落块确认失败。</td><td>因落块确认失败，上链更新的文件元数据被链回滚。文件元数据更新上链交易请求需重新提交。</td></tr></tbody></table><h3 id="fileauthorise" tabindex="-1">FileAuthorise <a class="header-anchor" href="#fileauthorise" aria-label="Permalink to &quot;FileAuthorise&quot;">​</a></h3><p>用于进行文件授权的操作对象。</p><h4 id="构造函数-3" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数-3" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="fileauthorise-frontend-string" tabindex="-1">FileAuthorise (Frontend, String) <a class="header-anchor" href="#fileauthorise-frontend-string" aria-label="Permalink to &quot;FileAuthorise (Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileAuthorise</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交上链交易前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileAuthorise</span><span style="color:#A6ACCD;"> oFileAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileAuthorise</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="fileauthorise-1" tabindex="-1">FileAuthorise () <a class="header-anchor" href="#fileauthorise-1" aria-label="Permalink to &quot;FileAuthorise ()&quot;">​</a></h5><p>构造一个FileAuthorise对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileAuthorise</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="属性-3" tabindex="-1">属性 <a class="header-anchor" href="#属性-3" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend-3" tabindex="-1">frontend <a class="header-anchor" href="#frontend-3" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain-3" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain-3" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要进行文件授权的文件所在链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileid-2" tabindex="-1">fileID <a class="header-anchor" href="#fileid-2" aria-label="Permalink to &quot;fileID&quot;">​</a></h5><p>设置要进行文件授权的链上文件的文件链上ID。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="grantorid" tabindex="-1">grantorID <a class="header-anchor" href="#grantorid" aria-label="Permalink to &quot;grantorID&quot;">​</a></h5><p>设置提交上链交易的授权者数字身份标识，必须是owners或sharers中的一个数字身份标识。</p><ul><li>文件所有者可以授权分享者列表和读取者列表。</li><li>文件分享者可以授权读取者列表。</li></ul><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> grantorID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="eventcontext-3" tabindex="-1">eventContext <a class="header-anchor" href="#eventcontext-3" aria-label="Permalink to &quot;eventContext&quot;">​</a></h5><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> eventContext </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//要授予文件授权的文件在链外应用系统数据库中的唯一标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">57bee7e51eb48b2896288021b7374cfc78c0bac8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h4 id="方法-3" tabindex="-1">方法 <a class="header-anchor" href="#方法-3" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="addreaders" tabindex="-1">addReaders <a class="header-anchor" href="#addreaders" aria-label="Permalink to &quot;addReaders&quot;">​</a></h5><p>设置要授予文件读取权限的数字身份标识列表。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> addReaders </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> readers </span><span style="color:#89DDFF;">};</span></span></code></pre></div><p><strong>参数</strong></p><p>readers String[]</p><p>要授予文件读取权限的数字身份标识。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要授予文件读取权限的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> readerIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8962857bee7b48b28021b7374cfc78c0bac8e51e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">374cfc78c0ba57bee78b2896288021b7c8 e51eb4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addReaders</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">readerIDs</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="addsharers" tabindex="-1">addSharers <a class="header-anchor" href="#addsharers" aria-label="Permalink to &quot;addSharers&quot;">​</a></h5><p>设置要授予文件分享权限的数字身份标识列表。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> addSharers </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> Sharers </span><span style="color:#89DDFF;">};</span></span></code></pre></div><p><strong>参数</strong></p><p>Sharers String[]</p><p>要授予文件分享权限的数字身份标识。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要授予文件分享权限的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> sharerIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8962857bee7b48b28021b7374cfc78c0bac8e51e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">374cfc78c0ba57bee78b2896288021b7c8 e51eb4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addSharers</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">sharerIDs</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="addowners" tabindex="-1">addOwners <a class="header-anchor" href="#addowners" aria-label="Permalink to &quot;addOwners&quot;">​</a></h5><p>设置要授予文件所有者权限的数字身份标识列表。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> addOwners </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> Owners </span><span style="color:#89DDFF;">};</span></span></code></pre></div><p><strong>参数</strong></p><p>Owners String[]</p><p>要授予文件所有者权限的数字身份标识。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要授予文件所有者权限的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> ownerIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8962857bee7b48b28021b7374cfc78c0bac8e51e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">374cfc78c0ba57bee78b2896288021b7c8 e51eb4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addOwners</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ownerIDs</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="removereaders" tabindex="-1">removeReaders <a class="header-anchor" href="#removereaders" aria-label="Permalink to &quot;removeReaders&quot;">​</a></h5><p>设置要删除文件读取权限的数字身份标识列表。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> removeReaders </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> Readers </span><span style="color:#89DDFF;">};</span></span></code></pre></div><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要删除文件读取权限的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> readerIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8962857bee7b48b28021b7374cfc78c0bac8e51e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">374cfc78c0ba57bee78b2896288021b7c8 e51eb4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeReaders</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">readerIDs</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="removesharers" tabindex="-1">removeSharers <a class="header-anchor" href="#removesharers" aria-label="Permalink to &quot;removeSharers&quot;">​</a></h5><p>设置要删除文件分享权限的数字身份标识列表。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> removeSharers </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> Sharers </span><span style="color:#89DDFF;">};</span></span></code></pre></div><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要删除文件分享权限的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> sharerIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8962857bee7b48b28021b7374cfc78c0bac8e51e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">374cfc78c0ba57bee78b2896288021b7c8 e51eb4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeSharers</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">sharerIDs</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="removeowners" tabindex="-1">removeOwners <a class="header-anchor" href="#removeowners" aria-label="Permalink to &quot;removeOwners&quot;">​</a></h5><p>设置要删除文件所有者权限的数字身份标识列表。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> removeOwners </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> Owners </span><span style="color:#89DDFF;">};</span></span></code></pre></div><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//设置要删除文件所有者的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> ownerIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8962857bee7b48b28021b7374cfc78c0bac8e51e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">374cfc78c0ba57bee78b2896288021b7c8 e51eb4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeOwners</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ownerIDs</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="createtxbody-3" tabindex="-1">createTxBody <a class="header-anchor" href="#createtxbody-3" aria-label="Permalink to &quot;createTxBody&quot;">​</a></h5><p>和前置节点进行交互，生成&quot;文件授权&quot;链上操作对应的上链交易体，以便使用grantorID对应的私钥对上链交易体进行确权签名。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>String</p><p>序列化的&quot;文件授权&quot;上链交易体。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//生成&quot;文件授权&quot;上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileAuthoriseTxBody</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//用grantorID中的数字身份对&quot;文件授权&quot;上链交易体进行签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> grantorPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--对&quot;文件授权&quot;上链交易体进行签名，并生成签名结果</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileAuthoriseTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> grantorPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="submit-3" tabindex="-1">submit <a class="header-anchor" href="#submit-3" aria-label="Permalink to &quot;submit&quot;">​</a></h5><p>向指定的前置节点服务器提交&quot;文件授权&quot;上链交易请求，开始进行文件授权链上操作。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> grantorPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>grantorPrivateKey String</p><p>grantorID对应的数字身份私钥。私钥用于对&quot;文件授权&quot;上链交易进行签名确权。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//--提交上链交易的授权者数字身份私钥（即链上文件所有者或分享者中的一个数字身份标识）</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> grantorPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//进行文件授权上链操作提交</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">grantorPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="submittxbody-3" tabindex="-1">submitTxBody <a class="header-anchor" href="#submittxbody-3" aria-label="Permalink to &quot;submitTxBody&quot;">​</a></h5><p>使用文件授权上链交易体原文和grantorID中数字身份对上链交易体的签名结果信息，向指定的前置节点服务器提交&quot;文件授权&quot;上链交易请求。调用此方法，onTxBlockConfirm、onTxSendSuccess等事件不会被触发。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileAuthoriseTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fileAuthoriseTxBody String</p><p>文件授权上链交易体原文</p><p>txSign String</p><p>文件授权上链交易体签名结果信息</p><p><strong>返回</strong></p><p>FileTxStatus</p><p>包含&quot;文件授权&quot;链上操作的当前处理状态信息的对象。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//【程序A】准备文件授权上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileAuthorise</span><span style="color:#A6ACCD;"> oPrepareFileAuthTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileAuthorise</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileAuthTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">88021b73bac8b248b2896278c04a4378962e51eb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileAuthTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">grantorID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> readerIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8962857bee7b48b28021b7374cfc78c0bac8e51e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">374cfc78c0ba57bee78b2896288021b7c8 e51eb4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileAuthTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">addReaders </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> readerIDs</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileAuthoriseTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oPrepareFileAuthTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序B】在外部使用数字身份签名应用进行fileAuthoriseTxBody签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileAuthoriseTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序A】提交文件授权上链交易，并跟踪链上处理状态</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileAuthorise</span><span style="color:#A6ACCD;"> oFileAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileAuthorise</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> oFileTxStatus </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileAuthoriseTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileTxStatus </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileAuthorise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAuthoriseStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="事件-3" tabindex="-1">事件 <a class="header-anchor" href="#事件-3" aria-label="Permalink to &quot;事件&quot;">​</a></h4><h5 id="ontxblockconfirm-3" tabindex="-1">onTxBlockConfirm <a class="header-anchor" href="#ontxblockconfirm-3" aria-label="Permalink to &quot;onTxBlockConfirm&quot;">​</a></h5><p>此事件在文件授权上链交易执行成功，并获得落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fAuthStatus FileTxStatus</p><p>包含&quot;文件授权&quot;链上操作的当前处理状态信息的对象。</p><p>fAuthStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，fileID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileAuthorise</span><span style="color:#A6ACCD;"> oFileAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileAuthorise</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件授权上链交易执行成功，并获得落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxblkcfmfailure-3" tabindex="-1">onTxBlkCfmFailure <a class="header-anchor" href="#ontxblkcfmfailure-3" aria-label="Permalink to &quot;onTxBlkCfmFailure&quot;">​</a></h5><p>此事件在文件授权上链交易执行失败，上链保存的文件授权被链回滚。事件触发后，会返回错误信息。文件授权上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fAuthStatus FileTxStatus</p><p>包含&quot;文件授权&quot;链上操作的当前处理状态信息的对象。</p><p>fAuthStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileAuthorise</span><span style="color:#A6ACCD;"> oFileAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileAuthorise</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件授权上链交易执行失败，上链保存的文件授权被链回滚。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。文件授权上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件授权上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件授权上链交易执行失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendsuccess-3" tabindex="-1">onTxSendSuccess <a class="header-anchor" href="#ontxsendsuccess-3" aria-label="Permalink to &quot;onTxSendSuccess&quot;">​</a></h5><p>此事件在文件授权上链交易发送成功，等待区块链执行处理时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fAuthStatus FileTxStatus</p><p>包含&quot;文件授权&quot;链上操作的当前处理状态信息的对象。</p><p>fAuthStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，txHash |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileAuthorise</span><span style="color:#A6ACCD;"> oFileAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileAuthorise</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件授权上链交易发送成功，等待区块链执行处理。 </span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件授权上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendfailure-3" tabindex="-1">onTxSendFailure <a class="header-anchor" href="#ontxsendfailure-3" aria-label="Permalink to &quot;onTxSendFailure&quot;">​</a></h5><p>此事件在文件授权上链交易发送失败时发生。文件授权上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fAuthStatus FileTxStatus</p><p>包含&quot;文件授权&quot;链上操作的当前处理状态信息的对象。</p><p>fAuthStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| errorCode，message |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileAuthorise</span><span style="color:#A6ACCD;"> oFileAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileAuthorise</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件授权上链交易发送失败。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件授权上链交易发送失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecsuccess-3" tabindex="-1">onTxExecSuccess <a class="header-anchor" href="#ontxexecsuccess-3" aria-label="Permalink to &quot;onTxExecSuccess&quot;">​</a></h5><p>此事件在文件授权上链交易执行成功，等待落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fAuthStatus FileTxStatus</p><p>包含&quot;文件授权&quot;链上操作的当前处理状态信息的对象。</p><p>fAuthStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，fileID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileAuthorise</span><span style="color:#A6ACCD;"> oFileAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileAuthorise</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件授权上链交易执行成功，等待落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件授权上链交易Hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易执行时间戳=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txExecTimestamp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块生成时间戳</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockedTimestamp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块高度=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHeight</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecfailure-3" tabindex="-1">onTxExecFailure <a class="header-anchor" href="#ontxexecfailure-3" aria-label="Permalink to &quot;onTxExecFailure&quot;">​</a></h5><p>此事件在文件授权上链交易执行失败，对指定数字身份的相应权限授权未在链上生效时发生。事件触发后会返回错误信息。文件授权上链交易请求需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fAuthStatus FileTxStatus</p><p>包含&quot;文件授权&quot;链上操作的当前处理状态信息的对象。</p><p>fAuthStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileAuthorise</span><span style="color:#A6ACCD;"> oFileAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileAuthorise</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fAuthStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件授权上链交易执行失败，对指定数字身份的相应权限授权未在链上生效。 </span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。文件授权上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件授权上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链上执行失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fAuthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onerror-3" tabindex="-1">onError <a class="header-anchor" href="#onerror-3" aria-label="Permalink to &quot;onError&quot;">​</a></h5><p>此为事件在FileAuthorise调用出现异常时发生。事件触发后返回异常信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileAuthorise</span><span style="color:#A6ACCD;"> oFileAuthorise </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileAuthorise</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：FileAuthorise调用出现异常。并返回异常信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常状态描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常信息=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="filetxstatus-status状态编码-3" tabindex="-1">FileTxStatus.status状态编码 <a class="header-anchor" href="#filetxstatus-status状态编码-3" aria-label="Permalink to &quot;FileTxStatus.status状态编码&quot;">​</a></h4><p>状态编码列表：</p><table><thead><tr><th>状态取值</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>TxSendSuccess</td><td>上链交易发送成功。</td><td>节点确认接收文件授权上链交易请求，等待区块链执行处理。</td></tr><tr><td>TxSendFailure</td><td>上链交易发送失败。</td><td>节点接收文件授权上链交易请求失败，文件授权上链交易请求需重新提交。</td></tr><tr><td>TxExecSuccess</td><td>上链交易执行成功。</td><td>文件授权上链交易执行成功，文件读取/所有者权限的数字身份标识列表上链更新成功，等待落块确认。</td></tr><tr><td>TxExecFailure</td><td>上链交易执行失败。</td><td></td></tr><tr><td>文件授权上链交易执行失败，文件读取/所有者权限的数字身份标识列表未上链更新。文件授权上链交易请求需重新提交。</td><td></td><td></td></tr><tr><td>TxBlockConfirm</td><td>上链交易落块确认。</td><td>文件授权上链更新成功，并获得落块确认。</td></tr><tr><td>TxBlkCfmFailure</td><td>上链交易落块确认失败。</td><td></td></tr><tr><td>因落块确认失败，上链更新的文件读取/所有者权限的数字身份标识列表被链回滚。文件授权上链交易请求需重新提交。</td><td></td><td></td></tr></tbody></table><h3 id="filemetafetch" tabindex="-1">FileMetaFetch <a class="header-anchor" href="#filemetafetch" aria-label="Permalink to &quot;FileMetaFetch&quot;">​</a></h3><p>用于进行文件元数据获取的操作对象。</p><h4 id="构造函数-4" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数-4" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="filemetafetch-frontend-string" tabindex="-1">FileMetaFetch (Frontend, String) <a class="header-anchor" href="#filemetafetch-frontend-string" aria-label="Permalink to &quot;FileMetaFetch (Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaFetch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交链上查询请求前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileMetaFetch</span><span style="color:#A6ACCD;"> oFileMetaFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaFetch</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="filemetafetch-1" tabindex="-1">FileMetaFetch () <a class="header-anchor" href="#filemetafetch-1" aria-label="Permalink to &quot;FileMetaFetch ()&quot;">​</a></h5><p>构造一个FileMetaFetch对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaFetch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="属性-4" tabindex="-1">属性 <a class="header-anchor" href="#属性-4" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend-4" tabindex="-1">frontend <a class="header-anchor" href="#frontend-4" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain-4" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain-4" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要进行文件元数据获取的文件所在链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileid-3" tabindex="-1">fileID <a class="header-anchor" href="#fileid-3" aria-label="Permalink to &quot;fileID&quot;">​</a></h5><p>设置要进行文件元数据获取的链上文件的文件链上ID。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="versionid" tabindex="-1">versionID <a class="header-anchor" href="#versionid" aria-label="Permalink to &quot;versionID&quot;">​</a></h5><p>设置要获取的链上文件指定版本的元数据的文件版本ID。如果此属性不赋值，则默认返回最新版本（即当前版本）的文件元数据信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> versionID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fetcherid" tabindex="-1">fetcherID <a class="header-anchor" href="#fetcherid" aria-label="Permalink to &quot;fetcherID&quot;">​</a></h5><p>设置要进行文件元数据获取的获取者数字身份标识。文件获取者必须拥有文件读取权限，owners、sharers、readers中的一个数字身份标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="eventcontext-4" tabindex="-1">EventContext <a class="header-anchor" href="#eventcontext-4" aria-label="Permalink to &quot;EventContext&quot;">​</a></h5><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> eventContext </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//要获取文件元数据获取的文件在链外应用系统数据库中的唯一标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">57bee7e51eb48b2896288021b7374cfc78c0bac8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileMetaFetch</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h4 id="方法-4" tabindex="-1">方法 <a class="header-anchor" href="#方法-4" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="query" tabindex="-1">query <a class="header-anchor" href="#query" aria-label="Permalink to &quot;query&quot;">​</a></h5><p>向指定的前置节点服务器提交&quot;文件元数据获取&quot;链上查询请求，开始进行文件元数据获取链上操作。调用此方法，将会通过onSuccess 和onFailure事件返回查询结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">query</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fetcherPrivateKey String</p><p>设置要进行文件元数据获取的获取者数字身份私钥，fetcherID对应的私钥。私钥用于对&quot;文件元数据获取&quot;链上查询请求进行签名确权。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//--获取者数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileMetaFetch</span><span style="color:#A6ACCD;"> oFileMetaFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileMetaFetchStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fmFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">//事件触发条件：仅在采用异步查询方法时才会被触发</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//进行&quot;文件元数据获取&quot;链上操作提交</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileMetaFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">query</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="createrqbody" tabindex="-1">createRqBody <a class="header-anchor" href="#createrqbody" aria-label="Permalink to &quot;createRqBody&quot;">​</a></h5><p>和前置节点进行交互，生成&quot;文件元数据获取&quot;链上操作对应的链上查询请求体，以便使用获取者数字身份对应的私钥对链上查询请求体进行确权签名。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createRqBody</span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>String</p><p>序列化的&quot;文件元数据获取&quot;链上查询请求体。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//生成&quot;文件元数据获取&quot;链上查询请求体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fmFetchRqBody</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileMetaFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRqBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//用获取者数字身份对&quot;文件元数据获取&quot;链上查询请求体进行签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fmFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="queryrqbody" tabindex="-1">queryRqBody <a class="header-anchor" href="#queryrqbody" aria-label="Permalink to &quot;queryRqBody&quot;">​</a></h5><p>使用文件元数据获取链上查询请求体原文和fetcherID中数字身份对查询请求体的签名结果信息，向指定的前置节点服务器提交&quot;文件元数据获取&quot;链上查询请求。调用此方法，将会通过onSuccess 和onFailure事件返回查询结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">queryRqBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fmFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fmFetchRqBody String</p><p>文件元数据获取链上查询请求体原文</p><p>txSign String</p><p>文件元数据获取链上查询请求体签名结果信息</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//【程序A】准备&quot;文件元数据获取&quot;链上查询请求体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileMetaFetch</span><span style="color:#A6ACCD;"> oPrepareFMFetchRqBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaFetch</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFMFetchRqBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">88021b73bac8b248b2896278c04a4378962e51eb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFMFetchRqBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fetcherID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fmFetchRqBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oPrepareFMFetchRqBody</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRqBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序B】在外部使用数字身份签名应用进行fmFetchRqBody签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fmFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序A】提交&quot;文件元数据获取&quot;链上查询请求，并跟踪链上处理状态</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileMetaFetch</span><span style="color:#A6ACCD;"> oFileMetaFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaFetch</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileMetaFetch</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileMetaFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queryRqBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fmFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h4 id="事件-4" tabindex="-1">事件 <a class="header-anchor" href="#事件-4" aria-label="Permalink to &quot;事件&quot;">​</a></h4><h5 id="onsuccess" tabindex="-1">onSuccess <a class="header-anchor" href="#onsuccess" aria-label="Permalink to &quot;onSuccess&quot;">​</a></h5><p>此事件在&quot;文件元数据获取&quot;链上操作处理彻底完成，文件元数据已成功下载时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileMetaFetchStatus</span><span style="color:#A6ACCD;"> fmFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fmFetchStatus FileMetaFetchStatus</p><p>包含&quot;文件元数据获取&quot;链上操作的当前处理状态信息的对象。</p><p>fmFetchStatus中将包含如下返回信息，详细解释请参看FileMetaFetchStatus对象相关描述：</p><p>| status，errorCode，message，fileMeta |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileMetaFetch</span><span style="color:#A6ACCD;"> oFileMetaFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileMetaFetchStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fmFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">//事件触发条件：在&quot;文件元数据获取&quot;链上操作处理彻底完成，文件元数据已成功下载。</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#C792EA;">FileMeta</span><span style="color:#A6ACCD;"> oFileMetadata  </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fmFetchStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileMeta</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileMetadata</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件版本ID=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileMetadata</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">versionID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件名=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileMetadata</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileName</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件附属属性=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileMetadata</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileProperty</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onfailure" tabindex="-1">onFailure <a class="header-anchor" href="#onfailure" aria-label="Permalink to &quot;onFailure&quot;">​</a></h5><p>此事件在&quot;文件元数据获取&quot;链上操作处理失败，文件元数据未被下载时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileMetaFetchStatus</span><span style="color:#A6ACCD;"> fmFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fmFetchStatus FileMetaFetchStatus</p><p>包含&quot;文件元数据获取&quot;链上操作的当前处理状态信息的对象。</p><p>fmFetchStatus中将包含如下返回信息，详细解释请参看FileMetaFetchStatus对象相关描述：</p><p>| errorCode，message |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileMetaFetch</span><span style="color:#A6ACCD;"> oFileMetaFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onFailure</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileMetaFetchStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fmFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">//事件触发条件：在&quot;文件元数据获取&quot;链上操作处理失败，文件元数据未被下载。</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">查询失败=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fmFetchStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onerror-4" tabindex="-1">onError <a class="header-anchor" href="#onerror-4" aria-label="Permalink to &quot;onError&quot;">​</a></h5><p>此为事件在FileMetaFetch调用出现异常时发生。事件触发后返回异常信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FetchException</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileMetaFetch</span><span style="color:#A6ACCD;"> oFileMetaFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FetchException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：FileMetaFetch调用出现异常。并返回异常信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常状态描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常信息=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="filefetch" tabindex="-1">FileFetch <a class="header-anchor" href="#filefetch" aria-label="Permalink to &quot;FileFetch&quot;">​</a></h3><p>用于进行链上文件本体获取的操作对象。</p><h4 id="构造函数-5" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数-5" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="filefetch-frontend-string" tabindex="-1">FileFetch(Frontend, String) <a class="header-anchor" href="#filefetch-frontend-string" aria-label="Permalink to &quot;FileFetch(Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileFetch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交文件本体链上获取请求前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileFetch</span><span style="color:#A6ACCD;"> oFileFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileFetch</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="filefetch-1" tabindex="-1">FileFetch() <a class="header-anchor" href="#filefetch-1" aria-label="Permalink to &quot;FileFetch()&quot;">​</a></h5><p>构造一个FileFetch对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileFetch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="属性-5" tabindex="-1">属性 <a class="header-anchor" href="#属性-5" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend-5" tabindex="-1">frontend <a class="header-anchor" href="#frontend-5" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain-5" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain-5" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要获取本体的文件所在链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileid-4" tabindex="-1">fileID <a class="header-anchor" href="#fileid-4" aria-label="Permalink to &quot;fileID&quot;">​</a></h5><p>设置要获取本体的链上文件的文件链上ID。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="filepath" tabindex="-1">filePath <a class="header-anchor" href="#filepath" aria-label="Permalink to &quot;filePath&quot;">​</a></h5><p>设置要获取本体后存储路径及名称。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> filePath</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="versionid-1" tabindex="-1">versionID <a class="header-anchor" href="#versionid-1" aria-label="Permalink to &quot;versionID&quot;">​</a></h5><p>设置要获取本体的链上文件指定版本的文件版本ID。如果此属性不赋值，则默认返回最新版本（即当前版本）的文件本体。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> versionID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fetcherid-1" tabindex="-1">fetcherID <a class="header-anchor" href="#fetcherid-1" aria-label="Permalink to &quot;fetcherID&quot;">​</a></h5><p>设置要进行文件本体获取的获取者数字身份标识。文件本体获取者必须拥有文件读取权限，owners、sharers、readers中的一个数字身份标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="eventcontext-5" tabindex="-1">eventContext <a class="header-anchor" href="#eventcontext-5" aria-label="Permalink to &quot;eventContext&quot;">​</a></h5><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> eventContext </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//要获取本体的文件在链外应用系统数据库中的唯一标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">57bee7e51eb48b2896288021b7374cfc78c0bac8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileFetch</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h4 id="方法-5" tabindex="-1">方法 <a class="header-anchor" href="#方法-5" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="query-1" tabindex="-1">query <a class="header-anchor" href="#query-1" aria-label="Permalink to &quot;query&quot;">​</a></h5><p>向指定的前置节点服务器提交文件本体链上获取请求。调用此方法，将会通过onSuccess 和onFailure事件返回获取结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">query</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fetcherPrivateKey String</p><p>设置要进行文件本体获取的获取者数字身份私钥，fetcherID对应的私钥。私钥用于对文件本体链上获取请求进行签名确权。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//--获取者数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//进行&quot;文件本体获取&quot;链上操作提交</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">query</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="createrqbody-1" tabindex="-1">createRqBody <a class="header-anchor" href="#createrqbody-1" aria-label="Permalink to &quot;createRqBody&quot;">​</a></h5><p>和前置节点进行交互，生成文件本体链上获取请求体，以便使用fetcherID对应的私钥对文件本体链上获取请求体进行确权签名。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createRqBody</span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>String</p><p>序列化的文件本体链上获取请求体。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//生成文件本体链上获取请求体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileFetchRqBody</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRqBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//用获取者数字身份对文件本体链上获取请求体进行签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="queryrqbody-1" tabindex="-1">queryRqBody <a class="header-anchor" href="#queryrqbody-1" aria-label="Permalink to &quot;queryRqBody&quot;">​</a></h5><p>使用文件本体链上获取请求体原文和fetcherID中数字身份对获取请求体的签名结果信息，向指定的前置节点服务器提交文件本体链上获取请求。调用此方法，将会通过onSuccess 和onFailure事件返回获取结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">queryRqBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fileFetchRqBody String</p><p>文件本体链上获取请求体原文</p><p>txSign String</p><p>文件本体链上获取请求体签名结果信息</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//【程序A】准备文件本体链上获取请求体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileFetch</span><span style="color:#A6ACCD;"> oPrepareFileFetchRqBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileFetch</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileFetchRqBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">88021b73bac8b248b2896278c04a4378962e51eb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileFetchRqBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fetcherID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileFetchRqBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oPrepareFileFetchRqBody</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRqBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序B】在外部使用数字身份签名应用进行fileFetchRqBody签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序A】提交文件本体链上获取请求</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileFetch</span><span style="color:#A6ACCD;"> oFileFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileFetch</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileFetch</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queryRqBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h4 id="事件-5" tabindex="-1">事件 <a class="header-anchor" href="#事件-5" aria-label="Permalink to &quot;事件&quot;">​</a></h4><h5 id="onsuccess-1" tabindex="-1">onSuccess <a class="header-anchor" href="#onsuccess-1" aria-label="Permalink to &quot;onSuccess&quot;">​</a></h5><p>此事件在&quot;文件本体获取&quot;链上操作处理彻底完成，文件本体已成功下载时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileFetchStatus</span><span style="color:#A6ACCD;"> fFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fFetchStatus FileFetchStatus</p><p>包含&quot;文件本体获取&quot;链上操作的当前处理状态信息的对象。</p><p>fFetchStatus中将包含如下返回信息，详细解释请参看FileFetchStatus对象相关描述：</p><p>| status，errorCode，message，fileBody |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileFetch</span><span style="color:#A6ACCD;"> oFileFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileFetchStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：在&quot;文件本体获取&quot;链上操作处理彻底完成，文件本体已成功下载。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//下载的文件本体</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">File</span><span style="color:#A6ACCD;"> oFile </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fFetchStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileBody</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onfailure-1" tabindex="-1">onFailure <a class="header-anchor" href="#onfailure-1" aria-label="Permalink to &quot;onFailure&quot;">​</a></h5><p>此事件在&quot;文件本体获取&quot;链上操作处理失败，文件本体未被下载时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileFetchStatus</span><span style="color:#A6ACCD;"> fFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fFetchStatus FileFetchStatus</p><p>包含&quot;文件本体获取&quot;链上操作的当前处理状态信息的对象。</p><p>fFetchStatus中将包含如下返回信息，详细解释请参看FileFetchStatus对象相关描述：</p><p>| errorCode，message |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileFetch</span><span style="color:#A6ACCD;"> oFileFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileFetchStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">//事件触发条件：在&quot;文件本体获取&quot;链上操作处理失败，文件本体未被下载。</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">查询失败=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fFetchStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onerror-5" tabindex="-1">onError <a class="header-anchor" href="#onerror-5" aria-label="Permalink to &quot;onError&quot;">​</a></h5><p>此为事件在FileFetch调用出现异常时发生。事件触发后返回异常信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FetchException</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileFetch</span><span style="color:#A6ACCD;"> oFileFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FetchException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：FileFetch调用出现异常。并返回异常信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常状态描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常信息=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="filedelete" tabindex="-1">FileDelete <a class="header-anchor" href="#filedelete" aria-label="Permalink to &quot;FileDelete&quot;">​</a></h3><p>用于进行结构文件删除的操作对象。</p><h4 id="构造函数-6" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数-6" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="filedelete-frontend-string" tabindex="-1">FileDelete (Frontend, String) <a class="header-anchor" href="#filedelete-frontend-string" aria-label="Permalink to &quot;FileDelete (Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileDelete</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交文件删除前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileDelete</span><span style="color:#A6ACCD;"> oFileDelete </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileDelete</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="filedelete-1" tabindex="-1">FileDelete() <a class="header-anchor" href="#filedelete-1" aria-label="Permalink to &quot;FileDelete()&quot;">​</a></h5><p>构造一个FileDelete对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileDelete</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="属性-6" tabindex="-1">属性 <a class="header-anchor" href="#属性-6" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend-6" tabindex="-1">frontend <a class="header-anchor" href="#frontend-6" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain-6" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain-6" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要删除文件的链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileid-5" tabindex="-1">fileID <a class="header-anchor" href="#fileid-5" aria-label="Permalink to &quot;fileID&quot;">​</a></h5><p>设置要删除的链上文件的文件链上ID。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ownerid-2" tabindex="-1">ownerID <a class="header-anchor" href="#ownerid-2" aria-label="Permalink to &quot;ownerID&quot;">​</a></h5><p>设置文件所有者的数字身份标识。只有文件所有者才有权提交文件删除。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="eventcontext-6" tabindex="-1">EventContext <a class="header-anchor" href="#eventcontext-6" aria-label="Permalink to &quot;EventContext&quot;">​</a></h5><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> eventContext </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//要删除的文件在链外应用系统数据库中的唯一标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">57bee7e51eb48b2896288021b7374cfc78c0bac8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileDelete</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h4 id="方法-6" tabindex="-1">方法 <a class="header-anchor" href="#方法-6" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="submit-4" tabindex="-1">submit <a class="header-anchor" href="#submit-4" aria-label="Permalink to &quot;submit&quot;">​</a></h5><p>向指定的前置节点服务器提交&quot;文件删除&quot;上链交易请求。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submit</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>ownerPrivateKey String</p><p>设置要删除的链上文件所有者的数字身份私钥，ownerID对应的私钥。私钥用于对&quot;文件删除&quot;上链交易进行签名确权。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//--链上文件所有者数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//进行文件删除上链操作提交</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileDelete</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="createtxbody-4" tabindex="-1">createTxBody <a class="header-anchor" href="#createtxbody-4" aria-label="Permalink to &quot;createTxBody&quot;">​</a></h5><p>和前置节点进行交互，生成&quot;文件删除&quot;链上操作对应的上链交易体，以便使用ownerID对应的私钥对上链交易体进行确权签名。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>String</p><p>序列化的&quot;文件删除&quot;上链交易体。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//生成&quot;文件删除&quot;上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileDeleteTxBody</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileDelete</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//用文件所有者数字身份对&quot;文件删除&quot;上链交易体进行签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--对&quot;文件删除&quot;上链交易体进行签名，并生成签名结果</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileDeleteTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="submittxbody-4" tabindex="-1">submitTxBody <a class="header-anchor" href="#submittxbody-4" aria-label="Permalink to &quot;submitTxBody&quot;">​</a></h5><p>使用文件删除上链交易体原文和ownerID中数字身份对上链交易体的签名结果信息，向指定的前置节点服务器提交&quot;文件删除&quot;上链交易请求。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> FileDeleteTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>FileDeleteTxBody String</p><p>文件删除上链交易体原文</p><p>txSign String</p><p>文件删除上链交易体签名结果信息</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//【程序A】准备文件删除上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileDelete</span><span style="color:#A6ACCD;"> oPrepareFileDeleteTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileDelete</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileDeleteTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">88021b73bac8b248b2896278c04a4378962e51eb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFileDeleteTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ownerID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileDeleteTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oPrepareFileDeleteTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序B】在外部使用数字身份签名应用进行fileDeleteTxBody签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">FileDeleteTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序A】提交文件删除上链交易，并跟踪链上处理状态</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileDelete</span><span style="color:#A6ACCD;"> oFileDelete </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileDelete</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileDelete</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> oFileTxStatus </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileDelete</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileDeleteTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h4 id="事件-6" tabindex="-1">事件 <a class="header-anchor" href="#事件-6" aria-label="Permalink to &quot;事件&quot;">​</a></h4><h5 id="ontxblockconfirm-4" tabindex="-1">onTxBlockConfirm <a class="header-anchor" href="#ontxblockconfirm-4" aria-label="Permalink to &quot;onTxBlockConfirm&quot;">​</a></h5><p>此事件在文件删除上链交易执行成功，并获得落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fDeleteStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fDeleteStatus FileTxStatus</p><p>包含&quot;文件删除&quot;上链交易的当前处理状态信息的对象。</p><p>fDeleteStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，fileID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileDelete</span><span style="color:#A6ACCD;"> oFileDelete </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileDelete</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fDeleteStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件删除上链交易执行成功，并获得落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fDeleteStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxblkcfmfailure-4" tabindex="-1">onTxBlkCfmFailure <a class="header-anchor" href="#ontxblkcfmfailure-4" aria-label="Permalink to &quot;onTxBlkCfmFailure&quot;">​</a></h5><p>此事件在文件删除上链交易落块确认失败，删除状态变更被链回滚时发生。事件触发后，会返回错误信息。文件删除上链交易需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fDeleteStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fDeleteStatus FileTxStatus</p><p>包含&quot;文件删除&quot;上链交易的当前处理状态信息的对象。</p><p>fDeleteStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileDelete</span><span style="color:#A6ACCD;"> oFileDelete </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileDelete</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fDeleteStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件删除上链交易落块确认失败，删除状态变更被链回滚。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。文件删除上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fDeleteStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件删除上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件删除上链交易落块确认失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fDeleteStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendsuccess-4" tabindex="-1">onTxSendSuccess <a class="header-anchor" href="#ontxsendsuccess-4" aria-label="Permalink to &quot;onTxSendSuccess&quot;">​</a></h5><p>此事件在文件删除上链交易发送成功，等待区块链执行处理时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fDeleteStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fDeleteStatus FileTxStatus</p><p>包含&quot;文件删除&quot;上链交易的当前处理状态信息的对象。</p><p>fDeleteStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，txHash |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileDelete</span><span style="color:#A6ACCD;"> oFileDelete </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileDelete</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fDeleteStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件删除上链交易发送成功，等待区块链执行处理。 </span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fDeleteStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件删除上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendfailure-4" tabindex="-1">onTxSendFailure <a class="header-anchor" href="#ontxsendfailure-4" aria-label="Permalink to &quot;onTxSendFailure&quot;">​</a></h5><p>此事件在文件删除上链交易发送失败时发生。文件删除上链交易需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fDeleteStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fDeleteStatus FileTxStatus</p><p>包含&quot;文件删除&quot;上链交易的当前处理状态信息的对象。</p><p>fDeleteStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| errorCode，message |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileDelete</span><span style="color:#A6ACCD;"> oFileDelete </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileDelete</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fDeleteStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件删除上链交易发送失败。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件删除上链交易发送失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fDeleteStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecsuccess-4" tabindex="-1">onTxExecSuccess <a class="header-anchor" href="#ontxexecsuccess-4" aria-label="Permalink to &quot;onTxExecSuccess&quot;">​</a></h5><p>此事件在文件删除上链交易执行成功，等待落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fDeleteStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fDeleteStatus FileTxStatus</p><p>包含&quot;文件删除&quot;上链交易的当前处理状态信息的对象。</p><p>fDeleteStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，fileID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileDelete</span><span style="color:#A6ACCD;"> oFileDelete </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileDelete</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fDeleteStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件删除上链交易执行成功，等待落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fDeleteStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件删除上链交易Hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易执行时间戳=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txExecTimestamp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块生成时间戳</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockedTimestamp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块高度=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHeight</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecfailure-4" tabindex="-1">onTxExecFailure <a class="header-anchor" href="#ontxexecfailure-4" aria-label="Permalink to &quot;onTxExecFailure&quot;">​</a></h5><p>此事件在文件删除上链交易执行失败，删除状态变更未在链上生效时发生。事件触发后会返回错误信息。文件删除上链交易需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fMetaUpdStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fDeleteStatus FileTxStatus</p><p>包含&quot;文件删除&quot;上链交易的当前处理状态信息的对象。</p><p>fDeleteStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileDelete</span><span style="color:#A6ACCD;"> oFileDelete </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileDelete</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fDeleteStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件删除上链交易执行失败，删除状态变更未在链上生效。 </span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。删除状态变更上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fDeleteStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">删除状态变更上链交易Hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易执行时间戳=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txExecTimestamp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块生成时间戳</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockedTimestamp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块高度=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHeight</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链上执行失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fDeleteStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onerror-6" tabindex="-1">onError <a class="header-anchor" href="#onerror-6" aria-label="Permalink to &quot;onError&quot;">​</a></h5><p>此为事件在FileDelete调用出现异常时发生。事件触发后返回异常信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileDelete</span><span style="color:#A6ACCD;"> oFileDelete </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileDelete</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：FileDelete调用出现异常。并返回异常信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常状态描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常信息=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="filetxstatus-status状态编码-4" tabindex="-1">FileTxStatus.status状态编码 <a class="header-anchor" href="#filetxstatus-status状态编码-4" aria-label="Permalink to &quot;FileTxStatus.status状态编码&quot;">​</a></h4><p>状态编码列表：</p><table><thead><tr><th>状态取值</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>TxSendSuccess</td><td>上链交易发送成功。</td><td>节点确认接收文件删除上链交易请求，等待区块链执行处理。</td></tr><tr><td>TxSendFailure</td><td>上链交易发送失败。</td><td>节点接收文件删除上链交易请求失败，文件删除上链交易请求需重新提交。</td></tr><tr><td>TxExecSuccess</td><td>上链交易执行成功。</td><td>文件删除上链交易执行成功，等待落块确认。</td></tr><tr><td>TxExecFailure</td><td>上链交易执行失败。</td><td>文件删除上链交易执行失败，删除状态变更未在链上生效。文件删除上链交易请求需重新提交。</td></tr><tr><td>TxBlockConfirm</td><td>上链交易落块确认。</td><td>文件删除上链交易执行成功，并获得落块确认</td></tr><tr><td>TxBlkCfmFailure</td><td>上链交易落块确认失败。</td><td>因落块确认失败，删除状态变更被链回滚。文件删除上链交易请求需重新提交。</td></tr></tbody></table><h3 id="fileemptyapply" tabindex="-1">FileEmptyApply <a class="header-anchor" href="#fileemptyapply" aria-label="Permalink to &quot;FileEmptyApply&quot;">​</a></h3><p>用于进行文件本体审批清空申请的操作对象。文件本体清空前必须满足以下条件：</p><ul><li>在进行文件本体清空前文件必须被设置为删除状态，否则区块链判定清空申请失败。</li><li>在文件本体清空申请时，必须将全部所有者列表中的数字身份标识添加至清空审批人列表中，否则区块链判定清空申请失败。</li><li>在文件本体清空申请时，文件本体清空审批人列表中必须包含除所有者之外的数字身份标识参与清空审批，否则区块链判定清空申请失败。</li></ul><h4 id="构造函数-7" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数-7" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="fileemptyapply-frontend-string" tabindex="-1">FileEmptyApply (Frontend, String) <a class="header-anchor" href="#fileemptyapply-frontend-string" aria-label="Permalink to &quot;FileEmptyApply (Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApply</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交文件本体清空申请前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileEmptyApply</span><span style="color:#A6ACCD;"> oFileEmptyApply </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApply</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="fileemptyapply-1" tabindex="-1">FileEmptyApply() <a class="header-anchor" href="#fileemptyapply-1" aria-label="Permalink to &quot;FileEmptyApply()&quot;">​</a></h5><p>构造一个FileEmptyApply对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApply</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="属性-7" tabindex="-1">属性 <a class="header-anchor" href="#属性-7" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend-7" tabindex="-1">frontend <a class="header-anchor" href="#frontend-7" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain-7" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain-7" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要清空文件本体的链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileid-6" tabindex="-1">fileID <a class="header-anchor" href="#fileid-6" aria-label="Permalink to &quot;fileID&quot;">​</a></h5><p>设置要清空文件本体的链上文件的文件链上ID。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ownerid-3" tabindex="-1">ownerID <a class="header-anchor" href="#ownerid-3" aria-label="Permalink to &quot;ownerID&quot;">​</a></h5><p>设置文件所有者的数字身份标识。只有文件所有者才有权提交清空申请。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="approvers" tabindex="-1">approvers <a class="header-anchor" href="#approvers" aria-label="Permalink to &quot;approvers&quot;">​</a></h5><p>设置参与清空审批的数字身份标识列表。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> approvers </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//--设置清空审批人的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> approverIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8962857bee7b48b28021b7374cfc78c0bac8e51e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">374cfc78c0ba57bee78b2896288021b7c8 e51eb4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileEmptyApply</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">approvers </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> approverIDs</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h5 id="eventcontext-7" tabindex="-1">eventContext <a class="header-anchor" href="#eventcontext-7" aria-label="Permalink to &quot;eventContext&quot;">​</a></h5><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> eventContext </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//要清空文件本体的文件在链外应用系统数据库中的唯一标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">57bee7e51eb48b2896288021b7374cfc78c0bac8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileEmptyApply</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h4 id="方法-7" tabindex="-1">方法 <a class="header-anchor" href="#方法-7" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="submit-5" tabindex="-1">submit <a class="header-anchor" href="#submit-5" aria-label="Permalink to &quot;submit&quot;">​</a></h5><p>向指定的前置节点服务器提交&quot;文件本体清空申请&quot;上链交易请求。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submit</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>ownerPrivateKey String</p><p>设置要清空的链上文件所有者的数字身份私钥，ownerID对应的私钥。私钥用于对&quot;文件本体清空申请&quot;上链交易进行签名确权。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//--链上文件所有者数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//进行文件本体清空申请上链操作提交</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileEmptyApply</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="createtxbody-5" tabindex="-1">createTxBody <a class="header-anchor" href="#createtxbody-5" aria-label="Permalink to &quot;createTxBody&quot;">​</a></h5><p>和前置节点进行交互，生成&quot;文件本体清空申请&quot;链上操作对应的上链交易体，以便使用文件所有者数字身份对应的私钥对上链交易体进行确权签名。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createTxBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>String</p><p>序列化的&quot;文件本体清空申请&quot;上链交易体。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//生成&quot;文件本体清空申请&quot;上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileEmptyApplyTxBody</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileEmptyApply</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//用文件所有者数字身份对&quot;文件本体清空申请&quot;上链交易体进行签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//对&quot;文件本体清空申请&quot;上链交易体进行签名，并生成签名结果</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fileEmptyApplyTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="submittxbody-5" tabindex="-1">submitTxBody <a class="header-anchor" href="#submittxbody-5" aria-label="Permalink to &quot;submitTxBody&quot;">​</a></h5><p>使用文件本体清空申请上链交易体原文和文件所有者数字身份对上链交易体的签名结果信息，向指定的前置节点服务器提交&quot;文件本体清空申请&quot;上链交易请求。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileEmptyApplyTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fileEmptyApplyTxBody String</p><p>文件本体清空申请上链交易体原文</p><p>txSign String</p><p>文件本体清空申请上链交易体签名结果信息</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//【程序A】准备文件本体清空申请上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileEmptyApply</span><span style="color:#A6ACCD;"> oPrepareFEmptyApplyTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApply</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFEmptyApplyTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">88021b73bac8b248b2896278c04a4378962e51eb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFEmptyApplyTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ownerID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--设置清空审批人的数字身份标识列表</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> approverIDs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e51eb48b57bee72896288021bcfc78c0bac87374</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8962857bee7b48b28021b7374cfc78c0bac8e51e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">374cfc78c0ba57bee78b2896288021b7c8 e51eb4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFEmptyApplyTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">approvers </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> approverIDs</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fEmptyApplyTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oPrepareFEmptyApplyTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序B】在外部使用数字身份签名应用进行fEmptyApplyTxBody签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> ownerPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fEmptyApplyTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ownerPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序A】提交文件本体清空申请上链交易，并跟踪链上处理状态</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileEmptyApply</span><span style="color:#A6ACCD;"> oFileEmptyApply </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApply</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileEmptyApply</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> oFEmptyApplyStatus </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileEmptyApply</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fEmptyApplyTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h4 id="事件-7" tabindex="-1">事件 <a class="header-anchor" href="#事件-7" aria-label="Permalink to &quot;事件&quot;">​</a></h4><h5 id="ontxblockconfirm-5" tabindex="-1">onTxBlockConfirm <a class="header-anchor" href="#ontxblockconfirm-5" aria-label="Permalink to &quot;onTxBlockConfirm&quot;">​</a></h5><p>此事件在清空申请上链交易执行成功，并获得落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fEmptyApplyStatus FileTxStatus</p><p>包含&quot;文件本体清空申请&quot;上链交易的当前处理状态信息的对象。</p><p>fEmptyApplyStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，fileID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileEmptyApply</span><span style="color:#A6ACCD;"> oFileEmptyApply </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApply</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fEmptyApplyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：清空申请上链交易执行成功，并获得落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxblkcfmfailure-5" tabindex="-1">onTxBlkCfmFailure <a class="header-anchor" href="#ontxblkcfmfailure-5" aria-label="Permalink to &quot;onTxBlkCfmFailure&quot;">​</a></h5><p>此事件在清空申请上链交易落块确认失败，清空申请被链回滚时发生。事件触发后，会返回错误信息。清空申请上链交易需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fEmptyApplyStatus FileTxStatus</p><p>包含&quot;文件本体清空申请&quot;上链交易的当前处理状态信息的对象。</p><p>fEmptyApplyStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileEmptyApply</span><span style="color:#A6ACCD;"> oFileEmptyApply </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApply</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fEmptyApplyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：清空申请上链交易落块确认失败，清空申请被链回滚。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。清空申请上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">清空申请上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">清空申请上链交易落块确认失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendsuccess-5" tabindex="-1">onTxSendSuccess <a class="header-anchor" href="#ontxsendsuccess-5" aria-label="Permalink to &quot;onTxSendSuccess&quot;">​</a></h5><p>此事件在清空申请上链交易发送成功，等待区块链执行处理时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fEmptyApplyStatus FileTxStatus</p><p>包含&quot;文件本体清空申请&quot;上链交易的当前处理状态信息的对象。</p><p>fEmptyApplyStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，txHash |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileEmptyApply</span><span style="color:#A6ACCD;"> oFileEmptyApply </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApply</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fEmptyApplyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：清空申请上链交易发送成功，等待区块链执行处理。 </span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">清空申请上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendfailure-5" tabindex="-1">onTxSendFailure <a class="header-anchor" href="#ontxsendfailure-5" aria-label="Permalink to &quot;onTxSendFailure&quot;">​</a></h5><p>此事件在清空申请上链交易发送失败时发生。文件本体清空申请上链交易需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fEmptyApplyStatus FileTxStatus</p><p>包含&quot;文件本体清空申请&quot;上链交易的当前处理状态信息的对象。</p><p>fEmptyApplyStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| errorCode，message |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileEmptyApply</span><span style="color:#A6ACCD;"> oFileEmptyApply </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApply</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fEmptyApplyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：清空申请上链交易发送失败。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">清空申请上链交易发送失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecsuccess-5" tabindex="-1">onTxExecSuccess <a class="header-anchor" href="#ontxexecsuccess-5" aria-label="Permalink to &quot;onTxExecSuccess&quot;">​</a></h5><p>此事件在清空申请上链交易执行成功，等待落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fEmptyApplyStatus FileTxStatus</p><p>包含&quot;文件本体清空申请&quot;上链交易的当前处理状态信息的对象。</p><p>fEmptyApplyStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，fileID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileEmptyApply</span><span style="color:#A6ACCD;"> oFileEmptyApply </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApply</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fEmptyApplyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：清空申请上链交易执行成功，等待落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">清空申请上链交易Hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易执行时间戳=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txExecTimestamp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块生成时间戳</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockedTimestamp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块高度=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHeight</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecfailure-5" tabindex="-1">onTxExecFailure <a class="header-anchor" href="#ontxexecfailure-5" aria-label="Permalink to &quot;onTxExecFailure&quot;">​</a></h5><p>此事件在清空申请上链交易执行失败，清空审批人名单未在链上生效时发生。事件触发后会返回错误信息。文件本体清空申请上链交易需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fEmptyApplyStatus FileTxStatus</p><p>包含&quot;文件本体清空申请&quot;上链交易的当前处理状态信息的对象。</p><p>fEmptyApplyStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileEmptyApply</span><span style="color:#A6ACCD;"> oFileEmptyApply </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApply</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fEmptyApplyStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：清空申请上链交易执行失败，清空审批人名单未在链上生效。 </span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。清空申请上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">清空申请上链交易Hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易执行时间戳=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txExecTimestamp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块生成时间戳</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockedTimestamp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块高度=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHeight</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链上执行失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onerror-7" tabindex="-1">onError <a class="header-anchor" href="#onerror-7" aria-label="Permalink to &quot;onError&quot;">​</a></h5><p>此为事件在FileEmptyApply调用出现异常时发生。事件触发后返回异常信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileEmptyApply</span><span style="color:#A6ACCD;"> oFileEmptyApply </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApply</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：FileEmptyApply调用出现异常。并返回异常信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常状态描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常信息=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="filetxstatus-status状态编码-5" tabindex="-1">FileTxStatus.status状态编码 <a class="header-anchor" href="#filetxstatus-status状态编码-5" aria-label="Permalink to &quot;FileTxStatus.status状态编码&quot;">​</a></h4><p>状态编码列表：</p><table><thead><tr><th>状态取值</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>TxSendSuccess</td><td>上链交易发送成功。</td><td>节点确认接收文件本体清空申请上链交易请求，等待区块链执行处理。</td></tr><tr><td>TxSendFailure</td><td>上链交易发送失败。</td><td>节点接收文件本体清空申请上链交易请求失败，文件本体清空申请上链交易请求需重新提交。</td></tr><tr><td>TxExecSuccess</td><td>上链交易执行成功。</td><td>文件本体清空申请上链交易执行成功，等待落块确认。</td></tr><tr><td>TxExecFailure</td><td>上链交易执行失败。</td><td></td></tr><tr><td>文件本体清空申请上链交易执行失败，清空审批人名单未在链上生效。文件本体清空申请上链交易请求需重新提交。</td><td></td><td></td></tr><tr><td>TxBlockConfirm</td><td>上链交易落块确认。</td><td>文件本体清空申请上链更新成功，并获得落块确认。</td></tr><tr><td>TxBlkCfmFailure</td><td>上链交易落块确认失败。</td><td>因落块确认失败，清空申请被链回滚。文件本体清空申请上链交易请求需重新提交。</td></tr></tbody></table><h3 id="fileemptyapprove" tabindex="-1">FileEmptyApprove <a class="header-anchor" href="#fileemptyapprove" aria-label="Permalink to &quot;FileEmptyApprove&quot;">​</a></h3><p>用于进行文件本体清空审批的操作对象。</p><p>所有文件本体清空审批列表中的审批人必须均同意清空，否则清空申请审批失败。清空申请审批通过后，区块链会将指定的链上文件的所有版本的文件本体彻底从区块链节点网络中清除（即文件本体将不再保存于链上），但文件的所有版本的元数据仍会保留在链上，以便事后审计。</p><h4 id="构造函数-8" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数-8" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="fileemptyapprove-frontend-string" tabindex="-1">FileEmptyApprove (Frontend, String) <a class="header-anchor" href="#fileemptyapprove-frontend-string" aria-label="Permalink to &quot;FileEmptyApprove (Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApprove</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交文件本体清空审批请求前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileEmptyApprove</span><span style="color:#A6ACCD;"> oFileEmptyApprove </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApprove</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="fileemptyapprove-1" tabindex="-1">FileEmptyApprove () <a class="header-anchor" href="#fileemptyapprove-1" aria-label="Permalink to &quot;FileEmptyApprove ()&quot;">​</a></h5><p>构造一个FileEmptyApprove对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApprove</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="属性-8" tabindex="-1">属性 <a class="header-anchor" href="#属性-8" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend-8" tabindex="-1">frontend <a class="header-anchor" href="#frontend-8" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain-8" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain-8" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要进行清空审批的文件所在的链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileid-7" tabindex="-1">fileID <a class="header-anchor" href="#fileid-7" aria-label="Permalink to &quot;fileID&quot;">​</a></h5><p>设置要清空审批的链上文件的文件链上ID。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="approverid" tabindex="-1">approverID <a class="header-anchor" href="#approverid" aria-label="Permalink to &quot;approverID&quot;">​</a></h5><p>设置清空审批人的数字身份标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> approverID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="reply" tabindex="-1">reply <a class="header-anchor" href="#reply" aria-label="Permalink to &quot;reply&quot;">​</a></h5><p>设置审批结论（1 同意删除 2 拒绝删除）。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> reply </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="eventcontext-8" tabindex="-1">eventContext <a class="header-anchor" href="#eventcontext-8" aria-label="Permalink to &quot;eventContext&quot;">​</a></h5><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> eventContext </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//要清空审批的文件在链外应用系统数据库中的唯一标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">57bee7e51eb48b2896288021b7374cfc78c0bac8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    FileEmptyApprove</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h4 id="方法-8" tabindex="-1">方法 <a class="header-anchor" href="#方法-8" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="submit-6" tabindex="-1">submit <a class="header-anchor" href="#submit-6" aria-label="Permalink to &quot;submit&quot;">​</a></h5><p>向指定的前置节点服务器提交&quot;文件本体清空审批&quot;上链交易请求。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submit</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> approverPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>approverPrivateKey String</p><p>设置清空审批人的数字身份私钥，approverID对应的私钥。私钥用于对&quot;文件本体清空审批&quot;上链交易进行签名确权。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//--清空审批人的数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> approverPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//进行文件本体清空审批上链交易提交</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFEmptyApprove</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submit</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">approverPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="createtxbody-6" tabindex="-1">createTxBody <a class="header-anchor" href="#createtxbody-6" aria-label="Permalink to &quot;createTxBody&quot;">​</a></h5><p>和前置节点进行交互，生成&quot;文件本体清空审批&quot;链上操作对应的上链交易体，以便使用approverID对应的私钥对上链交易体进行确权签名。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>String</p><p>序列化的&quot;文件本体清空审批&quot;上链交易体。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//生成&quot;文件本体清空审批&quot;上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fEmptyApproveTxBody</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileEmptyApprove</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//用清空审批人数字身份对&quot;文件本体清空审批&quot;上链交易体进行签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> approverPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--对&quot;文件本体清空审批&quot;上链交易体进行签名，并生成签名结果</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fEmptyApproveTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> approverPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="submittxbody-6" tabindex="-1">submitTxBody <a class="header-anchor" href="#submittxbody-6" aria-label="Permalink to &quot;submitTxBody&quot;">​</a></h5><p>使用文件本体清空审批上链交易体原文和approverID中数字身份对上链交易体的签名结果信息，向指定的前置节点服务器提交&quot;文件本体清空审批&quot;上链交易请求。调用此方法，将会通过onTxBlockConfirm、onTxSendSuccess等事件返回链上处理结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fEmptyApproveTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fEmptyApproveTxBody String</p><p>文件本体清空审批上链交易体原文</p><p>txSign String</p><p>文件本体清空审批上链交易体签名结果信息</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//【程序A】准备文件本体清空审批上链交易体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileEmptyApprove</span><span style="color:#A6ACCD;"> oPrepareFMTApproveTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApprove</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFMTApproveTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">88021b73bac8b248b2896278c04a4378962e51eb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFMTApproveTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">approverID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFMTApproveTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">reply </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fEmptyApproveTxBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oPrepareFMTApproveTxBody</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createTxBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序B】在外部使用数字身份签名应用进行fEmptyApproveTxBody签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> approverPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3161be862236ae966004390908a5facb8f45763e38ce5cfb378e493f91a7873d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fEmptyApproveTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> approverPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序A】提交文件本体清空审批上链交易，并跟踪链上处理状态</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileEmptyApprove</span><span style="color:#A6ACCD;"> oFEmptyApprove </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApprove</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFEmptyApprove</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> oFEmptyApproveStatus </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFEmptyApprove</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">submitTxBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fEmptyApproveTxBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h4 id="事件-8" tabindex="-1">事件 <a class="header-anchor" href="#事件-8" aria-label="Permalink to &quot;事件&quot;">​</a></h4><h5 id="ontxblockconfirm-6" tabindex="-1">onTxBlockConfirm <a class="header-anchor" href="#ontxblockconfirm-6" aria-label="Permalink to &quot;onTxBlockConfirm&quot;">​</a></h5><p>此事件在清空审批上链交易执行成功，并获得落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fEmptyApproveStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fEmptyApproveStatus FileTxStatus</p><p>包含&quot;文件本体清空审批&quot;上链交易的当前处理状态信息的对象。</p><p>fEmptyApproveStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，fileID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileEmptyApprove</span><span style="color:#A6ACCD;"> oFileEmptyApprove </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApprove</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockConfirm</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fEmptyAproveStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：清空审批上链交易执行成功，并获得落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fEmptyAproveStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxblkcfmfailure-6" tabindex="-1">onTxBlkCfmFailure <a class="header-anchor" href="#ontxblkcfmfailure-6" aria-label="Permalink to &quot;onTxBlkCfmFailure&quot;">​</a></h5><p>此事件在清空审批上链交易落块确认失败，清空审批被链回滚时发生。事件触发后，会返回错误信息。清空审批上链交易需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fEmptyApproveStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fEmptyApproveStatus FileTxStatus</p><p>包含&quot;文件本体清空审批&quot;上链交易的当前处理状态信息的对象。</p><p>fEmptyApproveStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileEmptyApprove</span><span style="color:#A6ACCD;"> oFileEmptyApprove </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApprove</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxBlockCfmFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fEmptyApproveStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">         </span><span style="color:#676E95;font-style:italic;">//事件触发条件：清空审批上链交易落块确认失败，清空审批被链回滚。</span></span>
<span class="line"><span style="color:#89DDFF;">         </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。清空审批上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">         System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fEmptyApproveStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">         System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">清空审批上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">         System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">清空审批上链交易落块确认失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fEmptyApproveStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendsuccess-6" tabindex="-1">onTxSendSuccess <a class="header-anchor" href="#ontxsendsuccess-6" aria-label="Permalink to &quot;onTxSendSuccess&quot;">​</a></h5><p>此事件在清空审批上链交易发送成功，等待区块链执行处理时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fEmptyApproveStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fEmptyApproveStatus FileTxStatus</p><p>包含&quot;文件本体清空审批&quot;上链交易的当前处理状态信息的对象。</p><p>fEmptyApproveStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，txHash |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileEmptyApprove</span><span style="color:#A6ACCD;"> oFileEmptyApprove </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApprove</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fEmptyApproveStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：清空审批上链交易发送成功，等待区块链执行处理。 </span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fEmptyApproveStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">清空审批上链交易Hash =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxsendfailure-6" tabindex="-1">onTxSendFailure <a class="header-anchor" href="#ontxsendfailure-6" aria-label="Permalink to &quot;onTxSendFailure&quot;">​</a></h5><p>此事件在清空审批上链交易发送失败时发生。事件触发后会返回错误信息。文件本体清空审批上链交易需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fEmptyApproveStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fEmptyApproveStatus FileTxStatus</p><p>包含&quot;文件本体清空审批&quot;上链交易的当前处理状态信息的对象。</p><p>fEmptyApproveStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| errorCode，message |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileEmptyApprove</span><span style="color:#A6ACCD;"> oFileEmptyApprove </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApprove</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxSendFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fEmptyApproveStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：清空审批上链交易发送失败。</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">清空审批上链交易发送失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fEmptyApplyStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecsuccess-6" tabindex="-1">onTxExecSuccess <a class="header-anchor" href="#ontxexecsuccess-6" aria-label="Permalink to &quot;onTxExecSuccess&quot;">​</a></h5><p>此事件在清空审批上链交易执行成功，等待落块确认时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fEmptyApproveStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fEmptyApproveStatus FileTxStatus</p><p>包含&quot;文件本体清空审批&quot;上链交易的当前处理状态信息的对象。</p><p>fEmptyApproveStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，fileID，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileEmptyApprove</span><span style="color:#A6ACCD;"> oFileEmptyApprove </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApprove</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fEmptyApproveStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：清空审批上链交易执行成功，等待落块确认。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fEmptyApproveStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">清空审批上链交易Hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易执行时间戳=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txExecTimestamp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块生成时间戳</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockedTimestamp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块高度=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHeight</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="ontxexecfailure-6" tabindex="-1">onTxExecFailure <a class="header-anchor" href="#ontxexecfailure-6" aria-label="Permalink to &quot;onTxExecFailure&quot;">​</a></h5><p>此事件在清空审批上链交易执行失败，清空审批结果未在链上生效时发生。事件触发后会返回错误信息。文件本体清空审批上链交易需重新提交。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> fEmptyApproveStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fEmptyApproveStatus FileTxStatus</p><p>包含&quot;文件本体清空审批&quot;上链交易的当前处理状态信息的对象。</p><p>fEmptyApproveStatus中将包含如下返回信息，详细解释请参看FileTxStatus 对象相关描述：</p><p>| status，errorCode，message，txHash，txExecTimestamp，blockHash，blockedTimestamp，blockHeight |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileEmptyApprove</span><span style="color:#A6ACCD;"> oFileEmptyApprove </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApprove</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onTxExecFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileTxStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fEmptyApproveStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：清空审批上链交易执行失败，清空审批结果未在链上生效。 </span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发后，会返回错误信息。清空审批上链交易请求需重新提交。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileTxBlockInfo</span><span style="color:#A6ACCD;"> oFileTxBlockInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fEmptyApproveStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txBlockData</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件链上ID =</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">清空审批上链交易Hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易执行时间戳=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">txExecTimestamp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块hash=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHash</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块生成时间戳</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockedTimestamp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">交易所在区块高度=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileTxBlockInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">blockHeight</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链上执行失败的返回结果=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fEmptyApproveStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onerror-8" tabindex="-1">onError <a class="header-anchor" href="#onerror-8" aria-label="Permalink to &quot;onError&quot;">​</a></h5><p>此为事件在FileEmptyApprove调用出现异常时发生。事件触发后返回异常信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileEmptyApprove</span><span style="color:#A6ACCD;"> oFileEmptyApprove </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileEmptyApprove</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">TxException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：FileEmptyApprove调用出现异常。并返回异常信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常状态描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常信息=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="filetxstatus-status状态编码-6" tabindex="-1">FileTxStatus.status状态编码 <a class="header-anchor" href="#filetxstatus-status状态编码-6" aria-label="Permalink to &quot;FileTxStatus.status状态编码&quot;">​</a></h4><p>状态编码列表：</p><table><thead><tr><th>状态取值</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>TxSendSuccess</td><td>上链交易发送成功。</td><td>节点确认接收文件本体清空审批上链交易请求，等待区块链执行处理。</td></tr><tr><td>TxSendFailure</td><td>上链交易发送失败。</td><td>节点接收文件本体清空审批上链交易请求失败，文件本体清空审批上链交易请求需重新提交。</td></tr><tr><td>TxExecSuccess</td><td>上链交易执行成功。</td><td>文件本体清空审批上链交易执行成功，等待落块确认。</td></tr><tr><td>TxExecFailure</td><td>上链交易执行失败。</td><td>文件本体清空审批上链交易执行失败，清空审批结果未在链上生效。清空审批上链交易请求需重新提交。</td></tr><tr><td>TxBlockConfirm</td><td>上链交易落块确认。</td><td>文件本体清空审批上链交易执行成功，并获得落块确认。</td></tr><tr><td>TxBlkCfmFailure</td><td>上链交易落块确认失败。</td><td>清空审批上链交易落块确认失败，清空审批被链回滚。清空审批上链交易请求需重新提交。</td></tr></tbody></table><h3 id="filedigestcheck" tabindex="-1">FileDigestCheck <a class="header-anchor" href="#filedigestcheck" aria-label="Permalink to &quot;FileDigestCheck&quot;">​</a></h3><p>用于进行链上文件验真的操作对象。</p><h4 id="构造函数-9" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数-9" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="filedigestcheck-frontend-string" tabindex="-1">FileDigestCheck (Frontend, String) <a class="header-anchor" href="#filedigestcheck-frontend-string" aria-label="Permalink to &quot;FileDigestCheck (Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileDigestCheck</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交链上查询请求前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileDigestCheck</span><span style="color:#A6ACCD;"> oFileDigestCheck </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileDigestCheck</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="filedigestcheck-1" tabindex="-1">FileDigestCheck () <a class="header-anchor" href="#filedigestcheck-1" aria-label="Permalink to &quot;FileDigestCheck ()&quot;">​</a></h5><p>构造一个FileDigestCheck对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileDigestCheck</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="属性-9" tabindex="-1">属性 <a class="header-anchor" href="#属性-9" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend-9" tabindex="-1">frontend <a class="header-anchor" href="#frontend-9" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain-9" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain-9" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要进行文件验真的文件所在链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileid-8" tabindex="-1">fileID <a class="header-anchor" href="#fileid-8" aria-label="Permalink to &quot;fileID&quot;">​</a></h5><p>设置要进行文件验真的链上文件的文件链上ID。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="versionid-2" tabindex="-1">versionID <a class="header-anchor" href="#versionid-2" aria-label="Permalink to &quot;versionID&quot;">​</a></h5><p>设置要验证的链上文件指定版本的文件版本ID。如果此属性不赋值，则默认是和链上文件的最新版本（即当前版本）的文件指纹特征信息进行验证。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> versionID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="filedigest" tabindex="-1">fileDigest <a class="header-anchor" href="#filedigest" aria-label="Permalink to &quot;fileDigest&quot;">​</a></h5><p>本地文件的本体指纹特征值，用于验证本地文件是否和链上文件的特定版本的文件本体是否是一致的，是否被篡改过。文件本体内容如有任何微小的变化，对应的指纹特征值就会发生变化。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileDigest </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="方法-9" tabindex="-1">方法 <a class="header-anchor" href="#方法-9" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="query-2" tabindex="-1">query <a class="header-anchor" href="#query-2" aria-label="Permalink to &quot;query&quot;">​</a></h5><p>以同步调用方式，向指定的前置节点服务器提交&quot;文件验真&quot;链上查询请求，开始进行文件验真链上操作。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">FileDigestCheckStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">query</span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>FileDigestCheckStatus</p><p>包含&quot;文件验真&quot;链上操作的查询结果信息。</p><h3 id="fileversionsfetch" tabindex="-1">FileVersionsFetch <a class="header-anchor" href="#fileversionsfetch" aria-label="Permalink to &quot;FileVersionsFetch&quot;">​</a></h3><p>用于进行链上文件历史版本列表获取的操作对象。</p><h4 id="构造函数-10" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数-10" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="fileversionsfetch-frontend-string" tabindex="-1">FileVersionsFetch (Frontend, String) <a class="header-anchor" href="#fileversionsfetch-frontend-string" aria-label="Permalink to &quot;FileVersionsFetch (Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileVersionsFetch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交链上获取请求前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileVersionsFetch</span><span style="color:#A6ACCD;"> oFileVerFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileVersionsFetch</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="fileversionsfetch-1" tabindex="-1">FileVersionsFetch () <a class="header-anchor" href="#fileversionsfetch-1" aria-label="Permalink to &quot;FileVersionsFetch ()&quot;">​</a></h5><p>构造一个FileVersionsFetch对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileVersionsFetch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="属性-10" tabindex="-1">属性 <a class="header-anchor" href="#属性-10" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend-10" tabindex="-1">frontend <a class="header-anchor" href="#frontend-10" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain-10" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain-10" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要获取文件版本列表的文件所在链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileid-9" tabindex="-1">fileID <a class="header-anchor" href="#fileid-9" aria-label="Permalink to &quot;fileID&quot;">​</a></h5><p>设置要获取文件版本列表的链上文件的文件链上ID。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fetcherid-2" tabindex="-1">fetcherID <a class="header-anchor" href="#fetcherid-2" aria-label="Permalink to &quot;fetcherID&quot;">​</a></h5><p>设置要获取文件版本列表的获取者数字身份标识。文件获取者必须拥有文件读取权限，owners、sharers、readers中的一个数字身份标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherIDv</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="eventcontext-9" tabindex="-1">eventContext <a class="header-anchor" href="#eventcontext-9" aria-label="Permalink to &quot;eventContext&quot;">​</a></h5><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> eventContext </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//要获取文件版本列表的文件在链外应用系统数据库中的唯一标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">57bee7e51eb48b2896288021b7374cfc78c0bac8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    FileVersionsFetch</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h4 id="方法-10" tabindex="-1">方法 <a class="header-anchor" href="#方法-10" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="query-3" tabindex="-1">query <a class="header-anchor" href="#query-3" aria-label="Permalink to &quot;query&quot;">​</a></h5><p>向指定的前置节点服务器提交&quot;文件版本列表获取&quot;链上获取请求。调用此方法，将会通过onSuccess 和onFailure事件返回查询结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">query</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fetcherPrivateKey String</p><p>设置要进行文件版本列表获取的获取者数字身份私钥，fetcherID对应的私钥。私钥用于对&quot;文件版本列表获取&quot;链上获取请求进行签名确权。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileVersionsFetch</span><span style="color:#A6ACCD;"> oFileVerFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileVersionsFetch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileVersionsFetchStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fVerFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">         </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件版本列表成功下载。</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//获取者数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//进行&quot;文件版本列表获取&quot;链上操作提交</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileVerFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">query</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="createrqbody-2" tabindex="-1">createRqBody <a class="header-anchor" href="#createrqbody-2" aria-label="Permalink to &quot;createRqBody&quot;">​</a></h5><p>和前置节点进行交互，生成&quot;文件版本列表获取&quot;链上操作对应的链上获取请求体，以便使用获取者数字身份对应的私钥对链上获取请求体进行确权签名。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createRqBody</span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>String</p><p>序列化的&quot;文件版本列表获取&quot;链上获取请求体。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//生成&quot;文件版本列表获取&quot;链上获取请求体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fVerFetchRqBody</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileVersionsFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRqBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//用获取者数字身份对&quot;文件版本列表获取&quot;链上获取请求体进行签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fVerFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="queryrqbody-2" tabindex="-1">queryRqBody <a class="header-anchor" href="#queryrqbody-2" aria-label="Permalink to &quot;queryRqBody&quot;">​</a></h5><p>使用文件版本列表获取链上获取请求体原文和fetcherID中数字身份对获取请求体的签名结果信息，向指定的前置节点服务器提交&quot;文件版本列表获取&quot;链上获取请求。调用此方法，将会通过onSuccess 和onFailure事件返回查询结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">queryRqBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fVerFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fVerFetchRqBody String</p><p>文件版本列表获取链上获取请求体原文</p><p>txSign String</p><p>文件版本列表获取链上获取请求体签名结果信息</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//【程序A】准备&quot;文件版本列表获取&quot;链上获取请求体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileVersionsFetch</span><span style="color:#A6ACCD;"> oPrepareFVerFetchRqBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileVersionsFetch</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFVerFetchRqBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">88021b73bac8b248b2896278c04a4378962e51eb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFVerFetchRqBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fetcherID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fVerFetchRqBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oPrepareFVerFetchRqBody</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRqBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序B】在外部使用数字身份签名应用进行fVerFetchRqBody签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fVerFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序A】提交&quot;文件版本列表获取&quot;链上获取请求，并跟踪链上处理状态</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileVersionsFetch</span><span style="color:#A6ACCD;"> oFileVerFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileVersionsFetch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileVerFetch</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileVerFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queryRqBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fVerFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h4 id="事件-9" tabindex="-1">事件 <a class="header-anchor" href="#事件-9" aria-label="Permalink to &quot;事件&quot;">​</a></h4><h5 id="onsuccess-2" tabindex="-1">onSuccess <a class="header-anchor" href="#onsuccess-2" aria-label="Permalink to &quot;onSuccess&quot;">​</a></h5><p>此事件在&quot;文件版本列表获取&quot;链上操作处理彻底完成，文件版本列表已成功下载时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileVersionsFetchStatus</span><span style="color:#A6ACCD;"> fVerFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fVerFetchStatus FileVersionsFetchStatus</p><p>包含&quot;文件版本列表获取&quot;链上操作的当前处理状态信息的对象。</p><p>fVerFetchStatus中将包含如下返回信息，详细解释请参看FileVersionsFetchStatus对象相关描述：</p><p>| status，errorCode，message，versions |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileVersionsFetch</span><span style="color:#A6ACCD;"> oFileVersionsFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileVersionsFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileVersionsFetchStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fVerFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：在&quot;获取文件版本列表&quot;成功下载。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">FileVersionInfo</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> oFileVersionInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fVerFetchStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">versions</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> oFileVersionInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">++)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">             System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件版本标识: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileVersionInfo</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">].</span><span style="color:#A6ACCD;">versionID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">             System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件版本的生成时间戳: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileVersionInfo</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">].</span><span style="color:#A6ACCD;">timestamp</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">             </span><span style="color:#676E95;font-style:italic;">//获取指定版本的文件元数据</span></span>
<span class="line"><span style="color:#A6ACCD;">             </span><span style="color:#C792EA;">FileMetaFetch</span><span style="color:#A6ACCD;"> oFileMetaFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileMetaFetch</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">             </span><span style="color:#676E95;font-style:italic;">//指定获取元数据的链上文件的文件链上ID。</span></span>
<span class="line"><span style="color:#A6ACCD;">             oFileMetaFetch</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">21b73bac878c04a437b28962e51eb48b28962880</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">             </span><span style="color:#676E95;font-style:italic;">//指定获取元数据的链上文件的文件版本ID。</span></span>
<span class="line"><span style="color:#A6ACCD;">             oFileMetaFetch</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">versionID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileVersionInfo</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">].</span><span style="color:#A6ACCD;">versionID</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                          </span><span style="color:#89DDFF;">......</span></span>
<span class="line"><span style="color:#89DDFF;">             </span><span style="color:#676E95;font-style:italic;">//进行&quot;文件元数据获取&quot;上链操作提交</span></span>
<span class="line"><span style="color:#A6ACCD;">             </span><span style="color:#C792EA;">FileMetaFetchStatus</span><span style="color:#A6ACCD;"> oFileMetaFetchStatus </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileMetaFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">query</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">readerPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onfailure-2" tabindex="-1">onFailure <a class="header-anchor" href="#onfailure-2" aria-label="Permalink to &quot;onFailure&quot;">​</a></h5><p>此事件在&quot;获取文件版本列表&quot;链上操作处理失败，文件版本列表未被下载时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileVersionsFetchStatus</span><span style="color:#A6ACCD;"> fVerFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fVerFetchStatus FileVersionsFetchStatus</p><p>包含&quot;文件版本列表获取&quot;链上操作的当前处理状态信息的对象。</p><p>fVerFetchStatus中将包含如下返回信息，详细解释请参看FileVersionsFetchStatus对象相关描述：</p><p>| errorCode，message |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileVersionsFetch</span><span style="color:#A6ACCD;"> oFileVersionsFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileVersionsFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileVersionsFetchStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fVerFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">//事件触发条件：在&quot;获取文件版本列表&quot;链上操作处理失败，文件版本列表未被下载。</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">查询失败=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fVerFetchStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onerror-9" tabindex="-1">onError <a class="header-anchor" href="#onerror-9" aria-label="Permalink to &quot;onError&quot;">​</a></h5><p>此为事件在FileVersionsFetch调用出现异常时发生。事件触发后返回异常信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FetchException</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileVersionsFetch</span><span style="color:#A6ACCD;"> oFileVersionsFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileVersionsFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FetchException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：FileVersionsFetch调用出现异常。并返回异常信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常状态描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常信息=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="filerightsfetch" tabindex="-1">FileRightsFetch <a class="header-anchor" href="#filerightsfetch" aria-label="Permalink to &quot;FileRightsFetch&quot;">​</a></h3><p>用于进行链上文件权限列表获取的操作对象。权限列表包括：所有者列表、分享者列表、读取者列表。</p><ul><li>文件所有者有权获取完整的所有者列表和所有者分别授权的读取者列表；完整的分享者列表和分享者分别授权的读取者列表。</li><li>文件分享者有权获取自己授权的读取者列表。</li><li>文件读取者无权获取文件权限列表。</li></ul><h4 id="构造函数-11" tabindex="-1">构造函数 <a class="header-anchor" href="#构造函数-11" aria-label="Permalink to &quot;构造函数&quot;">​</a></h4><h5 id="filerightsfetch-frontend-string" tabindex="-1">FileRightsFetch (Frontend, String) <a class="header-anchor" href="#filerightsfetch-frontend-string" aria-label="Permalink to &quot;FileRightsFetch (Frontend, String)&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileRightsFetch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>frontendServer Frontend</p><p>前置节点服务器对象。</p><p>businessDomainID String</p><p>设置要访问的业务域标识。初始化时可以为空，后续可通过bizDomain属性赋值。businessDomainID在提交链上获取请求前必须赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//初始化前置节点对象（即链上操作发送对象）</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--业务系统数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> systemPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//--前置节点调用接口地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> frontendUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://127.1.1.1:9000/fbs/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//创建前置节点对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> oFrontend </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Frontend</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">systemID</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> systemPrivateKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frontendUrl</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置要访问的业务域标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> businessDomainID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">51eb48b51eb48b2896288021b73bac878c48b289</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileRightsFetch</span><span style="color:#A6ACCD;"> oFileRightsFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileRightsFetch</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">oFrontend</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="filerightsfetch-1" tabindex="-1">FileRightsFetch () <a class="header-anchor" href="#filerightsfetch-1" aria-label="Permalink to &quot;FileRightsFetch ()&quot;">​</a></h5><p>构造一个FileRightsFetch对象。后续需赋值要访问前置节点对象和要访问的业务域。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileRightsFetch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span></code></pre></div><h4 id="属性-11" tabindex="-1">属性 <a class="header-anchor" href="#属性-11" aria-label="Permalink to &quot;属性&quot;">​</a></h4><h5 id="frontend-11" tabindex="-1">frontend <a class="header-anchor" href="#frontend-11" aria-label="Permalink to &quot;frontend&quot;">​</a></h5><p>设置要访问的前置节点服务器对象。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Frontend</span><span style="color:#A6ACCD;"> frontend </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="bizdomain-11" tabindex="-1">bizDomain <a class="header-anchor" href="#bizdomain-11" aria-label="Permalink to &quot;bizDomain&quot;">​</a></h5><p>设置要获取文件权限列表的文件所在链上业务域的唯一标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> bizDomain </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fileid-10" tabindex="-1">fileID <a class="header-anchor" href="#fileid-10" aria-label="Permalink to &quot;fileID&quot;">​</a></h5><p>设置要获取文件权限列表的链上文件的文件链上ID。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="fetcherid-3" tabindex="-1">fetcherID <a class="header-anchor" href="#fetcherid-3" aria-label="Permalink to &quot;fetcherID&quot;">​</a></h5><p>设置要获取文件权限列表的获取者数字身份标识，owners、sharers、readers中的一个数字身份标识。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherID </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="eventcontext-10" tabindex="-1">eventContext <a class="header-anchor" href="#eventcontext-10" aria-label="Permalink to &quot;eventContext&quot;">​</a></h5><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> eventContext </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> get</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//要获取文件权限列表的文件在链外应用系统数据库中的唯一标识</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">57bee7e51eb48b2896288021b7374cfc78c0bac8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    FileRightsFetch</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h4 id="方法-11" tabindex="-1">方法 <a class="header-anchor" href="#方法-11" aria-label="Permalink to &quot;方法&quot;">​</a></h4><h5 id="query-4" tabindex="-1">query <a class="header-anchor" href="#query-4" aria-label="Permalink to &quot;query&quot;">​</a></h5><p>向指定的前置节点服务器提交&quot;文件权限列表获取&quot;链上获取请求。调用此方法，将会通过onSuccess 和onFailure事件返回查询结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">query</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fetcherPrivateKey String</p><p>设置要进行文件权限列表获取的获取者数字身份私钥，fetcherID对应的私钥。私钥用于对&quot;文件权限列表获取&quot;链上获取请求进行签名确权。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileRightsFetch</span><span style="color:#A6ACCD;"> oFileRightsFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileRightsFetch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileRightsFetchStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fRightsFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">         </span><span style="color:#676E95;font-style:italic;">//事件触发条件：文件权限列表成功下载。</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//获取者数字身份私钥</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//进行&quot;文件权限列表获取&quot;链上操作提交</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileRightsFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">query</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="createrqbody-3" tabindex="-1">createRqBody <a class="header-anchor" href="#createrqbody-3" aria-label="Permalink to &quot;createRqBody&quot;">​</a></h5><p>和前置节点进行交互，生成&quot;文件权限列表获取&quot;链上操作对应的链上获取请求体，以便使用获取者数字身份对应的私钥对链上获取请求体进行确权签名。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createRqBody</span><span style="color:#89DDFF;">();</span></span></code></pre></div><p><strong>返回</strong></p><p>String</p><p>序列化的&quot;文件权限列表获取&quot;链上获取请求体。</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//生成&quot;文件权限列表获取&quot;链上获取请求体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fRightsFetchRqBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oFileRightsFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRqBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//用获取者数字身份对&quot;文件权限列表获取&quot;链上获取请求体进行签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fRightsFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="queryrqbody-3" tabindex="-1">queryRqBody <a class="header-anchor" href="#queryrqbody-3" aria-label="Permalink to &quot;queryRqBody&quot;">​</a></h5><p>使用文件权限列表获取链上获取请求体原文和fetcherID中数字身份对获取请求体的签名结果信息，向指定的前置节点服务器提交&quot;文件权限列表获取&quot;链上获取请求。调用此方法，将会通过onSuccess 和onFailure事件返回查询结果。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">queryRqBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fRightsFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p><strong>参数</strong></p><p>fRightsFetchRqBody String</p><p>文件权限列表获取链上获取请求体原文</p><p>txSign String</p><p>文件权限列表获取链上获取请求体签名结果信息</p><p><strong>示例：</strong></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//【程序A】准备&quot;文件权限列表获取&quot;链上获取请求体</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileRightsFetch</span><span style="color:#A6ACCD;"> oPrepareFRightsFetchRqBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileRightsFetch</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFRightsFetchRqBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">88021b73bac8b248b2896278c04a4378962e51eb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oPrepareFRightsFetchRqBody</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fetcherID </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0d64ad368ebc37ddb80424376408cb7bb88ff328</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fRightsFetchRqBody </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> oPrepareFRightsFetchRqBody</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRqBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序B】在外部使用数字身份签名应用进行fRightsFetchRqBody签名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fetcherPrivateKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8d0422cca53480c6b8d0422cca5341a948e91c50c915a4576c88b53de9c473cc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> txSign </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CryptoUtil</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">crypto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">signature</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fRightsFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> fetcherPrivateKey</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//【程序A】提交&quot;文件权限列表获取&quot;链上获取请求，并跟踪链上处理状态</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FileRightsFetch</span><span style="color:#A6ACCD;"> oFileRightsFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileRightsFetch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">frontendServer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> businessDomainID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileRightsFetch</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">fileIDFromCaller</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    oFileRightsFetch</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queryRqBody</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fRightsFetchRqBody</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> txSign</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h4 id="事件-10" tabindex="-1">事件 <a class="header-anchor" href="#事件-10" aria-label="Permalink to &quot;事件&quot;">​</a></h4><h5 id="onsuccess-3" tabindex="-1">onSuccess <a class="header-anchor" href="#onsuccess-3" aria-label="Permalink to &quot;onSuccess&quot;">​</a></h5><p>此事件在&quot;文件权限列表获取&quot;链上操作处理彻底完成，文件权限列表已成功下载时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileRightsFetchStatus</span><span style="color:#A6ACCD;"> fRightsFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fRightsFetchStatus FileRightsFetchStatus</p><p>包含&quot;文件权限列表获取&quot;链上操作的当前处理状态信息的对象。</p><p>fRightsFetchStatus中将包含如下返回信息，详细解释请参看FileRightsFetchStatus对象相关描述：</p><p>| status，errorCode，message，fileRights |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileRightsFetch</span><span style="color:#A6ACCD;"> oFileRightsFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileRightsFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileRightsFetchStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fRightsFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：在&quot;获取文件权限列表&quot;成功下载。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">FileRightsInfo</span><span style="color:#A6ACCD;"> oFileRightsInfo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fRightsFetchStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fileRights</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> oFileRightsInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">owners</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">++)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">             System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">文件所有者身份标识: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oFileRightsInfo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">owners</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">]);</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//文件所有者所授权的分享者列表 </span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">SharerList</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> oSharersSetByOwner </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fRightsFetchStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sharersByOwner</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> j</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> j</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> oSharersSetByOwner</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> j</span><span style="color:#89DDFF;">++)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">             System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">有授权分享者的文件所有者数字身份标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oSharersSetByOwner</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">j</span><span style="color:#89DDFF;">].</span><span style="color:#A6ACCD;">ownerID</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">             </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> n</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> n</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> oSharersSetByOwner</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">j</span><span style="color:#89DDFF;">].</span><span style="color:#A6ACCD;">sharers</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> n</span><span style="color:#89DDFF;">++)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">当前文件所有者授权的分享者数字身份标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> oSharersSetByOwner</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">].</span><span style="color:#A6ACCD;">sharers</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">n</span><span style="color:#89DDFF;">]);</span></span>
<span class="line"><span style="color:#A6ACCD;">             </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onfailure-3" tabindex="-1">onFailure <a class="header-anchor" href="#onfailure-3" aria-label="Permalink to &quot;onFailure&quot;">​</a></h5><p>此事件在&quot;获取文件权限列表&quot;链上操作处理失败，文件权限列表未被下载时发生。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onSuccess</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileRightsFetchStatus</span><span style="color:#A6ACCD;"> fRightsFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>参数</p><p>fRightsFetchStatus FileRightsFetchStatus</p><p>包含&quot;获取文件权限列表&quot;链上操作的当前处理状态信息的对象。</p><p>fRightsFetchStatus中将包含如下返回信息，详细解释请参看FileRightsFetchStatus对象相关描述：</p><p>| errorCode，message |</p><p>context Object</p><p>设置需要传入事件中的业务逻辑信息，便于事件中进行后续业务逻辑处理。如果没有可传入的信息，此参数可以不用赋值。</p><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileRightsFetch</span><span style="color:#A6ACCD;"> oFileRightsFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileRightsFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onFailure</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FileRightsFetchStatus</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fRightsFetchStatus</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">//事件触发条件：在&quot;获取文件权限列表&quot;链上操作处理失败，文件权限列表未被下载。</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">          System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">查询失败=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fRightsFetchStatus</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="onerror-10" tabindex="-1">onError <a class="header-anchor" href="#onerror-10" aria-label="Permalink to &quot;onError&quot;">​</a></h5><p>此为事件在FileRightsFetch调用出现异常时发生。事件触发后返回异常信息。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FetchException</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">);</span></span></code></pre></div><p>示例：</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">FileRightsFetch</span><span style="color:#A6ACCD;"> oFileRightsFetch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileRightsFetch</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FetchException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">context</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//事件触发条件：FileRightsFetch调用出现异常。并返回异常信息。</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> fileIDFromCaller </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> context</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">链外应用系统调用端的唯一标识=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> fileIDFromCaller</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常状态描述=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">           System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">异常信息=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-c4b0d3cf data-v-face870a><!--[--><!--]--><!----><div class="prev-next" data-v-face870a><div class="pager" data-v-face870a><!----></div><div class="pager" data-v-face870a><a class="pager-link next" href="/vitepress-demo/markdown/chapter-1/#从法链概述" data-v-face870a><span class="desc" data-v-face870a>Next page</span><span class="title" data-v-face870a>从法链概述</span></a></div></div></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"markdown_chapter-3_index.md\":\"4036accc\",\"markdown_chapter-5_index.md\":\"02ed2f2f\",\"index.md\":\"c9e05315\",\"markdown_chapter-2_index.md\":\"d2114afa\",\"markdown_chapter-1_index.md\":\"5de2f799\",\"markdown_chapter-4_index.md\":\"7a477e0b\",\"markdown_chapter-7_index.md\":\"2db5a2f7\",\"markdown_chapter-8_chapter-8.2_index.md\":\"4e00a900\",\"markdown_chapter-9_index.md\":\"66a819f6\",\"markdown_chapter-6_index.md\":\"4ed12106\",\"markdown_chapter-8_chapter-8.1_index.md\":\"c83f787f\",\"markdown_chapter-8_index.md\":\"f746d7e0\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"从法链\",\"description\":\"Front end project and tips sharing\",\"base\":\"/vitepress-demo/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"siteTitle\":\"从法链\",\"logo\":\"/logo.png\",\"displayAllHeaders\":true,\"sidebar\":[{\"text\":\"从法链概述\",\"link\":\"markdown/chapter-1/#从法链概述\",\"items\":[]},{\"text\":\"名词解释\",\"link\":\"markdown/chapter-2/#名词解释\",\"items\":[]},{\"text\":\"调用环境\",\"link\":\"markdown/chapter-3/#调用环境\",\"items\":[]},{\"text\":\"快速入门教程\",\"link\":\"markdown/chapter-4/#快速入门教程\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"4.1 文件上链保存\",\"link\":\"markdown/chapter-4/#文件上链保存\"},{\"text\":\"4.2 结构数据上链保存\",\"link\":\"markdown/chapter-4/#结构数据上链保存\"}]},{\"text\":\"链上操作调用基本步骤\",\"link\":\"markdown/chapter-5/#链上操作调用基本步骤\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"5.1 上链交易提交\",\"link\":\"markdown/chapter-5/#上链交易提交\"},{\"text\":\"5.2 链上数据查询\",\"link\":\"markdown/chapter-5/#链上数据查询\"}]},{\"text\":\"链上操作\",\"link\":\"markdown/chapter-6/#链上操作\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"6.1 调用前置条件\",\"link\":\"markdown/chapter-6/#调用前置条件\"},{\"text\":\"6.2 文件操作\",\"link\":\"markdown/chapter-6/#文件操作\",\"items\":[{\"text\":\"6.2.1 文件保存\",\"link\":\"markdown/chapter-6/#文件保存\"},{\"text\":\"6.2.2 文件元数据更新\",\"link\":\"markdown/chapter-6/#文件元数据更新\"},{\"text\":\"6.2.3 文件本体更新\",\"link\":\"markdown/chapter-6/#文件本体更新\"},{\"text\":\"6.2.4 文件授权\",\"link\":\"markdown/chapter-6/#文件授权\"},{\"text\":\"6.2.5 文件元数据获取\",\"link\":\"markdown/chapter-6/#文件元数据获取\"},{\"text\":\"6.2.6 文件本体获取\",\"link\":\"markdown/chapter-6/#文件本体获取\"},{\"text\":\"6.2.7 文件删除\",\"link\":\"markdown/chapter-6/#文件删除\"},{\"text\":\"6.2.8 文件本体清空\",\"link\":\"markdown/chapter-6/#文件本体清空\"},{\"text\":\"6.2.9 文件验真\",\"link\":\"markdown/chapter-6/#文件验真\"},{\"text\":\"6.2.10 文件追溯\",\"link\":\"markdown/chapter-6/#文件追溯\"}]},{\"text\":\"6.3 结构数据操作\",\"link\":\"markdown/chapter-6/#结构数据操作\",\"items\":[{\"text\":\"6.3.1 数据保存\",\"link\":\"markdown/chapter-6/#数据保存\"},{\"text\":\"6.3.2 数据更新\",\"link\":\"markdown/chapter-6/#数据更新\"},{\"text\":\"6.3.3 数据授权\",\"link\":\"markdown/chapter-6/#数据授权\"},{\"text\":\"6.3.4 数据获取\",\"link\":\"markdown/chapter-6/#数据获取\"},{\"text\":\"6.3.5 数据删除\",\"link\":\"markdown/chapter-6/#数据删除\"},{\"text\":\"6.3.6 数据验真\",\"link\":\"markdown/chapter-6/#数据验真\"},{\"text\":\"6.3.7 数据追溯\",\"link\":\"markdown/chapter-6/#数据追溯\"}]},{\"text\":\"6.4 合约操作\",\"link\":\"markdown/chapter-6/#合约操作\",\"items\":[{\"text\":\"6.4.1 合约方法调用\",\"link\":\"markdown/chapter-6/#合约方法调用\"}]}]},{\"text\":\"HTTP API参考\",\"link\":\"markdown/chapter-7/#http-api参考\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"7.1 接口调用业务系统身份签名确认\",\"link\":\"markdown/chapter-7/#接口调用业务系统身份签名确认\"},{\"text\":\"7.2 接口说明\",\"link\":\"markdown/chapter-7/#接口说明\",\"items\":[{\"text\":\"7.2.1 基础上链交易操作\",\"link\":\"markdown/chapter-7/#基础上链交易操作\"},{\"text\":\"7.2.2 文件操作\",\"link\":\"markdown/chapter-7/#文件操作\"},{\"text\":\"7.2.3 结构数据操作\",\"link\":\"markdown/chapter-7/#结构数据操作\"},{\"text\":\"7.2.4 合约调用\",\"link\":\"markdown/chapter-7/#合约调用\"}]}]},{\"text\":\"CoolawChain Java SDK参考\",\"link\":\"markdown/chapter-8/#coolawchain-java-sdk参考\",\"collapsible\":true,\"collapsed\":true,\"items\":[{\"text\":\"8.1 com.coolawchain.sdk.file\",\"link\":\"markdown/chapter-8/#com.coolawchain.sdk.file\",\"items\":[{\"text\":\"8.1.1 FileUpload\",\"link\":\"markdown/chapter-8/#fileupload\"},{\"text\":\"8.1.2 FileModify\",\"link\":\"markdown/chapter-8/#filemodify\"},{\"text\":\"8.1.3 FileMetaUpate\",\"link\":\"markdown/chapter-8/#filemetaupate\"},{\"text\":\"8.1.4 FileAuthorise\",\"link\":\"markdown/chapter-8/#fileauthorise\"},{\"text\":\"8.1.5 FileMetaFetch\",\"link\":\"markdown/chapter-8/#filemetafetch\"},{\"text\":\"8.1.6 FileFetch\",\"link\":\"markdown/chapter-8/#filefetch\"},{\"text\":\"8.1.7 FileDelete\",\"link\":\"markdown/chapter-8/#filedelete\"},{\"text\":\"8.1.8 FileEmptyApply\",\"link\":\"markdown/chapter-8/#fileemptyapply\"},{\"text\":\"8.1.9 FileEmptyApprove\",\"link\":\"markdown/chapter-8/#fileemptyapprove\"},{\"text\":\"8.1.10 FileDigestCheck\",\"link\":\"markdown/chapter-8/#filedigestcheck\"},{\"text\":\"8.1.11 FileVersionsFetch\",\"link\":\"markdown/chapter-8/#fileversionsfetch\"},{\"text\":\"8.1.12 FileRightsFetch\",\"link\":\"markdown/chapter-8/#filerightsfetch\"}]},{\"text\":\"8.2 com.coolawchain.sdk.structdata\",\"link\":\"markdown/chapter-8/chapter-8.1/#com.coolawchain.sdk.structdata\",\"items\":[{\"text\":\"8.2.1 DataUpload\",\"link\":\"markdown/chapter-8/chapter-8.1/#dataupload\"},{\"text\":\"8.2.2 DataModify\",\"link\":\"markdown/chapter-8/chapter-8.1/#datamodify\"},{\"text\":\"8.2.3 DataAuthorise\",\"link\":\"markdown/chapter-8/chapter-8.1/#dataauthorise\"},{\"text\":\"8.2.4 DataFetch\",\"link\":\"markdown/chapter-8/chapter-8.1/#datafetch\"},{\"text\":\"8.2.5 DataDelete\",\"link\":\"markdown/chapter-8/chapter-8.1/#datadelete\"},{\"text\":\"8.2.6 DataDigestCheck\",\"link\":\"markdown/chapter-8/chapter-8.1/#datadigestcheck\"},{\"text\":\"8.2.7 DataVersionsFetch\",\"link\":\"markdown/chapter-8/chapter-8.1/#dataversionsfetch\"},{\"text\":\"8.2.8 DataRightsFetch\",\"link\":\"markdown/chapter-8/chapter-8.1/#datarightsfetch\"}]},{\"text\":\"8.3 com.coolawchain.sdk.contract\",\"link\":\"markdown/chapter-8/chapter-8.1/#comcoolawchainsdkcontract\",\"items\":[{\"text\":\"8.3.1 ContractCall\",\"link\":\"markdown/chapter-8/chapter-8.1/#contractcall\"}]},{\"text\":\"8.4 com.coolawchain.sdk.model\",\"link\":\"markdown/chapter-8/chapter-8.2/#com.coolawchain.sdk.model\",\"items\":[{\"text\":\"8.4.1 Frontend\",\"link\":\"markdown/chapter-8/chapter-8.2/#frontend\"},{\"text\":\"8.4.2 FileTxStatus\",\"link\":\"markdown/chapter-8/chapter-8.2/#filetxstatus\"},{\"text\":\"8.4.3 FileMetaFetchStatus\",\"link\":\"markdown/chapter-8/chapter-8.2/#filemetafetchstatus\"},{\"text\":\"8.4.4 FileFetchStatus\",\"link\":\"markdown/chapter-8/chapter-8.2/#filefetchstatus\"},{\"text\":\"8.4.5 FileDigestCheckStatus\",\"link\":\"markdown/chapter-8/chapter-8.2/#filedigestcheckstatus\"},{\"text\":\"8.4.6 FileVersionsFetchStatus\",\"link\":\"markdown/chapter-8/chapter-8.2/#fileversionsfetchstatus\"},{\"text\":\"8.4.7 FileRightsFetchStatus\",\"link\":\"markdown/chapter-8/chapter-8.2/#filerightsfetchstatus\"},{\"text\":\"8.4.8 DataTxStatus\",\"link\":\"markdown/chapter-8/chapter-8.2/#datatxstatus\"},{\"text\":\"8.4.9 DataFetchStatus\",\"link\":\"markdown/chapter-8/chapter-8.2/#datafetchstatus\"},{\"text\":\"8.4.10 DataDigestCheckStatus\",\"link\":\"markdown/chapter-8/chapter-8.2/#datadigestcheckstatus\"},{\"text\":\"8.4.11 DataVersionsFetchStatus\",\"link\":\"markdown/chapter-8/chapter-8.2/#dataversionsfetchstatus\"},{\"text\":\"8.4.12 DataRightsFetchStatus\",\"link\":\"markdown/chapter-8/chapter-8.2/#datarightsfetchstatus\"},{\"text\":\"8.4.13 ContractCallStatus\",\"link\":\"markdown/chapter-8/chapter-8.2/#contractcallstatus\"}]},{\"text\":\"8.5 com.coolawchain.sdk.exceptions\",\"link\":\"markdown/chapter-8/chapter-8.2/#com.coolawchain.sdk.exceptions\",\"items\":[{\"text\":\"8.5.1 HttpCodeErrorException\",\"link\":\"markdown/chapter-8/chapter-8.2/#httpcodeerrorexception\"},{\"text\":\"8.5.2 FetchException\",\"link\":\"markdown/chapter-8/chapter-8.2/#fetchexception\"},{\"text\":\"8.5.3 TxException\",\"link\":\"markdown/chapter-8/chapter-8.2/#txexception\"}]},{\"text\":\"8.6 com.coolawchain.sdk.utils\",\"link\":\"markdown/chapter-8/chapter-8.2/#com.coolawchain.sdk.utils\",\"items\":[{\"text\":\"8.6.1 CryptoUtil\",\"link\":\"markdown/chapter-8/chapter-8.2/#cryptoutil\"},{\"text\":\"8.6.2 SM4Util\",\"link\":\"markdown/chapter-8/chapter-8.2/#sm4util\"}]}]},{\"text\":\"消息信息\",\"link\":\"markdown/chapter-9/#消息信息\",\"items\":[]}]},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>